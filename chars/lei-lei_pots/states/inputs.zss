# _________________________________________
#| Some character by Phantom.of.the.Server |
# ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
#==============================================================================================================================================================
#==================================================================< INPUT PARSING STATE >=====================================================================
#==============================================================================================================================================================

# March 2025
# Code now uses InputTime trigger instead of needing command definitions

[Statedef -4]

# Human players only
# Main reason I'm optimizing this in ZSS
ignorehitpause if !AIlevel && !ishelper {


#=====================================================================< SYSTEM CHECKS >========================================================================

	# Default Buffer Time
	# Capcom games seem to change states during hitpause rather than buffering the inputs for its duration
	# However the benefit of doing it like that is minimal compared to the issues it can introduce
	let cmd_buffertime = ifelse(hitpausetime <= 4, 5, (hitpausetime + 1));

	# Custom Combo Buffer Time
	if map(customcombo) > 0 {
		let cmd_buffertime = (hitpausetime + 1);
	}

	# Toggle Negative Edge
	# It is somewhat obsolete with modern, lenient inputs
	let cmd_negativeedge = 0;

	# Exceptions for Pocket Shin Gouki
	if name = "Pocket Shin Gouki" {
		let cmd_buffertime = (hitpausetime + 1);
		let cmd_negativeedge = 1;
	}

	# NoInput flag enables all input erasers, for consistency with Ikemen's native input parser
	if isasserted(noinput) {
		mapSet{map: "cmd_erase_motion_super"; value: 1}
		mapSet{map: "cmd_erase_motion_special"; value: 1}
		mapSet{map: "cmd_erase_completed"; value: 1}
		# Maybe add one for dashing and high jumping
	}
	# These flags clear the buffers of the corresponding input groups
	# Every action triggered by a button press should enable them
	# "cmd_erase_motion_super" clears super joystick motions
	# "cmd_erase_motion_special" clears special joystick motions
	# "cmd_erase_completed" clears completed commands, be they single button presses or motions plus buttons

	# Disabling landing option selects was here
	# It's no longer needed after the cmd_erase_completed refactor


#====================================================================< JOYSTICK CHECKS >=======================================================================

	# Check directions
	let direction_U = Min(-Max(inputTime(B), inputTime(F)), inputTime(U));
	let direction_D = Min(-Max(inputTime(B), inputTime(F)), inputTime(D));
	let direction_B = Min(-Max(inputTime(D), inputTime(U)), inputTime(B));
	let direction_F = Min(-Max(inputTime(D), inputTime(U)), inputTime(F));
	let direction_UF = Min(inputTime(U), inputTime(F));
	let direction_UB = Min(inputTime(U), inputTime(B));
	let direction_DF = Min(inputTime(D), inputTime(F));
	let direction_DB = Min(inputTime(D), inputTime(B));
	let direction_any_U = inputTime(U);
	let direction_any_D = inputTime(D);
	let direction_any_B = inputTime(B);
	let direction_any_F = inputTime(F);

	# Neutral position
	let direction_N = inputTime(D) < 0 && inputTime(F) < 0 && inputTime(U) < 0 && inputTime(B) < 0;

	# Flip X axis if enemy is behind player
	# Capcom games use an arbitrary fixed distance instead of the character's width
	if p2dist x < -const(size.ground.back) {
		let check_reversed = 1;
	}

	# This is obsolete with inputTime having replaced command checking
	# Illegal Joystick Motion
	# Check if more than one direction is pressed at the same time
	# Halts motion checking during a pause's endcmdbuftime
	#if ($direction_D > 0 + $direction_DF > 0 + $direction_F > 0 + command = "/UF" + $direction_U > 0 + command = "/UB" + $direction_B > 0 + $direction_DB > 0) >= 2 {
	#	let check_illegal = 1;
	#}


#=====================================================================< BUTTON CHECKS >========================================================================
# Most of this section of the code became obsolete after adding optional delay to Ikemen

	# Check buttons
	# This step is mostly so that the buttons use the same syntax as directions in the rest of the code
	let button_a = inputTime(a);
	let button_b = inputTime(b);
	let button_c = inputTime(c);
	let button_x = inputTime(x);
	let button_y = inputTime(y);
	let button_z = inputTime(z);
	let button_s = inputTime(s);


#=====================================================================< SINGLE BUTTON >========================================================================

	# Erase inputs
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_a"; value: 0}
		mapSet{map: "cmd_b"; value: 0}
		mapSet{map: "cmd_c"; value: 0}
		mapSet{map: "cmd_x"; value: 0}
		mapSet{map: "cmd_y"; value: 0}
		mapSet{map: "cmd_z"; value: 0}
		mapSet{map: "cmd_s"; value: 0}
		mapSet{map: "cmd_rlsa"; value: 0}
		mapSet{map: "cmd_rlsb"; value: 0}
		mapSet{map: "cmd_rlsc"; value: 0}
		mapSet{map: "cmd_rlsx"; value: 0}
		mapSet{map: "cmd_rlsy"; value: 0}
		mapSet{map: "cmd_rlsz"; value: 0}
		mapSet{map: "cmd_rlss"; value: 0}
	}

	# Decrease timers
	if map(cmd_a) > 0 {mapAdd{map: "cmd_a"; value: -1}}
	if map(cmd_b) > 0 {mapAdd{map: "cmd_b"; value: -1}}
	if map(cmd_c) > 0 {mapAdd{map: "cmd_c"; value: -1}}
	if map(cmd_x) > 0 {mapAdd{map: "cmd_x"; value: -1}}
	if map(cmd_y) > 0 {mapAdd{map: "cmd_y"; value: -1}}
	if map(cmd_z) > 0 {mapAdd{map: "cmd_z"; value: -1}}
	if map(cmd_s) > 0 {mapAdd{map: "cmd_s"; value: -1}}
	if map(cmd_rlsa) > 0 {mapAdd{map: "cmd_rlsa"; value: -1}}
	if map(cmd_rlsb) > 0 {mapAdd{map: "cmd_rlsb"; value: -1}}
	if map(cmd_rlsc) > 0 {mapAdd{map: "cmd_rlsc"; value: -1}}
	if map(cmd_rlsx) > 0 {mapAdd{map: "cmd_rlsx"; value: -1}}
	if map(cmd_rlsy) > 0 {mapAdd{map: "cmd_rlsy"; value: -1}}
	if map(cmd_rlsz) > 0 {mapAdd{map: "cmd_rlsz"; value: -1}}
	if map(cmd_rlss) > 0 {mapAdd{map: "cmd_rlss"; value: -1}}

	# Single button detection
	if $button_a = 1 {mapSet{map: "cmd_a"; value: $cmd_buffertime}}
	if $button_b = 1 {mapSet{map: "cmd_b"; value: $cmd_buffertime}}
	if $button_c = 1 {mapSet{map: "cmd_c"; value: $cmd_buffertime}}
	if $button_x = 1 {mapSet{map: "cmd_x"; value: $cmd_buffertime}}
	if $button_y = 1 {mapSet{map: "cmd_y"; value: $cmd_buffertime}}
	if $button_z = 1 {mapSet{map: "cmd_z"; value: $cmd_buffertime}}
	if $button_s = 1 {mapSet{map: "cmd_s"; value: $cmd_buffertime}}
	if $button_a = -1 {mapSet{map: "cmd_rlsa"; value: $cmd_buffertime}}
	if $button_b = -1 {mapSet{map: "cmd_rlsb"; value: $cmd_buffertime}}
	if $button_c = -1 {mapSet{map: "cmd_rlsc"; value: $cmd_buffertime}}
	if $button_x = -1 {mapSet{map: "cmd_rlsx"; value: $cmd_buffertime}}
	if $button_y = -1 {mapSet{map: "cmd_rlsy"; value: $cmd_buffertime}}
	if $button_z = -1 {mapSet{map: "cmd_rlsz"; value: $cmd_buffertime}}
	if $button_s = -1 {mapSet{map: "cmd_rlss"; value: $cmd_buffertime}}


#==================================================================< BUTTON COMBINATIONS >=====================================================================
# No negative edge

	# Erase inputs
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_kk"; value: 0}
		mapSet{map: "cmd_pp"; value: 0}
		mapSet{map: "cmd_ax"; value: 0}
		mapSet{map: "cmd_cz"; value: 0}
	}

	# Decrease timers
	if map(cmd_kk) > 0 {mapAdd{map: "cmd_kk"; value: -1}}
	if map(cmd_pp) > 0 {mapAdd{map: "cmd_pp"; value: -1}}
	if map(cmd_ax) > 0 {mapAdd{map: "cmd_ax"; value: -1}}
	if map(cmd_cz) > 0 {mapAdd{map: "cmd_cz"; value: -1}}

	# 2 kicks
	if (($button_a = 1) + ($button_b = 1) + ($button_c = 1)) >= 2 {
		mapSet{map: "cmd_kk"; value: $cmd_buffertime}
	}

	# 2 punches
	if (($button_x = 1) + ($button_y = 1) + ($button_z = 1)) >= 2 {
		mapSet{map: "cmd_pp"; value: $cmd_buffertime}
	}

	# A + X
	if $button_a = 1 && $button_x = 1 {
		mapSet{map: "cmd_ax"; value: $cmd_buffertime}
	}

	# C + Z
	if $button_c = 1 && $button_z = 1 {
		mapSet{map: "cmd_cz"; value: $cmd_buffertime}
	}


#==================================================================< DIRECTION + BUTTON >======================================================================
# Placeholder
# During target combos these should also be buffered


#===============================================================< SPECIAL MOVE BUTTON CHECK >==================================================================
# Only used to check special and super motion variations
# Button presses have priority over button releases and won't be counted together
# Not buffered

	# Count kick buttons
	let pressed_kicks = 0;
	if $cmd_negativeedge {
		if $button_a = 1 || $button_b = 1 || $button_c = 1 {
			let pressed_kicks = ($button_a = 1) + ($button_b = 1) + ($button_c = 1);
		} else if $button_a = -1 || $button_b = -1 || $button_c = -1 {
			let pressed_kicks = ($button_a = -1) + ($button_b = -1) + ($button_c = -1);
		}
	} else {
		if $button_a = 1 || $button_b = 1 || $button_c = 1 {
			let pressed_kicks = ($button_a = 1) + ($button_b = 1) + ($button_c = 1);
		}
	}

	# Count punch buttons
	let pressed_punches = 0;
	if $cmd_negativeedge {
		if $button_x = 1 || $button_y = 1 || $button_z = 1 {
			let pressed_punches = ($button_x = 1) + ($button_y = 1) + ($button_z = 1);
		} else if $button_x = -1 || $button_y = -1 || $button_z = -1 {
			let pressed_punches = ($button_x = -1) + ($button_y = -1) + ($button_z = -1);
		}
	} else {
		if $button_x = 1 || $button_y = 1 || $button_z = 1 {
			let pressed_punches = ($button_x = 1) + ($button_y = 1) + ($button_z = 1);
		}
	}

	# Kicks
	if $pressed_kicks >= 3 {
		let check_kkk = 1;
	}
	if $pressed_kicks >= 2 {
		let check_kk = 1;
	}
	if $pressed_kicks >= 1 {
		let check_k = 1;
	}

	# Punches
	if $pressed_punches >= 3 {
		let check_ppp = 1;
	}
	if $pressed_punches >= 2 {
		let check_pp = 1;
	}
	if $pressed_punches >= 1 {
		let check_p = 1;
	}

	# Start
	# Not supposed to have negative edge
	if $button_s = 1 {
		let check_s = 1;
	}


#===================================================================< SPECIAL STRENGTH CHECK >=====================================================================
# Replaces having a version of each command for every button
# Main benefit is to keep the code a bit shorter
# Buffered and not erasable

	# Decrease timers
	if map(cmd_strength_abc) > 0 {mapAdd{map: "cmd_strength_abc"; value: -1}}
	if map(cmd_strength_xyz) > 0 {mapAdd{map: "cmd_strength_xyz"; value: -1}}
	if map(cmd_strength_ab) > 0 {mapAdd{map: "cmd_strength_ab"; value: -1}}
	if map(cmd_strength_ac) > 0 {mapAdd{map: "cmd_strength_ac"; value: -1}}
	if map(cmd_strength_bc) > 0 {mapAdd{map: "cmd_strength_bc"; value: -1}}
	if map(cmd_strength_xy) > 0 {mapAdd{map: "cmd_strength_xy"; value: -1}}
	if map(cmd_strength_xz) > 0 {mapAdd{map: "cmd_strength_xz"; value: -1}}
	if map(cmd_strength_yz) > 0 {mapAdd{map: "cmd_strength_yz"; value: -1}}
	if map(cmd_strength_a) > 0 {mapAdd{map: "cmd_strength_a"; value: -1}}
	if map(cmd_strength_b) > 0 {mapAdd{map: "cmd_strength_b"; value: -1}}
	if map(cmd_strength_c) > 0 {mapAdd{map: "cmd_strength_c"; value: -1}}
	if map(cmd_strength_x) > 0 {mapAdd{map: "cmd_strength_x"; value: -1}}
	if map(cmd_strength_y) > 0 {mapAdd{map: "cmd_strength_y"; value: -1}}
	if map(cmd_strength_z) > 0 {mapAdd{map: "cmd_strength_z"; value: -1}}

	# 3 Kicks
	if $check_kkk {
		mapSet{map: "cmd_strength_abc"; value: $cmd_buffertime}
	}

	# 3 Punches
	if $check_ppp {
		mapSet{map: "cmd_strength_xyz"; value: $cmd_buffertime}
	}

	# 2 Kicks
	if $check_kk {
		if $button_b = 1 && $button_c = 1 {
			mapSet{map: "cmd_strength_ab"; value: 0}
			mapSet{map: "cmd_strength_ac"; value: 0}
			mapSet{map: "cmd_strength_bc"; value: $cmd_buffertime}
		} else if $button_a = 1 && $button_c = 1 {
			mapSet{map: "cmd_strength_ab"; value: 0}
			mapSet{map: "cmd_strength_ac"; value: $cmd_buffertime}
			mapSet{map: "cmd_strength_bc"; value: 0}
		} else if $button_a = 1 && $button_b = 1 {
			mapSet{map: "cmd_strength_ab"; value: $cmd_buffertime}
			mapSet{map: "cmd_strength_ac"; value: 0}
			mapSet{map: "cmd_strength_bc"; value: 0}
		}
		if $cmd_negativeedge {
			if $button_b = -1 && $button_c = -1 {
				mapSet{map: "cmd_strength_ab"; value: 0}
				mapSet{map: "cmd_strength_ac"; value: 0}
				mapSet{map: "cmd_strength_bc"; value: $cmd_buffertime}
			} else if $button_a = -1 && $button_c = -1 {
				mapSet{map: "cmd_strength_ab"; value: 0}
				mapSet{map: "cmd_strength_ac"; value: $cmd_buffertime}
				mapSet{map: "cmd_strength_bc"; value: 0}
			} else if $button_a = -1 && $button_b = -1 {
				mapSet{map: "cmd_strength_ab"; value: $cmd_buffertime}
				mapSet{map: "cmd_strength_ac"; value: 0}
				mapSet{map: "cmd_strength_bc"; value: 0}
			}
		}
	}

	# 2 Punches
	if $check_pp {
		if $button_y = 1 && $button_z = 1 {
			mapSet{map: "cmd_strength_xy"; value: 0}
			mapSet{map: "cmd_strength_xz"; value: 0}
			mapSet{map: "cmd_strength_yz"; value: $cmd_buffertime}
		} else if $button_x = 1 && $button_z = 1 {
			mapSet{map: "cmd_strength_xy"; value: 0}
			mapSet{map: "cmd_strength_xz"; value: $cmd_buffertime}
			mapSet{map: "cmd_strength_yz"; value: 0}
		} else if $button_x = 1 && $button_y = 1 {
			mapSet{map: "cmd_strength_xy"; value: $cmd_buffertime}
			mapSet{map: "cmd_strength_xz"; value: 0}
			mapSet{map: "cmd_strength_yz"; value: 0}
		}
		if $cmd_negativeedge {
			if $button_y = -1 && $button_z = -1 {
				mapSet{map: "cmd_strength_xy"; value: 0}
				mapSet{map: "cmd_strength_xz"; value: 0}
				mapSet{map: "cmd_strength_yz"; value: $cmd_buffertime}
			} else if $button_x = -1 && $button_z = -1 {
				mapSet{map: "cmd_strength_xy"; value: 0}
				mapSet{map: "cmd_strength_xz"; value: $cmd_buffertime}
				mapSet{map: "cmd_strength_yz"; value: 0}
			} else if $button_x = -1 && $button_y = -1 {
				mapSet{map: "cmd_strength_xy"; value: $cmd_buffertime}
				mapSet{map: "cmd_strength_xz"; value: 0}
				mapSet{map: "cmd_strength_yz"; value: 0}
			}
		}
	}

	# 1 Kick
	if $check_k {
		if $button_c = 1 {
			mapSet{map: "cmd_strength_a"; value: 0}
			mapSet{map: "cmd_strength_b"; value: 0}
			mapSet{map: "cmd_strength_c"; value: $cmd_buffertime}
		} else if $button_b = 1 {
			mapSet{map: "cmd_strength_a"; value: 0}
			mapSet{map: "cmd_strength_b"; value: $cmd_buffertime}
			mapSet{map: "cmd_strength_c"; value: 0}
		} else if $button_a = 1 {
			mapSet{map: "cmd_strength_a"; value: $cmd_buffertime}
			mapSet{map: "cmd_strength_b"; value: 0}
			mapSet{map: "cmd_strength_c"; value: 0}
		}
		if $cmd_negativeedge {
			if $button_c = -1 {
				mapSet{map: "cmd_strength_a"; value: 0}
				mapSet{map: "cmd_strength_b"; value: 0}
				mapSet{map: "cmd_strength_c"; value: $cmd_buffertime}
			} else if $button_b = -1 {
				mapSet{map: "cmd_strength_a"; value: 0}
				mapSet{map: "cmd_strength_b"; value: $cmd_buffertime}
				mapSet{map: "cmd_strength_c"; value: 0}
			} else if $button_a = -1 {
				mapSet{map: "cmd_strength_a"; value: $cmd_buffertime}
				mapSet{map: "cmd_strength_b"; value: 0}
				mapSet{map: "cmd_strength_c"; value: 0}
			}
		}
	}

	# 1 Punch
	if $check_p {
		if $button_z = 1 {
			mapSet{map: "cmd_strength_x"; value: 0}
			mapSet{map: "cmd_strength_y"; value: 0}
			mapSet{map: "cmd_strength_z"; value: $cmd_buffertime}
		} else if $button_y = 1 {
			mapSet{map: "cmd_strength_x"; value: 0}
			mapSet{map: "cmd_strength_y"; value: $cmd_buffertime}
			mapSet{map: "cmd_strength_z"; value: 0}
		} else if $button_x = 1 {
			mapSet{map: "cmd_strength_x"; value: $cmd_buffertime}
			mapSet{map: "cmd_strength_y"; value: 0}
			mapSet{map: "cmd_strength_z"; value: 0}
		}
		if $cmd_negativeedge {
			if $button_z = -1 {
				mapSet{map: "cmd_strength_x"; value: 0}
				mapSet{map: "cmd_strength_y"; value: 0}
				mapSet{map: "cmd_strength_z"; value: $cmd_buffertime}
			} else if $button_y = -1 {
				mapSet{map: "cmd_strength_x"; value: 0}
				mapSet{map: "cmd_strength_y"; value: $cmd_buffertime}
				mapSet{map: "cmd_strength_z"; value: 0}
			} else if $button_x = -1 {
				mapSet{map: "cmd_strength_x"; value: $cmd_buffertime}
				mapSet{map: "cmd_strength_y"; value: 0}
				mapSet{map: "cmd_strength_z"; value: 0}
			}
		}
	}


#==================================================================< SPECIAL MOVE INPUTS >=====================================================================

#--------------------------------------------------------------------------- 236 ------------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_236_OK"; value: 0}
		mapSet{map: "cmd_check_236_23"; value: 0}
		mapSet{map: "cmd_check_236_2"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_236kkk"; value: 0}
		mapSet{map: "cmd_236ppp"; value: 0}
		mapSet{map: "cmd_236kk"; value: 0}
		mapSet{map: "cmd_236pp"; value: 0}
		mapSet{map: "cmd_236k"; value: 0}
		mapSet{map: "cmd_236p"; value: 0}
		mapSet{map: "cmd_236s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_236_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_236_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_236_23) > 0 {mapAdd{map: "cmd_check_236_23"; value: -1}}
	if map(cmd_check_236_2) > 0 {mapAdd{map: "cmd_check_236_2"; value: -1}}
	if map(cmd_236kkk) > 0 {mapAdd{map: "cmd_236kkk"; value: -1}}
	if map(cmd_236ppp) > 0 {mapAdd{map: "cmd_236ppp"; value: -1}}
	if map(cmd_236kk) > 0 {mapAdd{map: "cmd_236kk"; value: -1}}
	if map(cmd_236pp) > 0 {mapAdd{map: "cmd_236pp"; value: -1}}
	if map(cmd_236k) > 0 {mapAdd{map: "cmd_236k"; value: -1}}
	if map(cmd_236p) > 0 {mapAdd{map: "cmd_236p"; value: -1}}
	if map(cmd_236s) > 0 {mapAdd{map: "cmd_236s"; value: -1}}

	# Check motion
	if map(cmd_check_236_23) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_check_236_OK"; value: 10}
		}
	}
	if map(cmd_check_236_2) > 0 {
		if ifelse($check_reversed, $direction_DB = 1, $direction_DF = 1) {
			mapSet{map: "cmd_check_236_23"; value: 10}
		}
	}
	if $direction_D > 0 {
		mapSet{map: "cmd_check_236_2"; value: 10}
	}

	# Put motion and buttons together
	if map(cmd_check_236_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_236kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_236ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_236kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_236pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_236k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_236p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_236s"; value: $cmd_buffertime}}
	}


#------------------------------------------------------------------------- ROOT 236 ---------------------------------------------------------------------------
# Directions don't flip

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_root236_OK"; value: 0}
		mapSet{map: "cmd_check_root236_23"; value: 0}
		mapSet{map: "cmd_check_root236_2"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_root236kkk"; value: 0}
		mapSet{map: "cmd_root236ppp"; value: 0}
		mapSet{map: "cmd_root236kk"; value: 0}
		mapSet{map: "cmd_root236pp"; value: 0}
		mapSet{map: "cmd_root236k"; value: 0}
		mapSet{map: "cmd_root236p"; value: 0}
		mapSet{map: "cmd_root236s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_root236_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_root236_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_root236_23) > 0 {mapAdd{map: "cmd_check_root236_23"; value: -1}}
	if map(cmd_check_root236_2) > 0 {mapAdd{map: "cmd_check_root236_2"; value: -1}}
	if map(cmd_root236kkk) > 0 {mapAdd{map: "cmd_root236kkk"; value: -1}}
	if map(cmd_root236ppp) > 0 {mapAdd{map: "cmd_root236ppp"; value: -1}}
	if map(cmd_root236kk) > 0 {mapAdd{map: "cmd_root236kk"; value: -1}}
	if map(cmd_root236pp) > 0 {mapAdd{map: "cmd_root236pp"; value: -1}}
	if map(cmd_root236k) > 0 {mapAdd{map: "cmd_root236k"; value: -1}}
	if map(cmd_root236p) > 0 {mapAdd{map: "cmd_root236p"; value: -1}}
	if map(cmd_root236s) > 0 {mapAdd{map: "cmd_root236s"; value: -1}}

	# Check motion
	if map(cmd_check_root236_23) > 0 {
		if $direction_F = 1 {
			mapSet{map: "cmd_check_root236_OK"; value: 10}
		}
	}
	if map(cmd_check_root236_2) > 0 {
		if $direction_DF = 1 {
			mapSet{map: "cmd_check_root236_23"; value: 10}
		}
	}
	if $direction_D > 0 {
		mapSet{map: "cmd_check_root236_2"; value: 10}
	}

	# Put motion and buttons together
	if map(cmd_check_root236_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_root236kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_root236ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_root236kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_root236pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_root236k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_root236p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_root236s"; value: $cmd_buffertime}}
	}


#--------------------------------------------------------------------------- 214 ------------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_214_OK"; value: 0}
		mapSet{map: "cmd_check_214_21"; value: 0}
		mapSet{map: "cmd_check_214_2"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_214kkk"; value: 0}
		mapSet{map: "cmd_214ppp"; value: 0}
		mapSet{map: "cmd_214kk"; value: 0}
		mapSet{map: "cmd_214pp"; value: 0}
		mapSet{map: "cmd_214k"; value: 0}
		mapSet{map: "cmd_214p"; value: 0}
		mapSet{map: "cmd_214s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_214_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_214_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_214_21) > 0 {mapAdd{map: "cmd_check_214_21"; value: -1}}
	if map(cmd_check_214_2) > 0 {mapAdd{map: "cmd_check_214_2"; value: -1}}
	if map(cmd_214kkk) > 0 {mapAdd{map: "cmd_214kkk"; value: -1}}
	if map(cmd_214ppp) > 0 {mapAdd{map: "cmd_214ppp"; value: -1}}
	if map(cmd_214kk) > 0 {mapAdd{map: "cmd_214kk"; value: -1}}
	if map(cmd_214pp) > 0 {mapAdd{map: "cmd_214pp"; value: -1}}
	if map(cmd_214k) > 0 {mapAdd{map: "cmd_214k"; value: -1}}
	if map(cmd_214p) > 0 {mapAdd{map: "cmd_214p"; value: -1}}
	if map(cmd_214s) > 0 {mapAdd{map: "cmd_214s"; value: -1}}

	# Check motion
	if map(cmd_check_214_21) > 0 {
		if ifelse($check_reversed, $direction_F = 1, $direction_B = 1) {
			mapSet{map: "cmd_check_214_OK"; value: 10}
		}
	}
	if map(cmd_check_214_2) > 0 {
		if ifelse($check_reversed, $direction_DF = 1, $direction_DB = 1) {
			mapSet{map: "cmd_check_214_21"; value: 10}
		}
	}
	if $direction_D > 0 {
		mapSet{map: "cmd_check_214_2"; value: 10}
	}

	# Put motion and buttons together
	if map(cmd_check_214_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_214kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_214ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_214kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_214pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_214k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_214p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_214s"; value: $cmd_buffertime}}
	}


#------------------------------------------------------------------------- ROOT 214 ---------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_root214_OK"; value: 0}
		mapSet{map: "cmd_check_root214_21"; value: 0}
		mapSet{map: "cmd_check_root214_2"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_root214kkk"; value: 0}
		mapSet{map: "cmd_root214ppp"; value: 0}
		mapSet{map: "cmd_root214kk"; value: 0}
		mapSet{map: "cmd_root214pp"; value: 0}
		mapSet{map: "cmd_root214k"; value: 0}
		mapSet{map: "cmd_root214p"; value: 0}
		mapSet{map: "cmd_root214s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_root214_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_root214_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_root214_21) > 0 {mapAdd{map: "cmd_check_root214_21"; value: -1}}
	if map(cmd_check_root214_2) > 0 {mapAdd{map: "cmd_check_root214_2"; value: -1}}
	if map(cmd_root214kkk) > 0 {mapAdd{map: "cmd_root214kkk"; value: -1}}
	if map(cmd_root214ppp) > 0 {mapAdd{map: "cmd_root214ppp"; value: -1}}
	if map(cmd_root214kk) > 0 {mapAdd{map: "cmd_root214kk"; value: -1}}
	if map(cmd_root214pp) > 0 {mapAdd{map: "cmd_root214pp"; value: -1}}
	if map(cmd_root214k) > 0 {mapAdd{map: "cmd_root214k"; value: -1}}
	if map(cmd_root214p) > 0 {mapAdd{map: "cmd_root214p"; value: -1}}
	if map(cmd_root214s) > 0 {mapAdd{map: "cmd_root214s"; value: -1}}

	# Check motion
	if map(cmd_check_root214_21) > 0 {
		if $direction_B = 1 {
			mapSet{map: "cmd_check_root214_OK"; value: 10}
		}
	}
	if map(cmd_check_root214_2) > 0 {
		if $direction_DB = 1 {
			mapSet{map: "cmd_check_root214_21"; value: 10}
		}
	}
	if $direction_D > 0 {
		mapSet{map: "cmd_check_root214_2"; value: 10}
	}

	# Put motion and buttons together
	if map(cmd_check_root214_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_root214kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_root214ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_root214kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_root214pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_root214k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_root214p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_root214s"; value: $cmd_buffertime}}
	}


#--------------------------------------------------------------------------- 623 ------------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_623_OK"; value: 0}
		mapSet{map: "cmd_check_623_62"; value: 0}
		mapSet{map: "cmd_check_623_6"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_623kkk"; value: 0}
		mapSet{map: "cmd_623ppp"; value: 0}
		mapSet{map: "cmd_623kk"; value: 0}
		mapSet{map: "cmd_623pp"; value: 0}
		mapSet{map: "cmd_623k"; value: 0}
		mapSet{map: "cmd_623p"; value: 0}
		mapSet{map: "cmd_623s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_623_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_623_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_623_62) > 0 {mapAdd{map: "cmd_check_623_62"; value: -1}}
	if map(cmd_check_623_6) > 0 {mapAdd{map: "cmd_check_623_6"; value: -1}}
	if map(cmd_623kkk) > 0 {mapAdd{map: "cmd_623kkk"; value: -1}}
	if map(cmd_623ppp) > 0 {mapAdd{map: "cmd_623ppp"; value: -1}}
	if map(cmd_623kk) > 0 {mapAdd{map: "cmd_623kk"; value: -1}}
	if map(cmd_623pp) > 0 {mapAdd{map: "cmd_623pp"; value: -1}}
	if map(cmd_623k) > 0 {mapAdd{map: "cmd_623k"; value: -1}}
	if map(cmd_623p) > 0 {mapAdd{map: "cmd_623p"; value: -1}}
	if map(cmd_623s) > 0 {mapAdd{map: "cmd_623s"; value: -1}}

	# Check motion
	if map(cmd_check_623_62) > 0 {
		if ifelse($check_reversed, $direction_any_B = 1, $direction_any_F = 1) {
			mapSet{map: "cmd_check_623_OK"; value: 10}
		}
	}
	if map(cmd_check_623_6) > 0 {
		if $direction_D = 1 {
			mapSet{map: "cmd_check_623_62"; value: 10}
		}
	}
	if ifelse($check_reversed, $direction_B > 0, $direction_F > 0) {
		mapSet{map: "cmd_check_623_6"; value: 10}
	}

	# Put motion and buttons together
	if map(cmd_check_623_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_623kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_623ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_623kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_623pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_623k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_623p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_623s"; value: $cmd_buffertime}}
	}


#--------------------------------------------------------------------------- 421 ------------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_421_OK"; value: 0}
		mapSet{map: "cmd_check_421_42"; value: 0}
		mapSet{map: "cmd_check_421_4"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_421kkk"; value: 0}
		mapSet{map: "cmd_421ppp"; value: 0}
		mapSet{map: "cmd_421kk"; value: 0}
		mapSet{map: "cmd_421pp"; value: 0}
		mapSet{map: "cmd_421k"; value: 0}
		mapSet{map: "cmd_421p"; value: 0}
		mapSet{map: "cmd_421s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_421_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_421_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_421_42) > 0 {mapAdd{map: "cmd_check_421_42"; value: -1}}
	if map(cmd_check_421_4) > 0 {mapAdd{map: "cmd_check_421_4"; value: -1}}
	if map(cmd_421kkk) > 0 {mapAdd{map: "cmd_421kkk"; value: -1}}
	if map(cmd_421ppp) > 0 {mapAdd{map: "cmd_421ppp"; value: -1}}
	if map(cmd_421kk) > 0 {mapAdd{map: "cmd_421kk"; value: -1}}
	if map(cmd_421pp) > 0 {mapAdd{map: "cmd_421pp"; value: -1}}
	if map(cmd_421k) > 0 {mapAdd{map: "cmd_421k"; value: -1}}
	if map(cmd_421p) > 0 {mapAdd{map: "cmd_421p"; value: -1}}
	if map(cmd_421s) > 0 {mapAdd{map: "cmd_421s"; value: -1}}

	# Check motion
	if map(cmd_check_421_42) > 0 {
		if ifelse($check_reversed, $direction_any_F = 1, $direction_any_B = 1) {
			mapSet{map: "cmd_check_421_OK"; value: 10}
		}
	}
	if map(cmd_check_421_4) > 0 {
		if $direction_D = 1 {
			mapSet{map: "cmd_check_421_42"; value: 10}
		}
	}
	if ifelse($check_reversed, $direction_F > 0, $direction_B > 0) {
		mapSet{map: "cmd_check_421_4"; value: 10}
	}

	# Put motion and buttons together
	if map(cmd_check_421_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_421kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_421ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_421kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_421pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_421k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_421p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_421s"; value: $cmd_buffertime}}
	}


#-------------------------------------------------------------------------- 41236 -----------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_41236_OK"; value: 0}
		mapSet{map: "cmd_check_41236_412"; value: 0}
		mapSet{map: "cmd_check_41236_4"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_41236kkk"; value: 0}
		mapSet{map: "cmd_41236ppp"; value: 0}
		mapSet{map: "cmd_41236kk"; value: 0}
		mapSet{map: "cmd_41236pp"; value: 0}
		mapSet{map: "cmd_41236k"; value: 0}
		mapSet{map: "cmd_41236p"; value: 0}
		mapSet{map: "cmd_41236s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_41236_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_41236_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_41236_412) > 0 {mapAdd{map: "cmd_check_41236_412"; value: -1}}
	if map(cmd_check_41236_4) > 0 {mapAdd{map: "cmd_check_41236_4"; value: -1}}
	if map(cmd_41236kkk) > 0 {mapAdd{map: "cmd_41236kkk"; value: -1}}
	if map(cmd_41236ppp) > 0 {mapAdd{map: "cmd_41236ppp"; value: -1}}
	if map(cmd_41236kk) > 0 {mapAdd{map: "cmd_41236kk"; value: -1}}
	if map(cmd_41236pp) > 0 {mapAdd{map: "cmd_41236pp"; value: -1}}
	if map(cmd_41236k) > 0 {mapAdd{map: "cmd_41236k"; value: -1}}
	if map(cmd_41236p) > 0 {mapAdd{map: "cmd_41236p"; value: -1}}
	if map(cmd_41236s) > 0 {mapAdd{map: "cmd_41236s"; value: -1}}

	# Check motion
	if map(cmd_check_41236_412) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_check_41236_OK"; value: 10}
		}
	}
	if map(cmd_check_41236_4) > 0 {
		if $direction_any_D = 1 {
			mapSet{map: "cmd_check_41236_412"; value: 10}
		}
	}
	if ifelse($check_reversed, $direction_F > 0, $direction_B > 0) {
		mapSet{map: "cmd_check_41236_4"; value: 10}
	}

	# Put motion and buttons together
	if map(cmd_check_41236_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_41236kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_41236ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_41236kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_41236pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_41236k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_41236p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_41236s"; value: $cmd_buffertime}}
	}


#------------------------------------------------------------------------ ROOT 41236 --------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_root41236_OK"; value: 0}
		mapSet{map: "cmd_check_root41236_412"; value: 0}
		mapSet{map: "cmd_check_root41236_4"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_root41236kkk"; value: 0}
		mapSet{map: "cmd_root41236ppp"; value: 0}
		mapSet{map: "cmd_root41236kk"; value: 0}
		mapSet{map: "cmd_root41236pp"; value: 0}
		mapSet{map: "cmd_root41236k"; value: 0}
		mapSet{map: "cmd_root41236p"; value: 0}
		mapSet{map: "cmd_root41236s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_root41236_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_root41236_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_root41236_412) > 0 {mapAdd{map: "cmd_check_root41236_412"; value: -1}}
	if map(cmd_check_root41236_4) > 0 {mapAdd{map: "cmd_check_root41236_4"; value: -1}}
	if map(cmd_root41236kkk) > 0 {mapAdd{map: "cmd_root41236kkk"; value: -1}}
	if map(cmd_root41236ppp) > 0 {mapAdd{map: "cmd_root41236ppp"; value: -1}}
	if map(cmd_root41236kk) > 0 {mapAdd{map: "cmd_root41236kk"; value: -1}}
	if map(cmd_root41236pp) > 0 {mapAdd{map: "cmd_root41236pp"; value: -1}}
	if map(cmd_root41236k) > 0 {mapAdd{map: "cmd_root41236k"; value: -1}}
	if map(cmd_root41236p) > 0 {mapAdd{map: "cmd_root41236p"; value: -1}}
	if map(cmd_root41236s) > 0 {mapAdd{map: "cmd_root41236s"; value: -1}}

	# Check motion
	if map(cmd_check_root41236_412) > 0 {
		if $direction_F = 1 {
			mapSet{map: "cmd_check_root41236_OK"; value: 10}
		}
	}
	if map(cmd_check_root41236_4) > 0 {
		if $direction_any_D = 1 {
			mapSet{map: "cmd_check_root41236_412"; value: 10}
		}
	}
	if $direction_B > 0 {
		mapSet{map: "cmd_check_root41236_4"; value: 10}
	}

	# Put motion and buttons together
	if map(cmd_check_root41236_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_root41236kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_root41236ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_root41236kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_root41236pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_root41236k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_root41236p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_root41236s"; value: $cmd_buffertime}}
	}


#-------------------------------------------------------------------------- 63214 -----------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_63214_OK"; value: 0}
		mapSet{map: "cmd_check_63214_632"; value: 0}
		mapSet{map: "cmd_check_63214_6"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_63214kkk"; value: 0}
		mapSet{map: "cmd_63214ppp"; value: 0}
		mapSet{map: "cmd_63214kk"; value: 0}
		mapSet{map: "cmd_63214pp"; value: 0}
		mapSet{map: "cmd_63214k"; value: 0}
		mapSet{map: "cmd_63214p"; value: 0}
		mapSet{map: "cmd_63214s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_63214_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_63214_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_63214_632) > 0 {mapAdd{map: "cmd_check_63214_632"; value: -1}}
	if map(cmd_check_63214_6) > 0 {mapAdd{map: "cmd_check_63214_6"; value: -1}}
	if map(cmd_63214kkk) > 0 {mapAdd{map: "cmd_63214kkk"; value: -1}}
	if map(cmd_63214ppp) > 0 {mapAdd{map: "cmd_63214ppp"; value: -1}}
	if map(cmd_63214kk) > 0 {mapAdd{map: "cmd_63214kk"; value: -1}}
	if map(cmd_63214pp) > 0 {mapAdd{map: "cmd_63214pp"; value: -1}}
	if map(cmd_63214k) > 0 {mapAdd{map: "cmd_63214k"; value: -1}}
	if map(cmd_63214p) > 0 {mapAdd{map: "cmd_63214p"; value: -1}}
	if map(cmd_63214s) > 0 {mapAdd{map: "cmd_63214s"; value: -1}}

	# Check motion
	if map(cmd_check_63214_632) > 0 {
		if ifelse($check_reversed, $direction_F = 1, $direction_B = 1) {
			mapSet{map: "cmd_check_63214_OK"; value: 10}
		}
	}
	if map(cmd_check_63214_6) > 0 {
		if $direction_any_D = 1 {
			mapSet{map: "cmd_check_63214_632"; value: 10}
		}
	}
	if ifelse($check_reversed, $direction_B > 0, $direction_F > 0) {
		mapSet{map: "cmd_check_63214_6"; value: 10}
	}

	# Put motion and buttons together
	if map(cmd_check_63214_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_63214kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_63214ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_63214kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_63214pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_63214k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_63214p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_63214s"; value: $cmd_buffertime}}
	}


#------------------------------------------------------------------------ ROOT 63214 --------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_root63214_OK"; value: 0}
		mapSet{map: "cmd_check_root63214_632"; value: 0}
		mapSet{map: "cmd_check_root63214_4"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_root63214kkk"; value: 0}
		mapSet{map: "cmd_root63214ppp"; value: 0}
		mapSet{map: "cmd_root63214kk"; value: 0}
		mapSet{map: "cmd_root63214pp"; value: 0}
		mapSet{map: "cmd_root63214k"; value: 0}
		mapSet{map: "cmd_root63214p"; value: 0}
		mapSet{map: "cmd_root63214s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_root63214_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_root63214_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_root63214_632) > 0 {mapAdd{map: "cmd_check_root63214_632"; value: -1}}
	if map(cmd_check_root63214_6) > 0 {mapAdd{map: "cmd_check_root63214_6"; value: -1}}
	if map(cmd_root63214kkk) > 0 {mapAdd{map: "cmd_root63214kkk"; value: -1}}
	if map(cmd_root63214ppp) > 0 {mapAdd{map: "cmd_root63214ppp"; value: -1}}
	if map(cmd_root63214kk) > 0 {mapAdd{map: "cmd_root63214kk"; value: -1}}
	if map(cmd_root63214pp) > 0 {mapAdd{map: "cmd_root63214pp"; value: -1}}
	if map(cmd_root63214k) > 0 {mapAdd{map: "cmd_root63214k"; value: -1}}
	if map(cmd_root63214p) > 0 {mapAdd{map: "cmd_root63214p"; value: -1}}
	if map(cmd_root63214s) > 0 {mapAdd{map: "cmd_root63214s"; value: -1}}

	# Check motion
	if map(cmd_check_root63214_632) > 0 {
		if $direction_B = 1 {
			mapSet{map: "cmd_check_root63214_OK"; value: 10}
		}
	}
	if map(cmd_check_root63214_6) > 0 {
		if $direction_any_D = 1 {
			mapSet{map: "cmd_check_root63214_632"; value: 10}
		}
	}
	if $direction_F > 0 {
		mapSet{map: "cmd_check_root63214_6"; value: 10}
	}

	# Put motion and buttons together
	if map(cmd_check_root63214_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_root63214kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_root63214ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_root63214kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_root63214pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_root63214k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_root63214p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_root63214s"; value: $cmd_buffertime}}
	}


#---------------------------------------------------------------------------- 22 ------------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_22_OK"; value: 0}
		mapSet{map: "cmd_check_22_525"; value: 0}
		mapSet{map: "cmd_check_22_52"; value: 0}
		mapSet{map: "cmd_check_22_5"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_22kkk"; value: 0}
		mapSet{map: "cmd_22ppp"; value: 0}
		mapSet{map: "cmd_22kk"; value: 0}
		mapSet{map: "cmd_22pp"; value: 0}
		mapSet{map: "cmd_22k"; value: 0}
		mapSet{map: "cmd_22p"; value: 0}
		mapSet{map: "cmd_22s"; value: 0}
	}

	# Cancel  input if player intention is a different motion
	if $direction_any_U > 0 {
		mapSet{map: "cmd_check_22_525"; value: 0}
		mapSet{map: "cmd_check_22_52"; value: 0}
		mapSet{map: "cmd_check_22_5"; value: 0}
	}
	if $direction_any_B > 0 || $direction_any_F > 0 {
		if map(cmd_check_22_525) = [1, 10] {
			mapSet{map: "cmd_check_66_565"; value: 0}
		}
		if map(cmd_check_22_52) = [1, 10] {
			mapSet{map: "cmd_check_66_56"; value: 0}
		}
		if map(cmd_check_22_5) = [1, 10] {
			mapSet{map: "cmd_check_66_5"; value: 0}
		}
	}

	# Decrease timers
	if map(cmd_check_22_OK) > 0 {mapAdd{map: "cmd_check_22_OK"; value: -1}}
	if map(cmd_check_22_525) > 0 {mapAdd{map: "cmd_check_22_525"; value: -1}}
	if map(cmd_check_22_52) > 0 {mapAdd{map: "cmd_check_22_52"; value: -1}}
	if map(cmd_check_22_5) > 0 {mapAdd{map: "cmd_check_22_5"; value: -1}}
	if map(cmd_22kkk) > 0 {mapAdd{map: "cmd_22kkk"; value: -1}}
	if map(cmd_22ppp) > 0 {mapAdd{map: "cmd_22ppp"; value: -1}}
	if map(cmd_22kk) > 0 {mapAdd{map: "cmd_22kk"; value: -1}}
	if map(cmd_22pp) > 0 {mapAdd{map: "cmd_22pp"; value: -1}}
	if map(cmd_22k) > 0 {mapAdd{map: "cmd_22k"; value: -1}}
	if map(cmd_22p) > 0 {mapAdd{map: "cmd_22p"; value: -1}}
	if map(cmd_22s) > 0 {mapAdd{map: "cmd_22s"; value: -1}}

	# Check motion
	if map(cmd_check_22_525) > 0 {
		if $direction_any_D = 1 {
			mapSet{map: "cmd_check_22_OK"; value: 10}
		}
	}
	if map(cmd_check_22_52) > 0 {
		if $direction_any_D < 0 {
			mapSet{map: "cmd_check_22_525"; value: map(cmd_check_22_52)} # Neutral does not reset timer
		}
	}
	if map(cmd_check_22_5) > 0 {
		if $direction_any_D = 1 {
			mapSet{map: "cmd_check_22_52"; value: 15}
		}
	}
	if $direction_any_D < 0 {
		mapSet{map: "cmd_check_22_5"; value: 15}
	}

	# Put motion and buttons together
	if map(cmd_check_22_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_22kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_22ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_22kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_22pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_22k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_22p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_22s"; value: $cmd_buffertime}}
	}


#------------------------------------------------------------------------- ROOT 896 ---------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_root896_OK"; value: 0}
		mapSet{map: "cmd_check_root896_89"; value: 0}
		mapSet{map: "cmd_check_root896_8"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_root896kkk"; value: 0}
		mapSet{map: "cmd_root896ppp"; value: 0}
		mapSet{map: "cmd_root896kk"; value: 0}
		mapSet{map: "cmd_root896pp"; value: 0}
		mapSet{map: "cmd_root896k"; value: 0}
		mapSet{map: "cmd_root896p"; value: 0}
		mapSet{map: "cmd_root896s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_root896_OK) > 0 {mapAdd{map: "cmd_check_root896_OK"; value: -1}}
	if map(cmd_check_root896_89) > 0 {mapAdd{map: "cmd_check_root896_89"; value: -1}}
	if map(cmd_check_root896_8) > 0 {mapAdd{map: "cmd_check_root896_8"; value: -1}}
	if map(cmd_root896kkk) > 0 {mapAdd{map: "cmd_root896kkk"; value: -1}}
	if map(cmd_root896ppp) > 0 {mapAdd{map: "cmd_root896ppp"; value: -1}}
	if map(cmd_root896kk) > 0 {mapAdd{map: "cmd_root896kk"; value: -1}}
	if map(cmd_root896pp) > 0 {mapAdd{map: "cmd_root896pp"; value: -1}}
	if map(cmd_root896k) > 0 {mapAdd{map: "cmd_root896k"; value: -1}}
	if map(cmd_root896p) > 0 {mapAdd{map: "cmd_root896p"; value: -1}}
	if map(cmd_root896s) > 0 {mapAdd{map: "cmd_root896s"; value: -1}}

	# Check motion
	if map(cmd_check_root896_89) > 0 {
		if $direction_F = 1 {
			mapSet{map: "cmd_check_root896_OK"; value: 10}
		}
	}
	if map(cmd_check_root896_8) > 0 {
		if $direction_UF = 1 {
			mapSet{map: "cmd_check_root896_89"; value: 10}
		}
	}
	if $direction_U > 0 {
		mapSet{map: "cmd_check_root896_8"; value: 10}
	}

	# Put motion and buttons together
	if map(cmd_check_root896_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_root896kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_root896ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_root896kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_root896pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_root896k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_root896p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_root896s"; value: $cmd_buffertime}}
	}


#---------------------------------------------------------------------------- 46 ------------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_46_OK"; value: 0}
		mapSet{map: "cmd_check_46_4"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_46kkk"; value: 0}
		mapSet{map: "cmd_46ppp"; value: 0}
		mapSet{map: "cmd_46kk"; value: 0}
		mapSet{map: "cmd_46pp"; value: 0}
		mapSet{map: "cmd_46k"; value: 0}
		mapSet{map: "cmd_46p"; value: 0}
		mapSet{map: "cmd_46s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_46_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_46_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_46_4) > 0 {mapAdd{map: "cmd_check_46_4"; value: -1}}
	if map(cmd_46kkk) > 0 {mapAdd{map: "cmd_46kkk"; value: -1}}
	if map(cmd_46ppp) > 0 {mapAdd{map: "cmd_46ppp"; value: -1}}
	if map(cmd_46kk) > 0 {mapAdd{map: "cmd_46kk"; value: -1}}
	if map(cmd_46pp) > 0 {mapAdd{map: "cmd_46pp"; value: -1}}
	if map(cmd_46k) > 0 {mapAdd{map: "cmd_46k"; value: -1}}
	if map(cmd_46p) > 0 {mapAdd{map: "cmd_46p"; value: -1}}
	if map(cmd_46s) > 0 {mapAdd{map: "cmd_46s"; value: -1}}

	# Check motion
	if map(cmd_check_46_4) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_check_46_OK"; value: 10}
		}
	}
	if map(cmd_charge4) >= 45 {
		if ifelse($check_reversed, $direction_any_F > 0, $direction_any_B > 0) {
			mapSet{map: "cmd_check_46_4"; value: 10}
		}
	}

	# Put motion and buttons together
	if map(cmd_check_46_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_46kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_46ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_46kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_46pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_46k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_46p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_46s"; value: $cmd_buffertime}}
	}


#---------------------------------------------------------------------------- 28 ------------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_28_OK"; value: 0}
		mapSet{map: "cmd_check_28_2"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_28kkk"; value: 0}
		mapSet{map: "cmd_28ppp"; value: 0}
		mapSet{map: "cmd_28kk"; value: 0}
		mapSet{map: "cmd_28pp"; value: 0}
		mapSet{map: "cmd_28k"; value: 0}
		mapSet{map: "cmd_28p"; value: 0}
		mapSet{map: "cmd_28s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_28_OK) > 0 {mapAdd{map: "cmd_check_28_OK"; value: -1}}
	if map(cmd_check_28_2) > 0 {mapAdd{map: "cmd_check_28_2"; value: -1}}
	if map(cmd_28kkk) > 0 {mapAdd{map: "cmd_28kkk"; value: -1}}
	if map(cmd_28ppp) > 0 {mapAdd{map: "cmd_28ppp"; value: -1}}
	if map(cmd_28kk) > 0 {mapAdd{map: "cmd_28kk"; value: -1}}
	if map(cmd_28pp) > 0 {mapAdd{map: "cmd_28pp"; value: -1}}
	if map(cmd_28k) > 0 {mapAdd{map: "cmd_28k"; value: -1}}
	if map(cmd_28p) > 0 {mapAdd{map: "cmd_28p"; value: -1}}
	if map(cmd_28s) > 0 {mapAdd{map: "cmd_28s"; value: -1}}

	# Check motion
	if map(cmd_check_28_2) > 0 {
		if $direction_any_U = 1 {
			mapSet{map: "cmd_check_28_OK"; value: 10}
		}
	}
	if map(cmd_charge2) >= 45 {
		if $direction_any_D > 0 {
			mapSet{map: "cmd_check_28_2"; value: 10}
		}
	}

	# Put motion and buttons together
	if map(cmd_check_28_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_28kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_28ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_28kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_28pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_28k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_28p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_28s"; value: $cmd_buffertime}}
	}


#--------------------------------------------------------------------------- 360 ------------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_360_OK"; value: 0}
		mapSet{map: "cmd_check_360_248"; value: 0}
		mapSet{map: "cmd_check_360_24"; value: 0}
		mapSet{map: "cmd_check_360_2"; value: 0}
		mapSet{map: "cmd_check_360_486"; value: 0}
		mapSet{map: "cmd_check_360_48"; value: 0}
		mapSet{map: "cmd_check_360_4"; value: 0}
		mapSet{map: "cmd_check_360_862"; value: 0}
		mapSet{map: "cmd_check_360_86"; value: 0}
		mapSet{map: "cmd_check_360_8"; value: 0}
		mapSet{map: "cmd_check_360_624"; value: 0}
		mapSet{map: "cmd_check_360_62"; value: 0}
		mapSet{map: "cmd_check_360_6"; value: 0}
		mapSet{map: "cmd_check_360_268"; value: 0}
		mapSet{map: "cmd_check_360_26"; value: 0}
		mapSet{map: "cmd_check_360_2"; value: 0}
		mapSet{map: "cmd_check_360_684"; value: 0}
		mapSet{map: "cmd_check_360_68"; value: 0}
		mapSet{map: "cmd_check_360_6"; value: 0}
		mapSet{map: "cmd_check_360_842"; value: 0}
		mapSet{map: "cmd_check_360_84"; value: 0}
		mapSet{map: "cmd_check_360_8"; value: 0}
		mapSet{map: "cmd_check_360_426"; value: 0}
		mapSet{map: "cmd_check_360_42"; value: 0}
		mapSet{map: "cmd_check_360_4"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_360kkk"; value: 0}
		mapSet{map: "cmd_360ppp"; value: 0}
		mapSet{map: "cmd_360kk"; value: 0}
		mapSet{map: "cmd_360pp"; value: 0}
		mapSet{map: "cmd_360k"; value: 0}
		mapSet{map: "cmd_360p"; value: 0}
		mapSet{map: "cmd_360s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_360_OK) > 0 {mapAdd{map: "cmd_check_360_OK"; value: -1}}
	if map(cmd_check_360_248) > 0 {mapAdd{map: "cmd_check_360_248"; value: -1}}
	if map(cmd_check_360_24) > 0 {mapAdd{map: "cmd_check_360_24"; value: -1}}
	if map(cmd_check_360_2) > 0 {mapAdd{map: "cmd_check_360_2"; value: -1}}
	if map(cmd_check_360_486) > 0 {mapAdd{map: "cmd_check_360_486"; value: -1}}
	if map(cmd_check_360_48) > 0 {mapAdd{map: "cmd_check_360_48"; value: -1}}
	if map(cmd_check_360_4) > 0 {mapAdd{map: "cmd_check_360_4"; value: -1}}
	if map(cmd_check_360_862) > 0 {mapAdd{map: "cmd_check_360_862"; value: -1}}
	if map(cmd_check_360_86) > 0 {mapAdd{map: "cmd_check_360_86"; value: -1}}
	if map(cmd_check_360_8) > 0 {mapAdd{map: "cmd_check_360_8"; value: -1}}
	if map(cmd_check_360_624) > 0 {mapAdd{map: "cmd_check_360_624"; value: -1}}
	if map(cmd_check_360_62) > 0 {mapAdd{map: "cmd_check_360_62"; value: -1}}
	if map(cmd_check_360_6) > 0 {mapAdd{map: "cmd_check_360_6"; value: -1}}
	if map(cmd_check_360_268) > 0 {mapAdd{map: "cmd_check_360_268"; value: -1}}
	if map(cmd_check_360_26) > 0 {mapAdd{map: "cmd_check_360_26"; value: -1}}
	if map(cmd_check_360_2) > 0 {mapAdd{map: "cmd_check_360_2"; value: -1}}
	if map(cmd_check_360_684) > 0 {mapAdd{map: "cmd_check_360_684"; value: -1}}
	if map(cmd_check_360_68) > 0 {mapAdd{map: "cmd_check_360_68"; value: -1}}
	if map(cmd_check_360_6) > 0 {mapAdd{map: "cmd_check_360_6"; value: -1}}
	if map(cmd_check_360_842) > 0 {mapAdd{map: "cmd_check_360_842"; value: -1}}
	if map(cmd_check_360_84) > 0 {mapAdd{map: "cmd_check_360_84"; value: -1}}
	if map(cmd_check_360_8) > 0 {mapAdd{map: "cmd_check_360_8"; value: -1}}
	if map(cmd_check_360_426) > 0 {mapAdd{map: "cmd_check_360_426"; value: -1}}
	if map(cmd_check_360_42) > 0 {mapAdd{map: "cmd_check_360_42"; value: -1}}
	if map(cmd_check_360_4) > 0 {mapAdd{map: "cmd_check_360_4"; value: -1}}

	if map(cmd_360kkk) > 0 {mapAdd{map: "cmd_360kkk"; value: -1}}
	if map(cmd_360ppp) > 0 {mapAdd{map: "cmd_360ppp"; value: -1}}
	if map(cmd_360kk) > 0 {mapAdd{map: "cmd_360kk"; value: -1}}
	if map(cmd_360pp) > 0 {mapAdd{map: "cmd_360pp"; value: -1}}
	if map(cmd_360k) > 0 {mapAdd{map: "cmd_360k"; value: -1}}
	if map(cmd_360p) > 0 {mapAdd{map: "cmd_360p"; value: -1}}
	if map(cmd_360s) > 0 {mapAdd{map: "cmd_360s"; value: -1}}

	#2486
	#4862
	#8624
	#6248

	#2684
	#6842
	#8426
	#4268

	# Check motion
	if $direction_any_D = 1 {
		mapSet{map: "check:360_2"; value: 10}
		if map(cmd_check_360_486) > 0 {mapSet{map: "cmd_check_360_OK"; value: 10}}
		if map(cmd_check_360_86) > 0 {mapSet{map: "cmd_check_360_862"; value: 10}}
		if map(cmd_check_360_6) > 0 {mapSet{map: "cmd_check_360_62"; value: 10}}
		if map(cmd_check_360_684) > 0 {mapSet{map: "cmd_check_360_OK"; value: 10}}
		if map(cmd_check_360_84) > 0 {mapSet{map: "cmd_check_360_842"; value: 10}}
		if map(cmd_check_360_4) > 0 {mapSet{map: "cmd_check_360_42"; value: 10}}
	}
	if ifelse(facing < 0, $direction_any_F = 1, $direction_any_B = 1) {
		mapSet{map: "cmd_check_360_4"; value: 10}
		if map(cmd_check_360_2) > 0 {mapSet{map: "cmd_check_360_24"; value: 10}}
		if map(cmd_check_360_862) > 0 {mapSet{map: "cmd_check_360_OK"; value: 10}}
		if map(cmd_check_360_62) > 0 {mapSet{map: "cmd_check_360_624"; value: 10}}
		if map(cmd_check_360_268) > 0 {mapSet{map: "cmd_check_360_OK"; value: 10}}
		if map(cmd_check_360_68) > 0 {mapSet{map: "cmd_check_360_684"; value: 10}}
		if map(cmd_check_360_8) > 0 {mapSet{map: "cmd_check_360_84"; value: 10}}
	}
	if $direction_any_U = 1 {
		mapSet{map: "cmd_check_360_8"; value: 10}
		if map(cmd_check_360_24) > 0 {mapSet{map: "cmd_check_360_248"; value: 10}}
		if map(cmd_check_360_4) > 0 {mapSet{map: "cmd_check_360_48"; value: 10}}
		if map(cmd_check_360_624) > 0 {mapSet{map: "cmd_check_360_OK"; value: 10}}
		if map(cmd_check_360_26) > 0 {mapSet{map: "cmd_check_360_268"; value: 10}}
		if map(cmd_check_360_6) > 0 {mapSet{map: "cmd_check_360_68"; value: 10}}
		if map(cmd_check_360_426) > 0 {mapSet{map: "cmd_check_360_OK"; value: 10}}
	}
	if ifelse(facing < 0, $direction_any_B = 1, $direction_any_F = 1) {
		mapSet{map: "cmd_check_360_6"; value: 10}
		if map(cmd_check_360_248) > 0 {mapSet{map: "cmd_check_360_OK"; value: 10}}
		if map(cmd_check_360_48) > 0 {mapSet{map: "cmd_check_360_486"; value: 10}}
		if map(cmd_check_360_8) > 0 {mapSet{map: "cmd_check_360_86"; value: 10}}
		if map(cmd_check_360_2) > 0 {mapSet{map: "cmd_check_360_26"; value: 10}}
		if map(cmd_check_360_842) > 0 {mapSet{map: "cmd_check_360_OK"; value: 10}}
		if map(cmd_check_360_42) > 0 {mapSet{map: "cmd_check_360_426"; value: 10}}
	}

	# Put motion and buttons together
	if map(cmd_check_360_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_360kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_360ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_360kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_360pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_360k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_360p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_360s"; value: $cmd_buffertime}}
	}


#----------------------------------------------------------------------- MASH PUNCHES -------------------------------------------------------------------------

	# Erase inputs
	# Unaffected by cmd_erase_completed
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_mashp_timer"; value: 0}
		mapSet{map: "cmd_check_mashp_counter"; value: 0}
		mapSet{map: "cmd_mashp"; value: 0}
		mapSet{map: "cmd_mashpp"; value: 0}
	}

	# Input stopped
	if map(cmd_check_mashp_counter) > 0 {
		if map(cmd_check_mashp_timer) <= 0 {mapSet{map: "cmd_check_mashp_counter"; value: 0}}
	}

	# Decrease timers
	if map(cmd_mashp) > 0 {mapAdd{map: "cmd_mashp"; value: -1}}
	if map(cmd_mashpp) > 0 {mapAdd{map: "cmd_mashpp"; value: -1}}
	if map(cmd_check_mashp_timer) > 0 {mapAdd{map: "cmd_check_mashp_timer"; value: -1}}

	# Set timers
	if $button_x = 1 {
		mapSet{map: "cmd_check_mashp_timer"; value: 18}
	}
	if $button_y = 1 {
		mapSet{map: "cmd_check_mashp_timer"; value: 15}
	}
	if $button_z = 1 {
		mapSet{map: "cmd_check_mashp_timer"; value: 12}
	}
	if $check_pp {
		mapSet{map: "cmd_check_mashp_timer"; value: 15}
	}

	# Increase only by 1, even if more than one button is pressed
	if $button_x = 1 || $button_y = 1 || $button_z = 1 {
		mapAdd{map: "cmd_check_mashp_counter"; value: 1}
	}

	# 4 inputs detected
	if map(cmd_check_mashp_counter) >= 4 {
		if $check_p {mapSet{map: "cmd_mashp"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_mashpp"; value: $cmd_buffertime}}
	}


#--------------------------------------------------------------------------- 412 ------------------------------------------------------------------------------
# Nakoruru

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_412_OK"; value: 0}
		mapSet{map: "cmd_check_412_41"; value: 0}
		mapSet{map: "cmd_check_412_4"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_412kkk"; value: 0}
		mapSet{map: "cmd_412ppp"; value: 0}
		mapSet{map: "cmd_412kk"; value: 0}
		mapSet{map: "cmd_412pp"; value: 0}
		mapSet{map: "cmd_412k"; value: 0}
		mapSet{map: "cmd_412p"; value: 0}
		mapSet{map: "cmd_412s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_412_OK) > 0 {mapAdd{map: "cmd_check_412_OK"; value: -1}}
	if map(cmd_check_412_41) > 0 {mapAdd{map: "cmd_check_412_41"; value: -1}}
	if map(cmd_check_412_4) > 0 {mapAdd{map: "cmd_check_412_4"; value: -1}}
	if map(cmd_412kkk) > 0 {mapAdd{map: "cmd_412kkk"; value: -1}}
	if map(cmd_412ppp) > 0 {mapAdd{map: "cmd_412ppp"; value: -1}}
	if map(cmd_412kk) > 0 {mapAdd{map: "cmd_412kk"; value: -1}}
	if map(cmd_412pp) > 0 {mapAdd{map: "cmd_412pp"; value: -1}}
	if map(cmd_412k) > 0 {mapAdd{map: "cmd_412k"; value: -1}}
	if map(cmd_412p) > 0 {mapAdd{map: "cmd_412p"; value: -1}}
	if map(cmd_412s) > 0 {mapAdd{map: "cmd_412s"; value: -1}}

	# Check motion
	if map(cmd_check_412_41) > 0 {
		if $direction_D = 1 {
			mapSet{map: "cmd_check_412_OK"; value: 10}
		}
	}
	if map(cmd_check_412_4) > 0 {
		if ifelse($check_reversed, $direction_DF = 1, $direction_DB = 1) {
			mapSet{map: "cmd_check_412_41"; value: 10}
		}
	}
	if ifelse($check_reversed, $direction_F > 0, $direction_B > 0) {
		mapSet{map: "cmd_check_412_4"; value: 10}
	}

	# Put motion and buttons together
	if map(cmd_check_412_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_412kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_412ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_412kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_412pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_412k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_412p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_412s"; value: $cmd_buffertime}}
	}


#--------------------------------------------------------------------------- 4632 -----------------------------------------------------------------------------
# Nakoruru suicide

	# Erase inputs
	if map(cmd_erase_motion_special) || map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_4632_OK"; value: 0}
		mapSet{map: "cmd_check_4632_46"; value: 0}
		mapSet{map: "cmd_check_4632_4"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_4632kkk"; value: 0}
		mapSet{map: "cmd_4632ppp"; value: 0}
		mapSet{map: "cmd_4632kk"; value: 0}
		mapSet{map: "cmd_4632pp"; value: 0}
		mapSet{map: "cmd_4632k"; value: 0}
		mapSet{map: "cmd_4632p"; value: 0}
		mapSet{map: "cmd_4632s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_4632_OK) > 0 {mapAdd{map: "cmd_check_4632_OK"; value: -1}}
	if map(cmd_check_4632_46) > 0 {mapAdd{map: "cmd_check_4632_46"; value: -1}}
	if map(cmd_check_4632_4) > 0 {mapAdd{map: "cmd_check_4632_4"; value: -1}}
	if map(cmd_4632kkk) > 0 {mapAdd{map: "cmd_4632kkk"; value: -1}}
	if map(cmd_4632ppp) > 0 {mapAdd{map: "cmd_4632ppp"; value: -1}}
	if map(cmd_4632kk) > 0 {mapAdd{map: "cmd_4632kk"; value: -1}}
	if map(cmd_4632pp) > 0 {mapAdd{map: "cmd_4632pp"; value: -1}}
	if map(cmd_4632k) > 0 {mapAdd{map: "cmd_4632k"; value: -1}}
	if map(cmd_4632p) > 0 {mapAdd{map: "cmd_4632p"; value: -1}}
	if map(cmd_4632s) > 0 {mapAdd{map: "cmd_4632s"; value: -1}}

	# Check motion
	if map(cmd_check_4632_46) > 0 {
		if $direction_D = 1 {
			mapSet{map: "cmd_check_4632_OK"; value: 10}
		}
	}
	if map(cmd_check_4632_4) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_check_4632_46"; value: 10}
		}
	}
	if ifelse($check_reversed, $direction_F > 0, $direction_B > 0) {
		mapSet{map: "cmd_check_4632_4"; value: 10}
	}

	# Put motion and buttons together
	if map(cmd_check_4632_OK) > 0 {
		if $check_s {mapSet{map: "cmd_4632s"; value: $cmd_buffertime}}
	}


#===================================================================< SUPER MOVE INPUTS >======================================================================

#-------------------------------------------------------------------------- 236236 -----------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_236236_OK"; value: 0}
		mapSet{map: "cmd_check_236236_2362"; value: 0}
		mapSet{map: "cmd_check_236236_236"; value: 0}
		mapSet{map: "cmd_check_236236_2"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_236236kkk"; value: 0}
		mapSet{map: "cmd_236236ppp"; value: 0}
		mapSet{map: "cmd_236236kk"; value: 0}
		mapSet{map: "cmd_236236pp"; value: 0}
		mapSet{map: "cmd_236236k"; value: 0}
		mapSet{map: "cmd_236236p"; value: 0}
		mapSet{map: "cmd_236236s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_236236_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_236236_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_236236_2362) > 0 {mapAdd{map: "cmd_check_236236_2362"; value: -1}}
	if map(cmd_check_236236_236) > 0 {mapAdd{map: "cmd_check_236236_236"; value: -1}}
	if map(cmd_check_236236_2) > 0 {mapAdd{map: "cmd_check_236236_2"; value: -1}}
	if map(cmd_236236kkk) > 0 {mapAdd{map: "cmd_236236kkk"; value: -1}}
	if map(cmd_236236ppp) > 0 {mapAdd{map: "cmd_236236ppp"; value: -1}}
	if map(cmd_236236kk) > 0 {mapAdd{map: "cmd_236236kk"; value: -1}}
	if map(cmd_236236pp) > 0 {mapAdd{map: "cmd_236236pp"; value: -1}}
	if map(cmd_236236k) > 0 {mapAdd{map: "cmd_236236k"; value: -1}}
	if map(cmd_236236p) > 0 {mapAdd{map: "cmd_236236p"; value: -1}}
	if map(cmd_236236s) > 0 {mapAdd{map: "cmd_236236s"; value: -1}}

	# Check motion
	if map(cmd_check_236236_2362) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_check_236236_OK"; value: 10}
		}
	}
	if map(cmd_check_236236_236) > 0 {
		if $direction_D = 1 {
			mapSet{map: "cmd_check_236236_2362"; value: 10}
		}
	}
	if map(cmd_check_236236_2) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_check_236236_236"; value: 10}
		}
	}
	if $direction_D > 0 {
		mapSet{map: "cmd_check_236236_2"; value: 10}
	}

	# Super cancel leniency
	if map(cmd_check_236236_236) > 0 {
		if map(cmd_236kk) || map(cmd_236pp) || map(cmd_236k) || map(cmd_236p) {
			mapSet{map: "cmd_check_236236_236"; value: 10}
		}
	}

	# Put motion and buttons together
	if map(cmd_check_236236_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_236236kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_236236ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_236236kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_236236pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_236236k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_236236p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_236236s"; value: $cmd_buffertime}}
	}


#------------------------------------------------------------------------ ROOT 236236 -------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_root236236_OK"; value: 0}
		mapSet{map: "cmd_check_root236236_2362"; value: 0}
		mapSet{map: "cmd_check_root236236_236"; value: 0}
		mapSet{map: "cmd_check_root236236_2"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_root236236kkk"; value: 0}
		mapSet{map: "cmd_root236236ppp"; value: 0}
		mapSet{map: "cmd_root236236kk"; value: 0}
		mapSet{map: "cmd_root236236pp"; value: 0}
		mapSet{map: "cmd_root236236k"; value: 0}
		mapSet{map: "cmd_root236236p"; value: 0}
		mapSet{map: "cmd_root236236s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_root236236_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_root236236_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_root236236_2362) > 0 {mapAdd{map: "cmd_check_root236236_2362"; value: -1}}
	if map(cmd_check_root236236_236) > 0 {mapAdd{map: "cmd_check_root236236_236"; value: -1}}
	if map(cmd_check_root236236_2) > 0 {mapAdd{map: "cmd_check_root236236_2"; value: -1}}
	if map(cmd_root236236kkk) > 0 {mapAdd{map: "cmd_root236236kkk"; value: -1}}
	if map(cmd_root236236ppp) > 0 {mapAdd{map: "cmd_root236236ppp"; value: -1}}
	if map(cmd_root236236kk) > 0 {mapAdd{map: "cmd_root236236kk"; value: -1}}
	if map(cmd_root236236pp) > 0 {mapAdd{map: "cmd_root236236pp"; value: -1}}
	if map(cmd_root236236k) > 0 {mapAdd{map: "cmd_root236236k"; value: -1}}
	if map(cmd_root236236p) > 0 {mapAdd{map: "cmd_root236236p"; value: -1}}
	if map(cmd_root236236s) > 0 {mapAdd{map: "cmd_root236236s"; value: -1}}

	# Check motion
	if map(cmd_check_root236236_2362) > 0 {
		if $direction_F = 1 {
			mapSet{map: "cmd_check_root236236_OK"; value: 10}
		}
	}
	if map(cmd_check_root236236_236) > 0 {
		if $direction_D = 1 {
			mapSet{map: "cmd_check_root236236_2362"; value: 10}
		}
	}
	if map(cmd_check_root236236_2) > 0 {
		if $direction_F = 1 {
			mapSet{map: "cmd_check_root236236_236"; value: 10}
		}
	}
	if $direction_D > 0 {
		mapSet{map: "cmd_check_root236236_2"; value: 10}
	}

	# Super cancel leniency
	if map(cmd_check_root236236_236) > 0 {
		if map(cmd_root236kk) || map(cmd_root236pp) || map(cmd_root236k) || map(cmd_root236p) {
			mapSet{map: "cmd_check_root236236_236"; value: 10}
		}
	}

	# Put motion and buttons together
	if map(cmd_check_root236236_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_root236236kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_root236236ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_root236236kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_root236236pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_root236236k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_root236236p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_root236236s"; value: $cmd_buffertime}}
	}


#-------------------------------------------------------------------------- 214214 ----------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_214214_OK"; value: 0}
		mapSet{map: "cmd_check_214214_2142"; value: 0}
		mapSet{map: "cmd_check_214214_214"; value: 0}
		mapSet{map: "cmd_check_214214_2"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_214214kkk"; value: 0}
		mapSet{map: "cmd_214214ppp"; value: 0}
		mapSet{map: "cmd_214214kk"; value: 0}
		mapSet{map: "cmd_214214pp"; value: 0}
		mapSet{map: "cmd_214214k"; value: 0}
		mapSet{map: "cmd_214214p"; value: 0}
		mapSet{map: "cmd_214214s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_214214_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_214214_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_214214_2142) > 0 {mapAdd{map: "cmd_check_214214_2142"; value: -1}}
	if map(cmd_check_214214_214) > 0 {mapAdd{map: "cmd_check_214214_214"; value: -1}}
	if map(cmd_check_214214_2) > 0 {mapAdd{map: "cmd_check_214214_2"; value: -1}}
	if map(cmd_214214kkk) > 0 {mapAdd{map: "cmd_214214kkk"; value: -1}}
	if map(cmd_214214ppp) > 0 {mapAdd{map: "cmd_214214ppp"; value: -1}}
	if map(cmd_214214kk) > 0 {mapAdd{map: "cmd_214214kk"; value: -1}}
	if map(cmd_214214pp) > 0 {mapAdd{map: "cmd_214214pp"; value: -1}}
	if map(cmd_214214k) > 0 {mapAdd{map: "cmd_214214k"; value: -1}}
	if map(cmd_214214p) > 0 {mapAdd{map: "cmd_214214p"; value: -1}}
	if map(cmd_214214s) > 0 {mapAdd{map: "cmd_214214s"; value: -1}}

	# Check motion
	if map(cmd_check_214214_2142) > 0 {
		if ifelse($check_reversed, $direction_F = 1, $direction_B = 1) {
			mapSet{map: "cmd_check_214214_OK"; value: 10}
		}
	}
	if map(cmd_check_214214_214) > 0 {
		if $direction_D = 1 {
			mapSet{map: "cmd_check_214214_2142"; value: 10}
		}
	}
	if map(cmd_check_214214_2) > 0 {
		if ifelse($check_reversed, $direction_F = 1, $direction_B = 1) {
			mapSet{map: "cmd_check_214214_214"; value: 10}
		}
	}
	if $direction_D > 0 {
		mapSet{map: "cmd_check_214214_2"; value: 10}
	}

	# Super cancel leniency
	if map(cmd_check_214214_214) > 0 {
		if map(cmd_214kk) || map(cmd_214pp) || map(cmd_214k) || map(cmd_214p) {
			mapSet{map: "cmd_check_214214_214"; value: 10}
		}
	}

	# Put motion and buttons together
	if map(cmd_check_214214_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_214214kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_214214ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_214214kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_214214pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_214214k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_214214p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_214214s"; value: $cmd_buffertime}}
	}


#------------------------------------------------------------------------ ROOT 214214 -------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_root214214_OK"; value: 0}
		mapSet{map: "cmd_check_root214214_2142"; value: 0}
		mapSet{map: "cmd_check_root214214_214"; value: 0}
		mapSet{map: "cmd_check_root214214_2"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_root214214kkk"; value: 0}
		mapSet{map: "cmd_root214214ppp"; value: 0}
		mapSet{map: "cmd_root214214kk"; value: 0}
		mapSet{map: "cmd_root214214pp"; value: 0}
		mapSet{map: "cmd_root214214k"; value: 0}
		mapSet{map: "cmd_root214214p"; value: 0}
		mapSet{map: "cmd_root214214s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_root214214_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_root214214_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_root214214_2142) > 0 {mapAdd{map: "cmd_check_root214214_2142"; value: -1}}
	if map(cmd_check_root214214_214) > 0 {mapAdd{map: "cmd_check_root214214_214"; value: -1}}
	if map(cmd_check_root214214_2) > 0 {mapAdd{map: "cmd_check_root214214_2"; value: -1}}
	if map(cmd_root214214kkk) > 0 {mapAdd{map: "cmd_root214214kkk"; value: -1}}
	if map(cmd_root214214ppp) > 0 {mapAdd{map: "cmd_root214214ppp"; value: -1}}
	if map(cmd_root214214kk) > 0 {mapAdd{map: "cmd_root214214kk"; value: -1}}
	if map(cmd_root214214pp) > 0 {mapAdd{map: "cmd_root214214pp"; value: -1}}
	if map(cmd_root214214k) > 0 {mapAdd{map: "cmd_root214214k"; value: -1}}
	if map(cmd_root214214p) > 0 {mapAdd{map: "cmd_root214214p"; value: -1}}
	if map(cmd_root214214s) > 0 {mapAdd{map: "cmd_root214214s"; value: -1}}

	# Check motion
	if map(cmd_check_root214214_2142) > 0 {
		if $direction_B = 1 {
			mapSet{map: "cmd_check_root214214_OK"; value: 10}
		}
	}
	if map(cmd_check_root214214_214) > 0 {
		if $direction_D = 1 {
			mapSet{map: "cmd_check_root214214_2142"; value: 10}
		}
	}
	if map(cmd_check_root214214_2) > 0 {
		if $direction_B = 1 {
			mapSet{map: "cmd_check_root214214_214"; value: 10}
		}
	}
	if $direction_D > 0 {
		mapSet{map: "cmd_check_root214214_2"; value: 10}
	}

	# Super cancel leniency
	if map(cmd_check_root214214_214) > 0 {
		if map(cmd_root214kk) || map(cmd_root214pp) || map(cmd_root214k) || map(cmd_root214p) {
			mapSet{map: "cmd_check_root214214_214"; value: 10}
		}
	}

	# Put motion and buttons together
	if map(cmd_check_root214214_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_root214214kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_root214214ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_root214214kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_root214214pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_root214214k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_root214214p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_root214214s"; value: $cmd_buffertime}}
	}


#-------------------------------------------------------------------------- 624624 ----------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_624624_OK"; value: 0}
		mapSet{map: "cmd_check_624624_62462"; value: 0}
		mapSet{map: "cmd_check_624624_6246"; value: 0}
		mapSet{map: "cmd_check_624624_624"; value: 0}
		mapSet{map: "cmd_check_624624_62"; value: 0}
		mapSet{map: "cmd_check_624624_6"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_624624kkk"; value: 0}
		mapSet{map: "cmd_624624ppp"; value: 0}
		mapSet{map: "cmd_624624kk"; value: 0}
		mapSet{map: "cmd_624624pp"; value: 0}
		mapSet{map: "cmd_624624k"; value: 0}
		mapSet{map: "cmd_624624p"; value: 0}
		mapSet{map: "cmd_624624s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_624624_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_624624_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_624624_62462) > 0 {mapAdd{map: "cmd_check_624624_62462"; value: -1}}
	if map(cmd_check_624624_6246) > 0 {mapAdd{map: "cmd_check_624624_6246"; value: -1}}
	if map(cmd_check_624624_624) > 0 {mapAdd{map: "cmd_check_624624_624"; value: -1}}
	if map(cmd_check_624624_62) > 0 {mapAdd{map: "cmd_check_624624_62"; value: -1}}
	if map(cmd_check_624624_6) > 0 {mapAdd{map: "cmd_check_624624_6"; value: -1}}
	if map(cmd_624624kkk) > 0 {mapAdd{map: "cmd_624624kkk"; value: -1}}
	if map(cmd_624624ppp) > 0 {mapAdd{map: "cmd_624624ppp"; value: -1}}
	if map(cmd_624624kk) > 0 {mapAdd{map: "cmd_624624kk"; value: -1}}
	if map(cmd_624624pp) > 0 {mapAdd{map: "cmd_624624pp"; value: -1}}
	if map(cmd_624624k) > 0 {mapAdd{map: "cmd_624624k"; value: -1}}
	if map(cmd_624624p) > 0 {mapAdd{map: "cmd_624624p"; value: -1}}
	if map(cmd_624624s) > 0 {mapAdd{map: "cmd_624624s"; value: -1}}

	# Check motion
	if map(cmd_check_624624_62462) > 0 {
		if ifelse($check_reversed, $direction_F = 1, $direction_B = 1) {
			mapSet{map: "cmd_check_624624_OK"; value: 10}
		}
	}
	if map(cmd_check_624624_6246) > 0 {
		if $direction_any_D = 1 {
			mapSet{map: "cmd_check_624624_62462"; value: 10}
		}
	}
	if map(cmd_check_624624_624) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_check_624624_6246"; value: 10}
		}
	}
	if map(cmd_check_624624_62) > 0 {
		if ifelse($check_reversed, $direction_F = 1, $direction_B = 1) {
			mapSet{map: "cmd_check_624624_624"; value: 10}
		}
	}
	if map(cmd_check_624624_6) > 0 {
		if $direction_any_D = 1 {
			mapSet{map: "cmd_check_624624_62"; value: 10}
		}
	}
	if ifelse($check_reversed, $direction_B > 0, $direction_F > 0) {
		mapSet{map: "cmd_check_624624_6"; value: 10}
	}

	# Super cancel leniency
	if map(cmd_check_624624_624) > 0 {
		if map(cmd_214kk) || map(cmd_214pp) || map(cmd_214k) || map(cmd_214p) {
			mapSet{map: "cmd_check_624624_624"; value: 10}
		}
	}

	# Put motion and buttons together
	if map(cmd_check_624624_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_624624kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_624624ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_624624kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_624624pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_624624k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_624624p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_624624s"; value: $cmd_buffertime}}
	}


#-------------------------------------------------------------------------- 2141236 ---------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_2141236_OK"; value: 0}
		mapSet{map: "cmd_check_2141236_21412"; value: 0}
		mapSet{map: "cmd_check_2141236_214"; value: 0}
		mapSet{map: "cmd_check_2141236_2"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_2141236kkk"; value: 0}
		mapSet{map: "cmd_2141236ppp"; value: 0}
		mapSet{map: "cmd_2141236kk"; value: 0}
		mapSet{map: "cmd_2141236pp"; value: 0}
		mapSet{map: "cmd_2141236k"; value: 0}
		mapSet{map: "cmd_2141236p"; value: 0}
		mapSet{map: "cmd_2141236s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_2141236_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_2141236_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_2141236_21412) > 0 {mapAdd{map: "cmd_check_2141236_21412"; value: -1}}
	if map(cmd_check_2141236_214) > 0 {mapAdd{map: "cmd_check_2141236_214"; value: -1}}
	if map(cmd_check_2141236_2) > 0 {mapAdd{map: "cmd_check_2141236_2"; value: -1}}
	if map(cmd_2141236kkk) > 0 {mapAdd{map: "cmd_2141236kkk"; value: -1}}
	if map(cmd_2141236ppp) > 0 {mapAdd{map: "cmd_2141236ppp"; value: -1}}
	if map(cmd_2141236kk) > 0 {mapAdd{map: "cmd_2141236kk"; value: -1}}
	if map(cmd_2141236pp) > 0 {mapAdd{map: "cmd_2141236pp"; value: -1}}
	if map(cmd_2141236k) > 0 {mapAdd{map: "cmd_2141236k"; value: -1}}
	if map(cmd_2141236p) > 0 {mapAdd{map: "cmd_2141236p"; value: -1}}
	if map(cmd_2141236s) > 0 {mapAdd{map: "cmd_2141236s"; value: -1}}

	# Check motion
	if map(cmd_check_2141236_21412) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_check_2141236_OK"; value: 10}
		}
	}
	if map(cmd_check_2141236_214) > 0 {
		if $direction_D = 1 {
			mapSet{map: "cmd_check_2141236_21412"; value: 10}
		}
	}
	if map(cmd_check_2141236_2) > 0 {
		if ifelse($check_reversed, $direction_F = 1, $direction_B = 1) {
			mapSet{map: "cmd_check_2141236_214"; value: 10}
		}
	}
	if $direction_D > 0 {
		mapSet{map: "cmd_check_2141236_2"; value: 10}
	}

	# Super cancel leniency
	if map(cmd_check_2141236_214) > 0 {
		if map(cmd_236kk) || map(cmd_236pp) || map(cmd_236k) || map(cmd_236p) {
			mapSet{map: "cmd_check_2141236_214"; value: 10}
		}
	}

	# Put motion and buttons together
	if map(cmd_check_2141236_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_2141236kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_2141236ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_2141236kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_2141236pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_2141236k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_2141236p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_2141236s"; value: $cmd_buffertime}}
	}


#-------------------------------------------------------------------------- 2363214 ---------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_2363214_OK"; value: 0}
		mapSet{map: "cmd_check_2363214_23632"; value: 0}
		mapSet{map: "cmd_check_2363214_236"; value: 0}
		mapSet{map: "cmd_check_2363214_2"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_2363214kkk"; value: 0}
		mapSet{map: "cmd_2363214ppp"; value: 0}
		mapSet{map: "cmd_2363214kk"; value: 0}
		mapSet{map: "cmd_2363214pp"; value: 0}
		mapSet{map: "cmd_2363214k"; value: 0}
		mapSet{map: "cmd_2363214p"; value: 0}
		mapSet{map: "cmd_2363214s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_2363214_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_2363214_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_2363214_23632) > 0 {mapAdd{map: "cmd_check_2363214_23632"; value: -1}}
	if map(cmd_check_2363214_236) > 0 {mapAdd{map: "cmd_check_2363214_236"; value: -1}}
	if map(cmd_check_2363214_2) > 0 {mapAdd{map: "cmd_check_2363214_2"; value: -1}}
	if map(cmd_2363214kkk) > 0 {mapAdd{map: "cmd_2363214kkk"; value: -1}}
	if map(cmd_2363214ppp) > 0 {mapAdd{map: "cmd_2363214ppp"; value: -1}}
	if map(cmd_2363214kk) > 0 {mapAdd{map: "cmd_2363214kk"; value: -1}}
	if map(cmd_2363214pp) > 0 {mapAdd{map: "cmd_2363214pp"; value: -1}}
	if map(cmd_2363214k) > 0 {mapAdd{map: "cmd_2363214k"; value: -1}}
	if map(cmd_2363214p) > 0 {mapAdd{map: "cmd_2363214p"; value: -1}}
	if map(cmd_2363214s) > 0 {mapAdd{map: "cmd_2363214s"; value: -1}}

	# Check motion
	if map(cmd_check_2363214_23632) > 0 {
		if ifelse($check_reversed, $direction_F = 1, $direction_B = 1) {
			mapSet{map: "cmd_check_2363214_OK"; value: 10}
		}
	}
	if map(cmd_check_2363214_236) > 0 {
		if $direction_D = 1 {
			mapSet{map: "cmd_check_2363214_23632"; value: 10}
		}
	}
	if map(cmd_check_2363214_2) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_check_2363214_236"; value: 10}
		}
	}
	if $direction_D > 0 {
		mapSet{map: "cmd_check_2363214_2"; value: 10}
	}

	# Super cancel leniency
	if map(cmd_check_2363214_236) > 0 {
		if map(cmd_236kk) || map(cmd_236pp) || map(cmd_236k) || map(cmd_236p) {
			mapSet{map: "cmd_check_2363214_236"; value: 10}
		}
	}

	# Put motion and buttons together
	if map(cmd_check_2363214_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_2363214kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_2363214ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_2363214kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_2363214pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_2363214k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_2363214p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_2363214s"; value: $cmd_buffertime}}
	}


#-------------------------------------------------------------------------- 641236 ----------------------------------------------------------------------------
# Haou Shoukouken

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_641236_OK"; value: 0}
		mapSet{map: "cmd_check_641236_6412"; value: 0}
		mapSet{map: "cmd_check_641236_64"; value: 0}
		mapSet{map: "cmd_check_641236_6"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_641236kkk"; value: 0}
		mapSet{map: "cmd_641236ppp"; value: 0}
		mapSet{map: "cmd_641236kk"; value: 0}
		mapSet{map: "cmd_641236pp"; value: 0}
		mapSet{map: "cmd_641236k"; value: 0}
		mapSet{map: "cmd_641236p"; value: 0}
		mapSet{map: "cmd_641236s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_641236_OK) > 0 && (stateno != 40 || time <= 2) {mapAdd{map: "cmd_check_641236_OK"; value: -1}} # extra jump frames do not affect tiger knee motions
	if map(cmd_check_641236_6412) > 0 {mapAdd{map: "cmd_check_641236_6412"; value: -1}}
	if map(cmd_check_641236_64) > 0 {mapAdd{map: "cmd_check_641236_64"; value: -1}}
	if map(cmd_check_641236_6) > 0 {mapAdd{map: "cmd_check_641236_6"; value: -1}}
	if map(cmd_641236kkk) > 0 {mapAdd{map: "cmd_641236kkk"; value: -1}}
	if map(cmd_641236ppp) > 0 {mapAdd{map: "cmd_641236ppp"; value: -1}}
	if map(cmd_641236kk) > 0 {mapAdd{map: "cmd_641236kk"; value: -1}}
	if map(cmd_641236pp) > 0 {mapAdd{map: "cmd_641236pp"; value: -1}}
	if map(cmd_641236k) > 0 {mapAdd{map: "cmd_641236k"; value: -1}}
	if map(cmd_641236p) > 0 {mapAdd{map: "cmd_641236p"; value: -1}}
	if map(cmd_641236s) > 0 {mapAdd{map: "cmd_641236s"; value: -1}}

	# Check motion
	if map(cmd_check_641236_6412) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_check_641236_OK"; value: 10}
		}
	}
	if map(cmd_check_641236_64) > 0 {
		if $direction_D = 1 {
			mapSet{map: "cmd_check_641236_6412"; value: 10}
		}
	}
	if map(cmd_check_641236_6) > 0 {
		if ifelse($check_reversed, $direction_F = 1, $direction_B = 1) {
			mapSet{map: "cmd_check_641236_64"; value: 10}
		}
	}
	if ifelse($check_reversed, $direction_B > 0, $direction_F > 0) {
		mapSet{map: "cmd_check_641236_6"; value: 10}
	}

	# Super cancel leniency
	if map(cmd_check_641236_6) > 0 {
		if map(cmd_236kk) || map(cmd_236pp) || map(cmd_236k) || map(cmd_236p) {
			mapSet{map: "cmd_check_641236_6"; value: 10}
		}
	}

	# Put motion and buttons together
	if map(cmd_check_641236_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_641236kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_641236ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_641236kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_641236pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_641236k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_641236p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_641236s"; value: $cmd_buffertime}}
	}


#-------------------------------------------------------------------------- 632146 ----------------------------------------------------------------------------
# Deadly Rave

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_632146_OK"; value: 0}
		mapSet{map: "cmd_check_632146_63214"; value: 0}
		mapSet{map: "cmd_check_632146_632"; value: 0}
		mapSet{map: "cmd_check_632146_6"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_632146kkk"; value: 0}
		mapSet{map: "cmd_632146ppp"; value: 0}
		mapSet{map: "cmd_632146kk"; value: 0}
		mapSet{map: "cmd_632146pp"; value: 0}
		mapSet{map: "cmd_632146k"; value: 0}
		mapSet{map: "cmd_632146p"; value: 0}
		mapSet{map: "cmd_632146s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_632146_OK) > 0 {mapAdd{map: "cmd_check_632146_OK"; value: -1}}
	if map(cmd_check_632146_63214) > 0 {mapAdd{map: "cmd_check_632146_63214"; value: -1}}
	if map(cmd_check_632146_632) > 0 {mapAdd{map: "cmd_check_632146_632"; value: -1}}
	if map(cmd_check_632146_6) > 0 {mapAdd{map: "cmd_check_632146_6"; value: -1}}
	if map(cmd_632146kkk) > 0 {mapAdd{map: "cmd_632146kkk"; value: -1}}
	if map(cmd_632146ppp) > 0 {mapAdd{map: "cmd_632146ppp"; value: -1}}
	if map(cmd_632146kk) > 0 {mapAdd{map: "cmd_632146kk"; value: -1}}
	if map(cmd_632146pp) > 0 {mapAdd{map: "cmd_632146pp"; value: -1}}
	if map(cmd_632146k) > 0 {mapAdd{map: "cmd_632146k"; value: -1}}
	if map(cmd_632146p) > 0 {mapAdd{map: "cmd_632146p"; value: -1}}
	if map(cmd_632146s) > 0 {mapAdd{map: "cmd_632146s"; value: -1}}

	# Check motion
	if map(cmd_check_632146_63214) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_check_632146_OK"; value: 10}
		}
	}
	if map(cmd_check_632146_632) > 0 {
		if ifelse($check_reversed, $direction_F = 1, $direction_B = 1) {
			mapSet{map: "cmd_check_632146_63214"; value: 10}
		}
	}
	if map(cmd_check_632146_6) > 0 {
		if $direction_D = 1 {
			mapSet{map: "cmd_check_632146_632"; value: 10}
		}
	}
	if ifelse($check_reversed, $direction_B > 0, $direction_F > 0) {
		mapSet{map: "cmd_check_632146_6"; value: 10}
	}

	# Super cancel leniency
	if map(cmd_check_632146_63214) > 0 {
		if map(cmd_214kk) || map(cmd_214pp) || map(cmd_214k) || map(cmd_214p) {
			mapSet{map: "cmd_check_632146_63214"; value: 10}
		}
	}

	# Put motion and buttons together
	if map(cmd_check_632146_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_632146kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_632146ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_632146kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_632146pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_632146k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_632146p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_632146s"; value: $cmd_buffertime}}
	}


#--------------------------------------------------------------------------- 4646 -----------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_4646_OK"; value: 0}
		mapSet{map: "cmd_check_4646_464"; value: 0}
		mapSet{map: "cmd_check_4646_46"; value: 0}
		mapSet{map: "cmd_check_4646_4"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_4646kkk"; value: 0}
		mapSet{map: "cmd_4646ppp"; value: 0}
		mapSet{map: "cmd_4646kk"; value: 0}
		mapSet{map: "cmd_4646pp"; value: 0}
		mapSet{map: "cmd_4646k"; value: 0}
		mapSet{map: "cmd_4646p"; value: 0}
		mapSet{map: "cmd_4646s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_4646_OK) > 0 {mapAdd{map: "cmd_check_4646_OK"; value: -1}}
	if map(cmd_check_4646_464) > 0 {mapAdd{map: "cmd_check_4646_464"; value: -1}}
	if map(cmd_check_4646_46) > 0 {mapAdd{map: "cmd_check_4646_46"; value: -1}}
	if map(cmd_check_4646_4) > 0 {mapAdd{map: "cmd_check_4646_4"; value: -1}}
	if map(cmd_4646kkk) > 0 {mapAdd{map: "cmd_4646kkk"; value: -1}}
	if map(cmd_4646ppp) > 0 {mapAdd{map: "cmd_4646ppp"; value: -1}}
	if map(cmd_4646kk) > 0 {mapAdd{map: "cmd_4646kk"; value: -1}}
	if map(cmd_4646pp) > 0 {mapAdd{map: "cmd_4646pp"; value: -1}}
	if map(cmd_4646k) > 0 {mapAdd{map: "cmd_4646k"; value: -1}}
	if map(cmd_4646p) > 0 {mapAdd{map: "cmd_4646p"; value: -1}}
	if map(cmd_4646s) > 0 {mapAdd{map: "cmd_4646s"; value: -1}}

	# Check motion
	if map(cmd_check_4646_464) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_check_4646_OK"; value: 10}
		}
	}
	if map(cmd_check_4646_46) > 0 {
		if ifelse($check_reversed, $direction_any_F = 1, $direction_any_B = 1) {
			mapSet{map: "cmd_check_4646_464"; value: 10}
		}
	}
	if map(cmd_check_4646_4) > 0 {
		if ifelse($check_reversed, $direction_any_B = 1, $direction_any_F = 1) {
			mapSet{map: "cmd_check_4646_46"; value: 10}
		}
	}
	if map(cmd_charge4) >= 45 {
		if ifelse($check_reversed, $direction_any_F > 0, $direction_any_B > 0) {
			mapSet{map: "cmd_check_4646_4"; value: 10}
		}
	}

	# Super cancel leniency
	if map(cmd_check_4646_46) > 0 {
		if map(cmd_46kk) || map(cmd_46pp) || map(cmd_46k) || map(cmd_46p) {
			mapSet{map: "cmd_check_4646_46"; value: 10}
		}
	}

	# Put motion and buttons together
	if map(cmd_check_4646_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_4646kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_4646ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_4646kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_4646pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_4646k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_4646p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_4646s"; value: $cmd_buffertime}}
	}


#--------------------------------------------------------------------------- 1319 -----------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_1319_OK"; value: 0}
		mapSet{map: "cmd_check_1319_131"; value: 0}
		mapSet{map: "cmd_check_1319_13"; value: 0}
		mapSet{map: "cmd_check_1319_1"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_1319kkk"; value: 0}
		mapSet{map: "cmd_1319ppp"; value: 0}
		mapSet{map: "cmd_1319kk"; value: 0}
		mapSet{map: "cmd_1319pp"; value: 0}
		mapSet{map: "cmd_1319k"; value: 0}
		mapSet{map: "cmd_1319p"; value: 0}
		mapSet{map: "cmd_1319s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_1319_OK) > 0 {mapAdd{map: "cmd_check_1319_OK"; value: -1}}
	if map(cmd_check_1319_131) > 0 {mapAdd{map: "cmd_check_1319_131"; value: -1}}
	if map(cmd_check_1319_13) > 0 {mapAdd{map: "cmd_check_1319_13"; value: -1}}
	if map(cmd_check_1319_1) > 0 {mapAdd{map: "cmd_check_1319_1"; value: -1}}
	if map(cmd_1319kkk) > 0 {mapAdd{map: "cmd_1319kkk"; value: -1}}
	if map(cmd_1319ppp) > 0 {mapAdd{map: "cmd_1319ppp"; value: -1}}
	if map(cmd_1319kk) > 0 {mapAdd{map: "cmd_1319kk"; value: -1}}
	if map(cmd_1319pp) > 0 {mapAdd{map: "cmd_1319pp"; value: -1}}
	if map(cmd_1319k) > 0 {mapAdd{map: "cmd_1319k"; value: -1}}
	if map(cmd_1319p) > 0 {mapAdd{map: "cmd_1319p"; value: -1}}
	if map(cmd_1319s) > 0 {mapAdd{map: "cmd_1319s"; value: -1}}

	# Check motion
	if map(cmd_check_1319_131) > 0 {
		if $direction_any_U = 1 {
			mapSet{map: "cmd_check_1319_OK"; value: 10}
		}
	}
	if map(cmd_check_1319_13) > 0 {
		if ifelse($check_reversed, $direction_any_F = 1, $direction_any_B = 1) {
			mapSet{map: "cmd_check_1319_131"; value: 10}
		}
	}
	if map(cmd_check_1319_1) > 0 {
		if ifelse($check_reversed, $direction_any_B = 1, $direction_any_F = 1) {
			mapSet{map: "cmd_check_1319_13"; value: 10}
		}
	}
	if map(cmd_charge2) >= 45 && map(cmd_charge4) >= 45 {
		if ifelse($check_reversed, $direction_DF > 0, $direction_DB > 0) {
			mapSet{map: "cmd_check_1319_1"; value: 10}
		}
	}

	# Super cancel leniency
	if map(cmd_check_1319_13) > 0 {
		if map(cmd_28kk) || map(cmd_28pp) || map(cmd_28k) || map(cmd_28p) || map(cmd_46kk) || map(cmd_46pp) || map(cmd_46k) || map(cmd_46p) {
			mapSet{map: "cmd_check_1319_13"; value: 10}
		}
	}

	# Put motion and buttons together
	if map(cmd_check_1319_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_1319kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_1319ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_1319kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_1319pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_1319k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_1319p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_1319s"; value: $cmd_buffertime}}
	}


#--------------------------------------------------------------------------- 222 ------------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_222_OK"; value: 0}
		mapSet{map: "cmd_check_222_52525"; value: 0}
		mapSet{map: "cmd_check_222_5252"; value: 0}
		mapSet{map: "cmd_check_222_525"; value: 0}
		mapSet{map: "cmd_check_222_52"; value: 0}
		mapSet{map: "cmd_check_222_5"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_222kkk"; value: 0}
		mapSet{map: "cmd_222ppp"; value: 0}
		mapSet{map: "cmd_222kk"; value: 0}
		mapSet{map: "cmd_222pp"; value: 0}
		mapSet{map: "cmd_222k"; value: 0}
		mapSet{map: "cmd_222p"; value: 0}
		mapSet{map: "cmd_222s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_222_OK) > 0 {mapAdd{map: "cmd_check_222_OK"; value: -1}}
	if map(cmd_check_222_52525) > 0 {mapAdd{map: "cmd_check_222_52525"; value: -1}}
	if map(cmd_check_222_5252) > 0 {mapAdd{map: "cmd_check_222_5252"; value: -1}}
	if map(cmd_check_222_525) > 0 {mapAdd{map: "cmd_check_222_525"; value: -1}}
	if map(cmd_check_222_52) > 0 {mapAdd{map: "cmd_check_222_52"; value: -1}}
	if map(cmd_check_222_5) > 0 {mapAdd{map: "cmd_check_222_5"; value: -1}}
	if map(cmd_222kkk) > 0 {mapAdd{map: "cmd_222kkk"; value: -1}}
	if map(cmd_222ppp) > 0 {mapAdd{map: "cmd_222ppp"; value: -1}}
	if map(cmd_222kk) > 0 {mapAdd{map: "cmd_222kk"; value: -1}}
	if map(cmd_222pp) > 0 {mapAdd{map: "cmd_222pp"; value: -1}}
	if map(cmd_222k) > 0 {mapAdd{map: "cmd_222k"; value: -1}}
	if map(cmd_222p) > 0 {mapAdd{map: "cmd_222p"; value: -1}}
	if map(cmd_222s) > 0 {mapAdd{map: "cmd_222s"; value: -1}}

	# Check motion
	if map(cmd_check_222_52525) > 0 {
		if $direction_any_D = 1 {
			mapSet{map: "cmd_check_222_OK"; value: 10}
		}
	}
	if map(cmd_check_222_5252) > 0 {
		if $direction_any_D < 0 {
			mapSet{map: "cmd_check_222_52525"; value: map(cmd_check_222_52)} # Neutral does not reset timer
		}
	}
	if map(cmd_check_222_525) > 0 {
		if $direction_any_D = 1 {
			mapSet{map: "cmd_check_222_5252"; value: 15}
		}
	}
	if map(cmd_check_222_52) > 0 {
		if $direction_any_D < 0 {
			mapSet{map: "cmd_check_222_525"; value: map(cmd_check_222_52)} # Neutral does not reset timer
		}
	}
	if map(cmd_check_222_5) > 0 {
		if $direction_any_D = 1 {
			mapSet{map: "cmd_check_222_52"; value: 15}
		}
	}
	if $direction_any_D < 0 {
		mapSet{map: "cmd_check_222_5"; value: 15}
	}

	# Put motion and buttons together
	if map(cmd_check_222_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_222kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_222ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_222kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_222pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_222k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_222p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_222s"; value: $cmd_buffertime}}
	}


#--------------------------------------------------------------------------- 888 ------------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_888_OK"; value: 0}
		mapSet{map: "cmd_check_888_58585"; value: 0}
		mapSet{map: "cmd_check_888_5858"; value: 0}
		mapSet{map: "cmd_check_888_585"; value: 0}
		mapSet{map: "cmd_check_888_58"; value: 0}
		mapSet{map: "cmd_check_888_5"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_888kkk"; value: 0}
		mapSet{map: "cmd_888ppp"; value: 0}
		mapSet{map: "cmd_888kk"; value: 0}
		mapSet{map: "cmd_888pp"; value: 0}
		mapSet{map: "cmd_888k"; value: 0}
		mapSet{map: "cmd_888p"; value: 0}
		mapSet{map: "cmd_888s"; value: 0}
	}

	# Decrease timers
	if map(cmd_check_888_OK) > 0 {mapAdd{map: "cmd_check_888_OK"; value: -1}}
	if map(cmd_check_888_58585) > 0 {mapAdd{map: "cmd_check_888_58585"; value: -1}}
	if map(cmd_check_888_5858) > 0 {mapAdd{map: "cmd_check_888_5858"; value: -1}}
	if map(cmd_check_888_585) > 0 {mapAdd{map: "cmd_check_888_585"; value: -1}}
	if map(cmd_check_888_58) > 0 {mapAdd{map: "cmd_check_888_58"; value: -1}}
	if map(cmd_check_888_5) > 0 {mapAdd{map: "cmd_check_888_5"; value: -1}}
	if map(cmd_888kkk) > 0 {mapAdd{map: "cmd_888kkk"; value: -1}}
	if map(cmd_888ppp) > 0 {mapAdd{map: "cmd_888ppp"; value: -1}}
	if map(cmd_888kk) > 0 {mapAdd{map: "cmd_888kk"; value: -1}}
	if map(cmd_888pp) > 0 {mapAdd{map: "cmd_888pp"; value: -1}}
	if map(cmd_888k) > 0 {mapAdd{map: "cmd_888k"; value: -1}}
	if map(cmd_888p) > 0 {mapAdd{map: "cmd_888p"; value: -1}}
	if map(cmd_888s) > 0 {mapAdd{map: "cmd_888s"; value: -1}}

	# Check motion
	if map(cmd_check_888_58585) > 0 {
		if $direction_any_U = 1 {
			mapSet{map: "cmd_check_888_OK"; value: 10}
		}
	}
	if map(cmd_check_888_5858) > 0 {
		if $direction_any_U < 0 {
			mapSet{map: "cmd_check_888_58585"; value: map(cmd_check_888_58)} # Neutral does not reset timer
		}
	}
	if map(cmd_check_888_585) > 0 {
		if $direction_any_U = 1 {
			mapSet{map: "cmd_check_888_5858"; value: 15}
		}
	}
	if map(cmd_check_888_58) > 0 {
		if $direction_any_U < 0 {
			mapSet{map: "cmd_check_888_585"; value: map(cmd_check_888_58)} # Neutral does not reset timer
		}
	}
	if map(cmd_check_888_5) > 0 {
		if $direction_any_U = 1 {
			mapSet{map: "cmd_check_888_58"; value: 15}
		}
	}
	if $direction_any_U < 0 {
		mapSet{map: "cmd_check_888_5"; value: 15}
	}

	# Put motion and buttons together
	if map(cmd_check_888_OK) > 0 {
		if $check_kkk {mapSet{map: "cmd_888kkk"; value: $cmd_buffertime}}
		if $check_ppp {mapSet{map: "cmd_888ppp"; value: $cmd_buffertime}}
		if $check_kk {mapSet{map: "cmd_888kk"; value: $cmd_buffertime}}
		if $check_pp {mapSet{map: "cmd_888pp"; value: $cmd_buffertime}}
		if $check_k {mapSet{map: "cmd_888k"; value: $cmd_buffertime}}
		if $check_p {mapSet{map: "cmd_888p"; value: $cmd_buffertime}}
		if $check_s {mapSet{map: "cmd_888s"; value: $cmd_buffertime}}
	}


#----------------------------------------------------------------------- RAGING DEMON -----------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_demon_xx6a"; value: 0}
		mapSet{map: "cmd_check_demon_xx6"; value: 0}
		mapSet{map: "cmd_check_demon_xx"; value: 0}
		mapSet{map: "cmd_check_demon_x"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_demon"; value: 0}
	}

	# Decrease timers
	if map(cmd_demon) > 0 {mapAdd{map: "cmd_demon"; value: -1}}
	if map(cmd_check_demon_xx6a) > 0 {mapAdd{map: "cmd_check_demon_xx6a"; value: -1}}
	if map(cmd_check_demon_xx6) > 0 {mapAdd{map: "cmd_check_demon_xx6"; value: -1}}
	if map(cmd_check_demon_xx) > 0 {mapAdd{map: "cmd_check_demon_xx"; value: -1}}
	if map(cmd_check_demon_x) > 0 {mapAdd{map: "cmd_check_demon_x"; value: -1}}

	# Check inputs
	# Reversing order of last 3 inputs allows pressing them simultaneously
	if map(cmd_check_demon_xx) > 0 {
		if ifelse($check_reversed, $direction_any_B = 1, $direction_any_F = 1) {
			mapSet{map: "cmd_check_demon_xx6"; value: 15}
		}
	}
	if map(cmd_check_demon_xx6) > 0 {
		if $button_a = 1 {
			mapSet{map: "cmd_check_demon_xx6a"; value: 15}
		}
	}
	if map(cmd_check_demon_xx6a) > 0 {
		if $button_z = 1 {
			mapSet{map: "cmd_demon"; value: $cmd_buffertime}
		}
	}
	if map(cmd_check_demon_x) > 0 {
		if $button_x = 1 {
			mapSet{map: "cmd_check_demon_xx"; value: 15}
		}
	}
	if $button_x = 1 {
		mapSet{map: "cmd_check_demon_x"; value: 15}
	}


#------------------------------------------------------------------------ OTOKO MICHI -------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_otoko_za4x"; value: 0}
		mapSet{map: "cmd_check_otoko_za4"; value: 0}
		mapSet{map: "cmd_check_otoko_za"; value: 0}
		mapSet{map: "cmd_check_otoko_z"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_otoko"; value: 0}
	}

	# Decrease timers
	if map(cmd_otoko) > 0 {mapAdd{map: "cmd_otoko"; value: -1}}
	if map(cmd_check_otoko_za4x) > 0 {mapAdd{map: "cmd_check_otoko_za4x"; value: -1}}
	if map(cmd_check_otoko_za4) > 0 {mapAdd{map: "cmd_check_otoko_za4"; value: -1}}
	if map(cmd_check_otoko_za) > 0 {mapAdd{map: "cmd_check_otoko_za"; value: -1}}
	if map(cmd_check_otoko_z) > 0 {mapAdd{map: "cmd_check_otoko_z"; value: -1}}

	# Check inputs
	if map(cmd_check_otoko_za4x) > 0 {
		if $button_x = 1 {
			mapSet{map: "cmd_otoko"; value: $cmd_buffertime}
		}
	}
	if map(cmd_check_otoko_za4) > 0 {
		if $button_x = 1 {
			mapSet{map: "cmd_check_otoko_za4x"; value: 15}
		}
	}
	if map(cmd_check_otoko_za) > 0 {
		if ifelse($check_reversed, $direction_any_F = 1, $direction_any_B = 1) {
			mapSet{map: "cmd_check_otoko_za4"; value: 15}
		}
	}
	if map(cmd_check_otoko_z) > 0 {
		if $button_a = 1 {
			mapSet{map: "cmd_check_otoko_za"; value: 15}
		}
	}
	if $button_z = 1 {
		mapSet{map: "cmd_check_otoko_z"; value: 15}
	}


#------------------------------------------------------------------------- TENRAIHA ---------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_tenraiha_acyy"; value: 0}
		mapSet{map: "cmd_check_tenraiha_acy"; value: 0}
		mapSet{map: "cmd_check_tenraiha_ac"; value: 0}
		mapSet{map: "cmd_check_tenraiha_a"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_tenraiha"; value: 0}
	}

	# Decrease timers
	if map(cmd_tenraiha) > 0 {mapAdd{map: "cmd_tenraiha"; value: -1}}
	if map(cmd_check_tenraiha_acyy) > 0 {mapAdd{map: "cmd_check_tenraiha_acyy"; value: -1}}
	if map(cmd_check_tenraiha_acy) > 0 {mapAdd{map: "cmd_check_tenraiha_acy"; value: -1}}
	if map(cmd_check_tenraiha_ac) > 0 {mapAdd{map: "cmd_check_tenraiha_ac"; value: -1}}
	if map(cmd_check_tenraiha_a) > 0 {mapAdd{map: "cmd_check_tenraiha_a"; value: -1}}

	# Check inputs
	# Reversing order of last 2 inputs allows pressing them simultaneously
	if map(cmd_check_tenraiha_acy) > 0 {
		if $button_y = 1 {
			mapSet{map: "cmd_check_tenraiha_acyy"; value: 15}
		}
	}
	if map(cmd_check_tenraiha_acyy) > 0 {
		if $direction_U = 1 {
			mapSet{map: "cmd_tenraiha"; value: $cmd_buffertime}
		}
	}
	if map(cmd_check_tenraiha_ac) > 0 {
		if $button_y = 1 {
			mapSet{map: "cmd_check_tenraiha_acy"; value: 15}
		}
	}
	if map(cmd_check_tenraiha_a) > 0 {
		if $button_c = 1 {
			mapSet{map: "cmd_check_tenraiha_ac"; value: 15}
		}
	}
	if $button_a = 1 {
		mapSet{map: "cmd_check_tenraiha_a"; value: 15}
	}


#--------------------------------------------------------------------- ETERNAL SLUMBER ------------------------------------------------------------------------

	# Erase inputs
	if map(cmd_erase_motion_super) {
		mapSet{map: "cmd_check_slumber_xb4y"; value: 0}
		mapSet{map: "cmd_check_slumber_xb4"; value: 0}
		mapSet{map: "cmd_check_slumber_xb"; value: 0}
		mapSet{map: "cmd_check_slumber_x"; value: 0}
	}
	if map(cmd_erase_completed) {
		mapSet{map: "cmd_slumber"; value: 0}
	}

	# Decrease timers
	if map(cmd_slumber) > 0 {mapAdd{map: "cmd_slumber"; value: -1}}
	if map(cmd_check_slumber_xb4y) > 0 {mapAdd{map: "cmd_check_slumber_xb4y"; value: -1}}
	if map(cmd_check_slumber_xb4) > 0 {mapAdd{map: "cmd_check_slumber_xb4"; value: -1}}
	if map(cmd_check_slumber_xb) > 0 {mapAdd{map: "cmd_check_slumber_xb"; value: -1}}
	if map(cmd_check_slumber_x) > 0 {mapAdd{map: "cmd_check_slumber_x"; value: -1}}

	# Check inputs
	# Reversing order of last 3 inputs allows pressing them simultaneously
	if map(cmd_check_slumber_xb) > 0 {
		if ifelse($check_reversed, $direction_F = 1, $direction_B = 1) {
			mapSet{map: "cmd_check_slumber_xb4"; value: 15}
		}
	}
	if map(cmd_check_slumber_xb4) > 0 {
		if $button_y = 1 {
			mapSet{map: "cmd_check_slumber_xb4y"; value: 15}
		}
	}
	if map(cmd_check_slumber_xb4y) > 0 {
		if $button_c = 1 {
			mapSet{map: "cmd_slumber"; value: $cmd_buffertime}
		}
	}
	if map(cmd_check_slumber_x) > 0 {
		if $button_b = 1 {
			mapSet{map: "cmd_check_slumber_xb"; value: 15}
		}
	}
	if $button_x = 1 {
		mapSet{map: "cmd_check_slumber_x"; value: 15}
	}


#======================================================================< OTHER INPUTS >========================================================================

#----------------------------------------------------------------------- FORWARD DASH -------------------------------------------------------------------------

	# Cancel  input if player intention is a different motion
	if ifelse($check_reversed, $direction_any_F > 0, $direction_any_B > 0) {
		mapSet{map: "cmd_66"; value: 0}
		mapSet{map: "cmd_check_66_565"; value: 0}
		mapSet{map: "cmd_check_66_56"; value: 0}
		mapSet{map: "cmd_check_66_5"; value: 0}
	}
	if $direction_U > 0 || $direction_D > 0 {
		if map(cmd_check_66_565) = [1, 10] {
			mapSet{map: "cmd_check_66_565"; value: 0}
		}
		if map(cmd_check_66_56) = [1, 10] {
			mapSet{map: "cmd_check_66_56"; value: 0}
		}
		if map(cmd_check_66_5) = [1, 10] {
			mapSet{map: "cmd_check_66_5"; value: 0}
		}
	}

	# Decrease timers
	if map(cmd_66) > 0 {mapAdd{map: "cmd_66"; value: -1}}
	if map(cmd_check_66_565) > 0 {mapAdd{map: "cmd_check_66_565"; value: -1}}
	if map(cmd_check_66_56) > 0 {mapAdd{map: "cmd_check_66_56"; value: -1}}
	if map(cmd_check_66_5) > 0 {mapAdd{map: "cmd_check_66_5"; value: -1}}

	# Check motion
	if map(cmd_check_66_565) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_66"; value: 1}
		}
	}
	if map(cmd_check_66_56) > 0 {
		if $direction_N {
			mapSet{map: "cmd_check_66_565"; value: map(cmd_check_66_56)} # Neutral does not reset timer
		}
	}
	if map(cmd_check_66_5) > 0 {
		if ifelse($check_reversed, $direction_B = 1, $direction_F = 1) {
			mapSet{map: "cmd_check_66_56"; value: 15}
		}
	}
	if $direction_N {
		mapSet{map: "cmd_check_66_5"; value: 15}
	}


#------------------------------------------------------------------------ BACK DASH ---------------------------------------------------------------------------

	# Cancel  input if player intention is a different motion
	if ifelse($check_reversed, $direction_any_B > 0, $direction_any_F > 0) {
		mapSet{map: "cmd_44"; value: 0}
		mapSet{map: "cmd_check_44_545"; value: 0}
		mapSet{map: "cmd_check_44_54"; value: 0}
		mapSet{map: "cmd_check_44_5"; value: 0}
	}
	if $direction_U > 0 || $direction_D > 0 {
		if map(cmd_check_44_545) = [1, 10] {
			mapSet{map: "cmd_check_44_545"; value: 0}
		}
		if map(cmd_check_44_54) = [1, 10] {
			mapSet{map: "cmd_check_44_54"; value: 0}
		}
		if map(cmd_check_44_5) = [1, 10] {
			mapSet{map: "cmd_check_44_5"; value: 0}
		}
	}

	# Decrease timers
	if map(cmd_44) > 0 {mapAdd{map: "cmd_44"; value: -1}}
	if map(cmd_check_44_545) > 0 {mapAdd{map: "cmd_check_44_545"; value: -1}}
	if map(cmd_check_44_54) > 0 {mapAdd{map: "cmd_check_44_54"; value: -1}}
	if map(cmd_check_44_5) > 0 {mapAdd{map: "cmd_check_44_5"; value: -1}}

	# Check motion
	if map(cmd_check_44_545) > 0 {
		if ifelse($check_reversed, $direction_F = 1, $direction_B = 1) {
			mapSet{map: "cmd_44"; value: 1}
		}
	}
	if map(cmd_check_44_54) > 0 {
		if $direction_N {
			mapSet{map: "cmd_check_44_545"; value: map(cmd_check_44_54)} # Neutral does not reset timer
		}
	}
	if map(cmd_check_44_5) > 0 {
		if ifelse($check_reversed, $direction_F = 1, $direction_B = 1) {
			mapSet{map: "cmd_check_44_54"; value: 15}
		}
	}
	if $direction_N {
		mapSet{map: "cmd_check_44_5"; value: 15}
	}


#------------------------------------------------------------------------ HIGH JUMP ---------------------------------------------------------------------------

	# Decrease timers
	if map(cmd_highjump) > 0 {mapAdd{map: "cmd_highjump"; value: -1}}
	if map(cmd_check_highjump_52) > 0 {mapAdd{map: "cmd_check_highjump_52"; value: -1}}
	if map(cmd_check_highjump_5) > 0 {mapAdd{map: "cmd_check_highjump_5"; value: -1}}

	# Check motion
	if map(cmd_check_highjump_52) > 0 {
		if $direction_any_U = 1 {
			mapSet{map: "cmd_highjump"; value: 2}
			# Cannot normally jump directly from crouching so this one buffers one frame longer than usual
			# Maybe update dashes and jumps to be buffered too
		}
	}
	if map(cmd_check_highjump_5) > 0 {
		if $direction_any_D = 1 {
			mapSet{map: "cmd_check_highjump_52"; value: 15} # 16 for KOF2002, 12 for MvC1 normal speed
		}
	}
	if $direction_any_D < 0 {
		mapSet{map: "cmd_check_highjump_5"; value: 10}
	}


#--------------------------------------------------------------------- FORWARD AIR DASH -----------------------------------------------------------------------

	# Cancel  input if player intention is a different motion
	if ifelse($check_reversed, $direction_any_F > 0, $direction_any_B > 0) {
		mapSet{map: "cmd_air66"; value: 0}
		mapSet{map: "cmd_check_air66_565"; value: 0}
		mapSet{map: "cmd_check_air66_56"; value: 0}
		mapSet{map: "cmd_check_air66_5"; value: 0}
	}
	if $direction_U > 0 || $direction_D > 0 {
		if map(cmd_check_air66_565) = [1, 10] {
			mapSet{map: "cmd_check_air66_565"; value: 0}
		}
		if map(cmd_check_air66_56) = [1, 10] {
			mapSet{map: "cmd_check_air66_56"; value: 0}
		}
		if map(cmd_check_air66_5) = [1, 10] {
			mapSet{map: "cmd_check_air66_5"; value: 0}
		}
	}

	# Decrease timers
	if map(cmd_air66) > 0 {mapAdd{map: "cmd_air66"; value: -1}}
	if map(cmd_check_air66_565) > 0 {mapAdd{map: "cmd_check_air66_565"; value: -1}}
	if map(cmd_check_air66_56) > 0 {mapAdd{map: "cmd_check_air66_56"; value: -1}}
	if map(cmd_check_air66_5) > 0 {mapAdd{map: "cmd_check_air66_5"; value: -1}}

	# Check motion
	if map(cmd_check_air66_565) > 0 {
		if ifelse($check_reversed, $direction_any_B = 1, $direction_any_F = 1) {
			mapSet{map: "cmd_air66"; value: 1}
		}
	}
	if map(cmd_check_air66_56) > 0 {
		if $direction_N {
			mapSet{map: "cmd_check_air66_565"; value: map(cmd_check_air66_56)} # Neutral does not reset timer
		}
	}
	if map(cmd_check_air66_5) > 0 {
		if ifelse($check_reversed, $direction_any_B = 1, $direction_any_F = 1) {
			mapSet{map: "cmd_check_air66_56"; value: 15}
		}
	}
	if $direction_N {
		mapSet{map: "cmd_check_air66_5"; value: 15}
	}


#---------------------------------------------------------------------- BACK AIR DASH -------------------------------------------------------------------------

	# Cancel  input if player intention is a different motion
	if ifelse($check_reversed, $direction_any_B > 0, $direction_any_F > 0) {
		mapSet{map: "cmd_air44"; value: 0}
		mapSet{map: "cmd_check_air44_545"; value: 0}
		mapSet{map: "cmd_check_air44_54"; value: 0}
		mapSet{map: "cmd_check_air44_5"; value: 0}
	}
	if $direction_U > 0 || $direction_D > 0 {
		if map(cmd_check_air44_545) = [1, 10] {
			mapSet{map: "cmd_check_air44_545"; value: 0}
		}
		if map(cmd_check_air44_54) = [1, 10] {
			mapSet{map: "cmd_check_air44_54"; value: 0}
		}
		if map(cmd_check_air44_5) = [1, 10] {
			mapSet{map: "cmd_check_air44_5"; value: 0}
		}
	}

	# Decrease timers
	if map(cmd_air44) > 0 {mapAdd{map: "cmd_air44"; value: -1}}
	if map(cmd_check_air44_545) > 0 {mapAdd{map: "cmd_check_air44_545"; value: -1}}
	if map(cmd_check_air44_54) > 0 {mapAdd{map: "cmd_check_air44_54"; value: -1}}
	if map(cmd_check_air44_5) > 0 {mapAdd{map: "cmd_check_air44_5"; value: -1}}

	# Check motion
	if map(cmd_check_air44_545) > 0 {
		if ifelse($check_reversed, $direction_any_F = 1, $direction_any_B = 1) {
			mapSet{map: "cmd_air44"; value: 1}
		}
	}
	if map(cmd_check_air44_54) > 0 {
		if $direction_N {
			mapSet{map: "cmd_check_air44_545"; value: map(cmd_check_air44_54)} # Neutral does not reset timer
		}
	}
	if map(cmd_check_air44_5) > 0 {
		if ifelse($check_reversed, $direction_any_F = 1, $direction_any_B = 1) {
			mapSet{map: "cmd_check_air44_54"; value: 15}
		}
	}
	if $direction_N {
		mapSet{map: "cmd_check_air44_5"; value: 15}
	}


#====================================================================< CHARGE MECHANICS >======================================================================

	# Define how many frames constitute a full charge
	let charge_time = 45;

	# Toggle charge partitioning
	# Not actually accurate to SF3
	# Here it makes the charge timer count down instead of resetting instantly when the direction is released
	let charge_partition = 1;

	# Back Charge Decrease
	if map(cmd_charge4) > 0 {
		if (!$check_reversed && ($direction_any_B < 0 || $direction_any_F > 0)) || ($check_reversed && ($direction_any_B > 0 || $direction_any_F < 0)) {
			if $charge_partition {
				mapAdd{map: "cmd_charge4"; value: -1}
			} else {
				mapSet{map: "cmd_charge4"; value: 0}
			}
		}
	}

	# Back Charge Increase
	if map(cmd_charge4) < $charge_time {
		if (!$check_reversed && $direction_any_B > 0 && $direction_any_F < 0) || ($check_reversed && $direction_any_B < 0 && $direction_any_F > 0) {
			if map(customcombo) {
				mapSet{map: "cmd_charge4"; value: $charge_time}
			} else {
				mapAdd{map: "cmd_charge4"; value: 1}
			}
		}
	}

	# Down Charge Decrease
	if map(cmd_charge2) > 0 && $direction_any_D < 0 {
		if $charge_partition {
			mapAdd{map: "cmd_charge2"; value: -1}
		} else {
			mapSet{map: "cmd_charge2"; value: 0}
		}
	}

	# Down Charge Increase
	if map(cmd_charge2) < $charge_time && $direction_any_D > 0 {
		if map(customcombo) {
			mapSet{map: "cmd_charge2"; value: $charge_time}
		} else {
			mapAdd{map: "cmd_charge2"; value: 1}
		}
	}

	# Safety
	if map(cmd_charge2) < 0 {
		mapSet{map: "cmd_charge2"; value: 0}
	}
	if map(cmd_charge4) < 0 {
		mapSet{map: "cmd_charge4"; value: 0}
	}


#=========================================================================< OTHER >============================================================================

	# Disable input erasers
	if map(cmd_erase_motion_super) {mapSet{map: "cmd_erase_motion_super"; value: 0}}
	if map(cmd_erase_motion_special) {mapSet{map: "cmd_erase_motion_special"; value: 0}}
	if map(cmd_erase_completed) {mapSet{map: "cmd_erase_completed"; value: 0}}

}
