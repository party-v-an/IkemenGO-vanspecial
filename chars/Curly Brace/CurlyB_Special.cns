;------------------------------------------------------------------------------
;Dash Kick
[Statedef 702]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 702
velset = 8,-14.7

[state 300]
type = gravity
trigger1 = 1

[state 300]
type = playsnd
trigger1 = time = 1
value = s210,2

[State 410, 1]
type = PlaySnd
trigger1 = animelemTime(5) = 0
value = 2,23

[State 680, Veladd]
type = Veladd
trigger1 = AnimElem = 5
x = 12.5
y = 7.5

[State 200, 1]
type = HitDef
triggerall = p2statetype = A
trigger1 = !movecontact
attr = S, SP
hitflag = MAF
guardflag = MA
animtype = hard
damage    = 50,25
priority = 4, Hit
getpower = (0.5+0.1*fvar(22))*var(9)* 4   ,20
guardflag = A
pausetime = 12,15    ;  16,15
sparkno = -1;-1;s6402                      ;Spark anim no (Def: set above)
sparkxy = -65,-160; -65,-160;-65,-50; -40,-240
hitsound   = s1,48
guardsound = s1,28
guard.sparkno = s-1
ground.type = low
ground.slidetime = 19   
ground.hittime  = 19    
ground.velocity = - 3.5;,-5.6      +1*(var(47)<-600) +1.5*(var(47)<-900) +1.5*(var(47)<-1110)    -1.5*(enemynear,pos Y > -35)
air.velocity = -3,25
guard.velocity = - 5
airguard.velocity = -2.5,-4
;p1stateno = 713
ID = 702
fall = 0
air.fall = 1
fall.recover =1
fall.recovertime = 25
Ground.CornerPush.VelOff   = -11
Air.CornerPush.VelOff      = -11
Down.CornerPush.VelOff     = -11
Guard.CornerPush.VelOff    = -11
yaccel = 1.45
;---------------------------
envshake.time = 6
envshake.ampl = 5
envshake.freq = 40

[State 200, 1]
type = HitDef
triggerall = !p2statetype = A
trigger1 = !movecontact
attr = S, SP
hitflag = MAF
guardflag = MA
animtype = hard
damage    = 50,25
priority = 4, Hit
getpower = (0.5+0.1*fvar(22))*var(9)* 4   ,20
guardflag = A
pausetime = 12,15    ;  16,15
sparkno = -1;-1;s6402                      ;Spark anim no (Def: set above)
sparkxy = -65,-160; -65,-160;-65,-50; -40,-240
hitsound   = s1,23
guardsound = s1,28
guard.sparkno = s-1
ground.type = low
ground.slidetime = 19   
ground.hittime  = 19    
ground.velocity = - 3.5;,-5.6      +1*(var(47)<-600) +1.5*(var(47)<-900) +1.5*(var(47)<-1110)    -1.5*(enemynear,pos Y > -35)
air.velocity = -35,1
guard.velocity = - 5
airguard.velocity = -2.5,-4
;p1stateno = 713
ID = 702
fall = 0
air.fall = 1
fall.recover =1
fall.recovertime = 25
Ground.CornerPush.VelOff   = -11
Air.CornerPush.VelOff      = -11
Down.CornerPush.VelOff     = -11
Guard.CornerPush.VelOff    = -11
;---------------------------
envshake.time = 6
envshake.ampl = 5
envshake.freq = 40

[State -2, Drive increase]
type = varadd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
triggerall = roundstate=2
trigger1 = movecontact
v = 50
value = 8
persistent = 0

[State 1315, effect]
type = helper
triggerAll = NumTarget;Enemy
trigger1 = (HitCount = 1) && (MoveHit)
name ="Spark FX"
ID =8810
stateno =8810
Postype = p2
pos=(target,const(size.ground.front)-75),-120
scale = 1.8,1.8
Ownpal = 1
SprPriority = 4
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State 8090, G-FX]
type = Helper
trigger1 = moveguarded && numtarget
pos = 10,enemy,const(size.mid.pos.y)
postype = p2
stateno = 8090
helpertype = normal
sprpriority = 99
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999

[State 0, TargetState]  
type = TargetState
trigger1 = Numtarget(702) && p2statetype = A
trigger1 = movehit
value = 641
ID = 702
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = MoveContact = 1
value = 713
ctrl = 0

[state stop]
type = changestate
trigger1 = pos Y >= 0 && vel Y > 0
value = 703

;------------------------------------------------------------------------------
;Dive Kick (Air)
[Statedef 704]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 712
velset = 0,0

[state 300]
type = gravity
trigger1 = 1

[state 300]
type = playsnd
trigger1 = time = 1
value = s210,2

[State 410, 1]
type = PlaySnd
trigger1 = animelemTime(3) = 0
value = 2,23

[State 680, Veladd]
type = Veladd
trigger1 = AnimElem = 3
x = 20
y = 25

[State 200, 1]
type = HitDef
triggerall = p2statetype = A
trigger1 = !movecontact
attr = S, SP
hitflag = MAF
guardflag = MA
animtype = hard
damage    = 50,25
priority = 4, Hit
getpower = (0.5+0.1*fvar(22))*var(9)* 4   ,20
guardflag = A
pausetime = 13,15    ;  16,15
sparkno = -1;-1;s6402                      ;Spark anim no (Def: set above)
sparkxy = -65,-160; -65,-160;-65,-50; -40,-240
hitsound   = s1,48
guardsound = s1,28
guard.sparkno = s-1
ground.type = low
ground.slidetime = 19   
ground.hittime  = 19    
ground.velocity = - 3.5;,-5.6      +1*(var(47)<-600) +1.5*(var(47)<-900) +1.5*(var(47)<-1110)    -1.5*(enemynear,pos Y > -35)
air.velocity = -3,25
guard.velocity = - 5
air.guard.velocity = -2.5,-4
ID = 704
fall = 0
air.fall = 1
fall.recover =1
fall.recovertime = 25
Ground.CornerPush.VelOff   = -11
Air.CornerPush.VelOff      = -11
Down.CornerPush.VelOff     = -11
Guard.CornerPush.VelOff    = -11
yaccel = 1.45
;---------------------------
envshake.time = 6
envshake.ampl = 5
envshake.freq = 40

[State 200, 1]
type = HitDef
triggerall = !p2statetype = A
trigger1 = !movecontact
attr = S, SP
hitflag = MAF
guardflag = MA
animtype = hard
damage    = 50,25
priority = 4, Hit
getpower = (0.5+0.1*fvar(22))*var(9)* 4   ,20
guardflag = A
pausetime = 12,15    ;  16,15
sparkno = -1;-1;s6402                      ;Spark anim no (Def: set above)
sparkxy = -65,-160; -65,-160;-65,-50; -40,-240
hitsound   = s1,23
guardsound = s1,28
guard.sparkno = s-1
ground.type = low
ground.slidetime = 19   
ground.hittime  = 19    
ground.velocity = - 3.5;,-5.6      +1*(var(47)<-600) +1.5*(var(47)<-900) +1.5*(var(47)<-1110)    -1.5*(enemynear,pos Y > -35)
air.velocity = -35,1
guard.velocity = - 5
air.guard.velocity = -2.5,-4
ID = 704
fall = 0
air.fall = 1
fall.recover =1
fall.recovertime = 25
Ground.CornerPush.VelOff   = -11
Air.CornerPush.VelOff      = -11
Down.CornerPush.VelOff     = -11
Guard.CornerPush.VelOff    = -11
;---------------------------
envshake.time = 6
envshake.ampl = 5
envshake.freq = 40

[State -2, Drive increase]
type = varadd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
triggerall = roundstate=2
trigger1 = movecontact
v = 50
value = 8
persistent = 0

[State 1315, effect]
type = helper
triggerAll = NumTarget;Enemy
trigger1 = (HitCount = 1) && (MoveHit)
name ="Spark FX"
ID =8810
stateno =8810
Postype = p2
pos=(target,const(size.ground.front)-75),-120
scale = 1.8,1.8
Ownpal = 1
SprPriority = 4
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State 8090, G-FX]
type = Helper
trigger1 = moveguarded && numtarget
pos = 10,enemy,const(size.mid.pos.y)
postype = p2
stateno = 8090
helpertype = normal
sprpriority = 99
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999

[State 0, TargetState]  
type = TargetState
trigger1 = Numtarget(702) && p2statetype = A
trigger1 = movehit
value = 641
ID = 702
;ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = MoveContact
x = 0
y = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = MoveContact = 1
value = 713
ctrl = 0

[state stop]
type = changestate
trigger1 = pos Y >= 0 && vel Y > 0
value = 703
;---------------------------------------------------------------------------
; Dive Kick Bounce State
[Statedef 713]
type    = A
movetype= A
physics = N
ctrl = 0
velset = -6,-10
anim = 713
sprpriority = 1

[State 0]
type = ctrlset
trigger1 = animelem = 6
value = 1

[State 0]
type = veladd
trigger1 = 1
y = 1.55

[State 105]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52
ctrl = 0
;---------------------------------------------------------------------------
; Jump Land
[Statedef 703]
type    = S
physics = S
ctrl = 0
anim = 703

[State 230, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,81

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light kick
; CNS difficulty: easy
[Statedef 705]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 11
ctrl = 0
anim = 705
sprpriority = 2

[State 430, 1]
type = PlaySnd
trigger1 = animelemtime(3) = 0
value = 1,114;1,26

[State 240, Veladd]
type = Veladd
trigger1 =animelem=4, >=0 && animelem=6, <0
x = 0.85

[State 240, Veladd]
type = Veladd
trigger1 =animelem=10, >=0 && animelem=13, <0
x = 1.05

;[State 0]
;type = Explod
;trigger1 = animelem = 5
;ID = 11100
;anim = 11100
;postype = p1
;pos = 99,-90
;bindtime = 99999
;removetime = -2
;sprpriority = 2
;ownpal = 1
;scale = 1.5,1.5

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 5
value = s200,2

[State 851, HitDef]
type = HitDef
trigger1 = animelemtime(5) = 0
attr = S, SP
hitflag = MAF
guardflag = MA
animtype = hard
damage = 17,0
pausetime = 10,12
guard.pausetime = 12,12
sparkno = -1                      ;Spark anim no (Def: set above)
guard.sparkno = -1;s6406 ; 6405
sparkxy = -65,-160; -65,-90; -40,-148
hitsound   = s1,52
guardsound = s1,28
ground.velocity = -4,-19
air.velocity = -2,-11.5
airguard.velocity = -2, -4
fall = 1
fall.recover = 0
fall.recovertime = 55
fall.envshake.time = 8
fall.envshake.freq = 40
fall.envshake.ampl = -4
envshake.time = 7
getpower = 40,5
givepower = 20,5

;[State 851, HitDef]
;type = HitDef
;trigger1 = animelemtime(6) = 0
;attr = S, SP
;hitflag = MAFDE
;guardflag = MA
;animtype = hard
;damage = 20
;pausetime = 12,12
;guard.pausetime = 12,12
;pausetime = 12,12
;sparkno = -1                      ;Spark anim no (Def: set above)
;guard.sparkno = s6406 ; 6405
;sparkxy = -65,-160; -65,-90; -40,-148
;hitsound   = s1,52
;guardsound = s1,28
;ground.velocity = 0,-30
;air.velocity = -2,-28.5
;airguard.velocity = -2, -4
;fall = 1
;fall.recover = 0
;fall.recovertime = 55
;fall.envshake.time = 12
;fall.envshake.freq = 80
;fall.envshake.ampl = -4
;envshake.time = 7
;getpower = 40,5
;givepower = 20,5

[State -2, Drive increase]
type = varadd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
triggerall = roundstate=2
trigger1 = movecontact
v = 50
value = 8
persistent = 0

[State 1315, effect]
type = helper
triggerAll = NumTarget;Enemy
trigger1 = (HitCount = 1) && (MoveHit)
name ="Spark FX"
ID =8810
stateno =8810
Postype = p2
pos=(target,const(size.ground.front)-75),-120
scale = 1.8,1.8
Ownpal = 1
SprPriority = 4
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State 8090, G-FX]
type = Helper
trigger1 = moveguarded && numtarget
pos = 10,enemy,const(size.mid.pos.y)
postype = p2
stateno = 8090
helpertype = normal
sprpriority = 99
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Standing Strong Kick
; CNS difficulty: easy
[Statedef 706]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 11
ctrl = 0
anim = 706
sprpriority = 2

[State 430, 1]
type = PlaySnd
trigger1 = animelemtime(3) = 0
value = 1,114;2,24

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
x = 10

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 0

;[State 0]
;type = Explod
;trigger1 = animelem = 5
;ID = 12000
;anim = 12000
;postype = p1
;pos = 99,-90
;bindtime = 99999
;removetime = -2
;sprpriority = 2
;ownpal = 1
;scale = 1.5,1.5

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 3
value = s200,2

[State 851, HitDef]
type = HitDef
trigger1 = animelemtime(3) = 0
attr = S, SP
hitflag = MAFDE
guardflag = MA
animtype = hard
damage = 15,0
pausetime = 10,12
guard.pausetime = 12,12
sparkno = -1;s6088                      ;Spark anim no (Def: set above)
guard.sparkno = -1;s6406
sparkxy = -65,-160; -65,-90; -40,-148
hitsound   = s1,23
guardsound = s1,28
ground.type       = High
ground.slidetime  = 13
ground.hittime    = 14
ground.velocity   = -3.8,-25.4
guard.velocity    = -3
air.velocity      = -2.5,-8.2
airguard.velocity = -3,-2.5
fall              = 1
air.juggle        = 6
fall.recovertime = 55
fall.envshake.time = 8
fall.envshake.freq = 40
fall.envshake.ampl = -4
envshake.time = 7
getpower = 60,5
givepower = 20,5

[State -2, Drive increase]
type = varadd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
triggerall = roundstate=2
trigger1 = movecontact
v = 50
value = 8
persistent = 0

[State 1315, effect]
type = helper
triggerAll = NumTarget;Enemy
trigger1 = (HitCount = 1) && (MoveHit)
name ="Spark FX"
ID =8810
stateno =8810
Postype = p2
pos=(target,const(size.ground.front)-75),-120
scale = 1.8,1.8
Ownpal = 1
SprPriority = 4
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State 8090, G-FX]
type = Helper
trigger1 = moveguarded && numtarget
pos = 10,enemy,const(size.mid.pos.y)
postype = p2
stateno = 8090
helpertype = normal
sprpriority = 99
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999

[State 200, Spark]
type = explod
trigger1 = moveguarded
anim = 6407
id=6407
postype = p1
Pos = P2bodydist x + 100,P2bodydist y - 180
pausemovetime = 999
supermovetime = 999
ownpal = 1
scale = 1.3,1.3
sprpriority = 9
persistent = 1
ignorehitpause = 1

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Hit :P2
[Statedef 302]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025,Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 5050

[State 1025]
type = null;Turn
trigger1 = Time = 0

[State 1025]
type = ScreenBound
trigger1 = HitShakeOver = 1
value = 1
movecamera = 1,0

[State 1025] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

[State 1025,Wall Hit]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1026
;----------------------------------------------
;Dash(Air)
;---------------------------------------------
[Statedef 707]
type    = A                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = A                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 707                      ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, AfterImage]
type = AfterImage
trigger1 = animelemTime(2) >= 0
time = 40
length = 10
TimeGap = 2
Framegap = 2
palbright = 12,12,12
palcontrast = 256,256,256
palpostbright = 0,0,0
paladd = 0,70,248
palmul = .3,.3,.3
trans = add1

[State 1000, fx]
Type = Explod
Triggerall = timemod = 1,0
trigger1 = animelem = 2
ID = 7805
anim = 7805
postype = p1
pos = -5,-70
bindtime = 99999
removetime = -2
sprpriority = 9
ownpal = 1
scale = 1.3,1.3

[State 210,SND]
type = PlaySnd
trigger1 = animelemTime(2) = 0
value = s200,6

[State 110, 1]
type = VelSet
trigger1 = movecontact
x = 0

;--------------------ËÙ¶È
[state a]
type = velset
trigger1 = animelemTime(2) >= 0 && animelemTime(8) <= 0
y = 0
x = 10
;--------------------ËÙ¶È
[state a]
type = veladd
trigger1 = animelem = 2
x = 5   + 7*(EnemyNear,movetype != H) + 9*(EnemyNear,movetype = H)*0.01*(p2dist x)*(0.4+0.3*(p2dist x<150)+0.3*(p2dist x<250))
;--------------------ËÙ¶È
[state a]
type = posadd
trigger1 = AnimElem = 2,>= 0 && AnimElem = 8,< 0
x = 30.5

[State 110, 1]
type = VelSet
trigger1 = Animelemtime(9) = 0
x = 0

[State 110, 1]
type = VelSet
trigger1 = movecontact
x = 0

[State 110, 1]
type = Veladd
trigger1 = movecontact
x = 0


[state 300]
type = gravity
triggerall = Animelemtime(9) >= 0
trigger1 = 1

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = hard
damage    = 30*(1+0.1*fvar(22)),15
priority = 4, Hit
getpower = (0.5+0.1*fvar(22))*var(9)* 4   ,20
guardflag = M
pausetime = 14,15    ;  16,15
sparkno = -1;s6402                      ;Spark anim no (Def: set above)
sparkxy = -65,-160; -65,-160;-65,-50; -40,-240
hitsound   = s1,23
guardsound = s1,28
guard.sparkno = s-1
ground.type = low
ground.slidetime = 19   
ground.hittime  = 19
ground.velocity = - 3.5;,-5.6      +1*(var(47)<-600) +1.5*(var(47)<-900) +1.5*(var(47)<-1110)    -1.5*(enemynear,pos Y > -35)
air.velocity = -2.2,-4.1         +1*(var(47)<-600) +1.5*(var(47)<-900) +1.5*(var(47)<-1110)    -1.5*(enemynear,pos Y > -35)
guard.velocity = - 5
air.guard.velocity = -2.5,-4
ID = 240
fall = 0
air.fall = 1
fall.recover =1
fall.recovertime = 25
Ground.CornerPush.VelOff   = -11
Air.CornerPush.VelOff      = -11
Down.CornerPush.VelOff     = -11
Guard.CornerPush.VelOff    = -11
yaccel = 0.45
;---------------------------
envshake.time = 6
envshake.ampl = 5
envshake.freq = 40              ;Time before opponent regains control in air

[State 200, Spark]
type = explod
trigger1 = movehit=1
anim = 6802
id=6802
postype = p2
Pos = -25, -160
pausemovetime = 999
supermovetime = 999
ownpal = 1
scale = 1.3,1.3
sprpriority = 9
persistent = 0
ignorehitpause = 1

[State 200, Spark]
type = explod
trigger1 = movehit=1
anim = 6600+random%3
id=6600
postype = p2
Pos = -25, -160
pausemovetime = 999
supermovetime = 999
ownpal = 1
scale = 1.7,1.7
sprpriority = 9
persistent = 0
ignorehitpause = 1


[State 200, 2]
type = PlaySnd
trigger1 = animelemTime(2) = 0
value = 0, 0

;----------------------------------------------
;Dash(Ground)
;---------------------------------------------
[Statedef 708]
type    = U                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 708                      ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, AfterImage]
type = AfterImage
trigger1 = animelemTime(2) = 0
time = 40
length = 10
TimeGap = 2
Framegap = 2
palbright = 12,12,12
palcontrast = 256,256,256
palpostbright = 0,0,0
paladd = 0,70,248
palmul = .3,.3,.3
trans = add1

;[State 8000, flash]
;type = PalFX
;trigger1 = time =0 
;add = 0,50,256
;sinadd = 110,110,110,8
;time = 40

[State 1000, fx]
Type = Explod
Triggerall = timemod = 1,0
trigger1 = animelem = 2
ID = 7804
anim = 7804
postype = p1
pos = -10,-90
bindtime = 99999
removetime = -2
sprpriority = 9
ownpal = 1
scale = 1.3,1.3

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 2
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = N         ;A,C,S,N

[State 0, NotHitBy]
type = NotHitBy
trigger1 =time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 4


[State 210,SND]
type = PlaySnd
trigger1 = animelem = 2
value = s200,6

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 23.5
y = -13.4

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 9
x = 2
y = -6.4

[State 830, veladd]
type = VelMul
trigger1 = vel x !=[-0.1,0.1]
trigger1 = (EnemyNear(var(55)),pos x - pos x)*facing  < 45
x = 1.1 -0.1*((EnemyNear(var(55)),pos x - pos x)*facing  < 30)  -0.1*((EnemyNear(var(55)),pos x - pos x)*facing  < 15)


[State 0.hitdef]
type = HitDef
;trigger1 = enemynear,movetype != A
trigger1 = !movecontact
priority = 4, Hit;2 for ??, 3 for M/H att, 4 for L att, 5 for super, 6 fot hyper
attr = A,NA
hitflag = MAF
guardflag = M
animtype = Hard
damage = 45
pausetime = 12,14
guard.pausetime = 3,3
sparkno = -1;s6401+(random%2)                      ;Spark anim no (Def: set above)
guard.sparkno = -1;s6406
sparkxy = -65,-160; -65,-50; -40,-148
hitsound   = s1,23
guardsound = s1,0
ground.slidetime = 22;+fvar(22)
ground.hittime  = 22;+fvar(22)
ground.velocity = -8.5,-22.2
air.velocity = -8.5,-22.2
guard.velocity = - 3
;air.guard.velocity = -1.5,-4
p2facing = 1
snap = 31,-15
ID = 210
fall = 1
air.fall = 1
fall.recovertime = 40
Ground.CornerPush.VelOff   = -5
;Air.CornerPush.VelOff      = -5
;Down.CornerPush.VelOff     = -5
;Guard.CornerPush.VelOff    = -5
yaccel = 0.75

[State 115, Ctrl]
type = CtrlSet
trigger1 = Animelemtime(12) = 0
value = 1

[State 115, veladd]
type = VelAdd
trigger1 = animelemtime(11) > 0
y = 1.85

[State -2, Drive increase]
type = varadd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
triggerall = roundstate=2
trigger1 = movecontact
ignorehitpause = 1
v = 50
value = 8
persistent = 0

[State 1315, effect]
type = helper
triggerAll = NumTarget;Enemy
trigger1 = (HitCount = 1) && (MoveHit)
name ="Spark FX"
ID =8810
stateno =8810
Postype = p2
pos=(target,const(size.ground.front)-75),-170
scale = 1.8,1.8
Ownpal = 1
SprPriority = 4
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State 8090, G-FX]
type = Helper
trigger1 = moveguarded && numtarget
pos = 10,enemy,const(size.mid.pos.y)
postype = p2
stateno = 8090
helpertype = normal
sprpriority = 99
ownpal = 1
persistent = 0
ignorehitpause = 1
supermovetime = 9999999
pausemovetime = 9999999

[State 0,ChangeState]
type = ChangeState
trigger1 = time >= 14
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52
;----------------------------------------------
;EX Dash(Air)
;---------------------------------------------
[Statedef 715]
type    = A                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = A                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 715                      ;Change animation (Def: no change)
poweradd = -500                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 1000, EX-SND]
type=PlaySnd
trigger1 =!time
value=100,7
channel=3

[State 1000, fx]
Type = Explod
Trigger1 = animelemtime(1) = 0
Anim = 7501
ID = 7501
Postype = p1
pos=ceil(5*const(size.xscale)), ceil(-236*const(size.yscale))
scale= 1,1
Ownpal = 1
SprPriority = 9
removeongethit = 1

[State 1000, fx]
Type = Explod
Triggerall = timemod = 1,0
trigger1 = animelem = 2
ID = 7805
anim = 7805
postype = p1
pos = -25,-50
bindtime = 99999
removetime = -2
sprpriority = 9
ownpal = 1
scale = 1.6,1.6

[State 1500, Žc‘œ]
type = AfterImage
trigger1= time = 10
time = 40
length = 10
TimeGap = 2
Framegap = 2
PalBright = 80,80,256
PalContrast = 128,128,250
palpostbright = -80,-80,-80
paladd = 0,70,248
palmul = .3,.3,.3
trans = add1

[State 8000, flash]
type = PalFX
trigger1 = gametime % 2 = 0 
add = 0,50,256
sinadd = 110,110,110,8
time = 1

[State 210,SND]
type = PlaySnd
trigger1 = animelemTime(2) = 0
value = s200,6

[State 110, 1]
type = VelSet
trigger1 = movecontact
x = 0

;--------------------ËÙ¶È
[state a]
type = velset
trigger1 = animelemTime(2) >= 0 && animelemTime(8) <= 0
y = 0
x = 10
;--------------------ËÙ¶È
[state a]
type = veladd
trigger1 = animelem = 2
x = 5   + 7*(EnemyNear,movetype != H) + 9*(EnemyNear,movetype = H)*0.01*(p2dist x)*(0.4+0.3*(p2dist x<150)+0.3*(p2dist x<250))
;--------------------ËÙ¶È
[state a]
type = posadd
trigger1 = AnimElem = 2,>= 0 && AnimElem = 8,< 0
x = 35.5

[State 110, 1]
type = VelSet
trigger1 = Animelemtime(10) = 0
x = 0

[State 110, 1]
type = VelSet
trigger1 = movecontact
x = 0

[State 110, 1]
type = Veladd
trigger1 = movecontact
x = 0

[state 300]
type = gravity
triggerall = Animelemtime(10) >= 0
trigger1 = 1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2 || AnimElem = 4 || AnimElem = 5 || AnimElem = 7 || AnimElem = 8
attr = S, NA
animtype  = hard
damage    = 30*(1+0.1*fvar(22)),15
priority = 4, Hit
getpower = (0.5+0.1*fvar(22))*var(9)* 4   ,20
guardflag = M
pausetime = 1,8    ;  16,15
sparkno = -1;s6402                      ;Spark anim no (Def: set above)
sparkxy = -65,-160; -65,-160;-65,-50; -40,-240
hitsound   = s1,23
guardsound = s1,28
guard.sparkno = s-1
ground.type = low
ground.slidetime = 19   
ground.hittime  = 19
ground.velocity = - 3.5;,-5.6      +1*(var(47)<-600) +1.5*(var(47)<-900) +1.5*(var(47)<-1110)    -1.5*(enemynear,pos Y > -35)
air.velocity = -2.2,-4.1         +1*(var(47)<-600) +1.5*(var(47)<-900) +1.5*(var(47)<-1110)    -1.5*(enemynear,pos Y > -35)
guard.velocity = - 5
air.guard.velocity = -2.5,-4
ID = 240
ground.velocity=-8,-2.5
guard.velocity=-7
air.velocity = -8,-2.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recover = 0
air.fall = 1
;---------------------------
envshake.time = 6
envshake.ampl = 5
envshake.freq = 40              ;Time before opponent regains control in air

[State 200, Spark]
type = explod
trigger1 = movehit=1
anim = 6802
id=6802
postype = p2
Pos = -25, -160
pausemovetime = 999
supermovetime = 999
ownpal = 1
scale = 1.3,1.3
sprpriority = 9
persistent = 0
ignorehitpause = 1

[State 200, Spark]
type = explod
trigger1 = movehit=1
anim = 6600+random%3
id=6600
postype = p2
Pos = -25, -160
pausemovetime = 999
supermovetime = 999
ownpal = 1
scale = 1.7,1.7
sprpriority = 9
persistent = 0
ignorehitpause = 1

[State 200, 2]
type = PlaySnd
trigger1 = animelemTime(2) = 0
value = 0, 0
;----------------------------------------------
;anti air slash
;---------------------------------------------
[Statedef 716]
type    = U                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 716                      ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 0, AfterImage]
type = AfterImage
trigger1 = animelemTime(4) = 0
time = 40
length = 10
TimeGap = 2
Framegap = 2
palbright = 12,12,12
palcontrast = 256,256,256
palpostbright = 0,0,0
paladd = 0,70,248
palmul = .3,.3,.3
trans = add1

;[State 8000, flash]
;type = PalFX
;trigger1 = time =0 
;add = 0,50,256
;sinadd = 110,110,110,8
;time = 40

[State 1000, fx]
Type = Explod
trigger1 = animelem = 5
ID = 7602
anim = 7602
postype = p1
pos = 0,0
bindtime = 99999
removetime = -2
sprpriority = 2
ownpal = 1
scale = 1.5,1.5

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = N         ;A,C,S,N

[State 0, NotHitBy]
type = NotHitBy
trigger1 =time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 4

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 5
value = s200,6

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 20.5
y = -9.4

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 10
x = 0.5

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 13
x = 8
y = -2.4

[State 830, veladd]
type = VelMul
trigger1 = vel x !=[-0.1,0.1]
trigger1 = (EnemyNear(var(55)),pos x - pos x)*facing  < 45
x = 1.1 -0.1*((EnemyNear(var(55)),pos x - pos x)*facing  < 30)  -0.1*((EnemyNear(var(55)),pos x - pos x)*facing  < 15)

[State 0.hitdef]
type = HitDef
trigger1= time = 0
attr = S, SA
damage = 16
hitflag = MAF
guardflag = M
priority = 4
pausetime = 8,10
sparkno = -1
sparkxy = -5,-50
hitsound   = S1,71
guardsound = S6,0
ground.type = High
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -30,-20;-4.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -5.5,-8
air.type = High
air.velocity = -30,-15
air.hittime = 9
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .75
air.fall = 1
fall = 1
envshake.time = 10
envshake.ampl = Ifelse(random<=500,-4,4)
;p2stateno = 717
air.juggle = 15
getpower = 100,20

;[State 0, Helper]
;type = Helper
;triggerall = var(51) = 1
;triggerall = numhelper(1351) = 0
;trigger1 = (HitCount = 1) && (MoveHit) ;movecontact
;stateno=1351
;id = 1351
;ownpal=1
;pos = 120,-128
;postype = p1
;persistent = 0
;keyctrl = 0
;ownpal = 1

;[State 716, TargetState]
;type = TargetState
;trigger1 = movehit
;trigger1 = numtarget
;trigger1 = !(target, ishelper)
;value = 717
;ID = 717
;ignorehitpause = 1
;persistent = 0

[State 713, ƒqƒbƒgƒXƒp[ƒN]
type = Helper
trigger1 = (HitCount = 1) && (MoveHit)
name ="Spark FX"
ID =8800
stateno =8800
Postype = p2
pos=(target,const(size.ground.front)-75),-120
scale = 1.8,1.8
Ownpal = 1
SprPriority = 4
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State 713,0]
type = Helper
trigger1 = (HitCount = 2) && (MoveHit)
name ="Spark FX"
ID =8800
stateno =8800
Postype = p2
pos=(target,const(size.ground.front)-75),-120
scale = 1.8,1.8
Ownpal = 1
SprPriority = 4
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State 713,0]
type = Helper
trigger1 = (HitCount = 3) && (MoveHit)
name ="Spark FX"
ID =8800
stateno =8800
Postype = p2
pos=(target,const(size.ground.front)-75),-170
scale = 1.8,1.8
Ownpal = 1
SprPriority = 4
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State 115, Ctrl]
type = CtrlSet
trigger1 = Animelemtime(15) = 0
value = 1

[State 115, veladd]
type = VelAdd
trigger1 = animelemtime(13) > 0
y = 1.85

[State 0,ChangeState]
type = ChangeState
trigger1 = time >= 65
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 52
;-------------------------------------
[Statedef 717]
type = A
movetype = H
physics = N
anim = ifelse(selfanimexist(5052),5052,5030)
velset = 0,0;-18, -8
 
[State 717, VelAdd]
type = VelAdd
trigger1 = (Pos Y < 0)
y = 0.35
 
[State 717, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 717]
type = ScreenBound
trigger1 = HitShakeOver = 1
value = 1
movecamera = 1,0
 
[State 717,wall bounce state]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1026

[State 717, ChangeState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100
;------------------
;Ex Machine gun Hammer(Star)
[Statedef 710]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= -500
ctrl = 0
velset = 0,0
anim = 710
sprpriority = 9
poweradd = -500

[State 210,SND]
type = PlaySnd
trigger1 = !time
value = 2,17
channel = 0
lowpriority =  1

[State 1000, fx]
Type = Explod
Trigger1 = animelemtime(1) = 0
Anim = 6028
ID = 6028
Postype = p1
Pos = 10,-190
scale = 1.5,1.5
Ownpal = 1
SprPriority = 10
bindtime = -1
removeongethit = 1
supermovetime = 33
pausemovetime = 33

[State 900, starting value]
type = VarSet
trigger1 = fvar(7)>=60;animelemtime(5) = 0
v = 710
value = 1

[State 900, time value]
type = VarAdd
trigger1 = time >= 1
fv = 7
value = 1
persistent = 1

[State 8000, flash]
type = PalFX
trigger1 = time =10 
add = 0,50,256
sinadd = 110,110,110,8
time = 40

; These change states control dash cancels and moving into the attack portion
[State 900, dash cancel back]
type = ChangeState
trigger1 = time >= 30 && command = "BB"
trigger2 = Ailevel>=1&&numenemy&&(enemynear,inguarddist)&&(enemynear,vel x>1)
value = 102
ctrl = 1
 
[State 900, dash cancel forward]
type = ChangeState
trigger1 = time >= 30 && command = "FF"
value = 100
ctrl = 1
 
[State 900, stopping early]
type = ChangeState
trigger1 = time >= 40 && !(command = "hold_a") && !(command = "hold_b")
trigger2 = Ailevel>=1&&numenemy&&(enemynear,inguarddist)&&Movetype=A
value = 711
 
[State 900,fully charged]
type = ChangeState
trigger1 = fvar(7)>=60
value = 711
;------------------------------------------------------------------------------
;Ex Machine gun Hammer(Hit)
[Statedef 711]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 711
sprpriority = -1
poweradd = 0

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 1,15
volume = 255

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 1
value = s1000,2

[State 711, hit]
type = HitDef
triggerall = var(710) = 1
trigger1 = AnimElem = 1
attr = S,NA
hitflag = MAF
affectteam = E
animtype = Light
damage    = 55,11
priority = 6, Hit
pausetime = 13, 14
sparkno = -1;s6402
guard.sparkno = -1;s6402
sparkxy = -65,-160
hitsound   = s1,25
;guardsound = S0,0
ground.type = Low
guardsound = s1,28
ground.type = High
animtype = Med
ground.type = High
ground.slidetime = 15
ground.hittime = 18
ground.velocity = -5, 10
air.velocity = -5, 10
fall = 0
air.fall = 1
fall.recover = 0
p2facing = 1
envshake.time = 5
envshake.freq = 90
envshake.ampl = -7
envshake.phase = 100
fall.xvelocity =0
fall.yvelocity =-2
fall.recover = 0
down.bounce =0
down.velocity = -15,-8
down.hittime = 32
guard.hittime = 2
id = 711
p2stateno = 266

[State 711, hit]
type = HitDef
triggerall = var(710) = 0
trigger1 = AnimElem = 1
attr = S, SA
animtype = light
guardflag = MA
hitflag = MAF
damage    = 25
priority = 6, Hit
pausetime = 13, 14
sparkno = -1;s6402
guard.sparkno = -1;s6402
sparkxy = -65,-160
hitsound   = s1,25
;guardsound = S0,0
ground.type = Low
guardsound = s1,28
ground.type = High
animtype = Med
ground.type = High
ground.slidetime = 15
ground.hittime = 18
ground.velocity = -5, 10
air.velocity = -5, 10
fall = 0
air.fall = 1
fall.recover = 0
p2facing = 1
envshake.time = 7
envshake.freq = 80
envshake.ampl = -5
envshake.phase = 90
fall.xvelocity =0
fall.yvelocity =-2
fall.recover = 0
down.bounce =0
down.velocity = -15,-8
down.hittime = 32
guard.hittime = 2
id = 710
p2stateno = 266

[State 900, starting value]
type = VarSet
trigger1 = time = 5 && var(710) = 1
var(710) = 0

[State 200, Spark]
type = Helper
trigger1 = (HitCount = 1) && (MoveHit)
Stateno = 7550
ID = 7550
pos = 41, -66
postype = P1
ownpal = 1
ignorehitpause = 1
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ground.cornerpush.veloff = -7

[State 711, fvar reset]
type = VarSet
trigger1 = !AnimTime
fvar(7) = 0

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Hit :P2
[Statedef 712]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025,Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 5051

[State 1025]
type = null;Turn
trigger1 = Time = 0

[State 1025]
type = ScreenBound
trigger1 = HitShakeOver = 1
value = 1
movecamera = 1,0

[State 1025] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

[State 1025,Wall Hit]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1026
;----------------------------------------------
;Flying sword
;---------------------------------------------
[Statedef 714]
type     = S
movetype = A
physics  = S
ctrl = 0
anim = 714
sprpriority = 2

[State 713, 0]
type = NotHitBy
triggerall = PalNo = 12
triggerall = var(24) = 1
trigger1 = 1
value = SCA
time = 1

[State 713, 0]
type = PlaySnd
trigger1 = animelemtime(3) = 0
value = s1000,2

[State 713, 0]
type = PlaySnd
trigger1 = animelemtime(3) = 0
value = s0,4

;[State 713, 0]
;type = TargetBind
;trigger1 = hitcount=1
;time = 1
;pos = 40,-40
;ignorehitpause = 1

[State 713,Air State]
type = Statetypeset
trigger1 = time = 10
statetype = A
physics = N

[State 713, HitDef]
type = HitDef
;triggerall = enemynear,movetype = A
Trigger1= !MoveContact && !MoveReversed
attr = A,NA
hitflag = MAF
guardflag = M
animtype = hard
damage = 17,8
pausetime = 10,14
guard.pausetime = 11,11
sparkno = -1                      ;Spark anim no (Def: set above)
guard.sparkno = -1 ;s6407 ; 6405
sparkxy = -65,-160; -65,-90; -40,-148
hitsound   = s1,49
guardsound = s3,20+Random%2
ground.velocity = -4,-18
air.velocity = -4,-25
snap =  ceil(ifelse(p2movetype = A ,p2bodydist x,50)) ,ceil(ifelse(p2movetype = A ,p2bodydist y,-40))
airguard.velocity = -2, -4
fall = 1
y.accel = 0.76
fall.recover = 0
fall.recovertime = 55
envshake.time = 5
getpower = 60,5
givepower = 20,5

[State -2, Drive increase]
type = varadd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
triggerall = roundstate=2
trigger1 = movecontact
v = 50
value = 8
persistent = 0

[State 713, ƒqƒbƒgƒXƒp[ƒN]
type = Helper
trigger1 = (HitCount = 1) && (MoveHit)
name ="Spark FX"
ID =8800
stateno =8800
Postype = p2
pos=(target,const(size.ground.front)-75),-120
scale = 1.8,1.8
Ownpal = 1
SprPriority = 4
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State 713,0]
type = Helper
trigger1 = (HitCount = 2) && (MoveHit)
name ="Spark FX"
ID =8800
stateno =8800
Postype = p2
pos=(target,const(size.ground.front)-75),-120
scale = 1.8,1.8
Ownpal = 1
SprPriority = 4
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State 713,0]
type = Helper
trigger1 = (HitCount = 3) && (MoveHit)
name ="Spark FX"
ID =8800
stateno =8800
Postype = p2
pos=(target,const(size.ground.front)-75),-170
scale = 1.8,1.8
Ownpal = 1
SprPriority = 4
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State 713,veladd]
type = velset
trigger1 = animelemtime(3) = 0
x = 7.2
y = -16

[State 713,veladd]
type = velset
trigger1 = animelemtime(5) = 0
x = 3
y = -3.5

[State 713, veladd]
type = VelAdd
trigger1 = animelemtime(7) > 0
y = 1.5

[State 713, ƒXƒe[ƒg•ÏX]
type = ChangeState
trigger1 = animelemtime(8) > 0
trigger1 = Pos Y >= 0
value = 52
ctrl = 0
;----------------------------------------------
;D slash
;---------------------------------------------
[Statedef 709]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 1                      ;Number of air juggle points move takes
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 709                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)

[State 210,SND]
type = PlaySnd
trigger1 = animelemTime(2) = 0
value = s200,9

[State 0, Pos]
type = PosAdd
trigger1 = AnimElem = 2
x = 75

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype  = hard
damage    = 30*(1+0.1*fvar(22)),15
priority = 4, Hit
getpower = (0.5+0.1*fvar(22))*var(9)* 4   ,20
Hitflag = MAFD
guardflag = L
pausetime = 14,15    ;  16,15
sparkno = -1                      ;Spark anim no (Def: set above)
sparkxy = -65,-160; -65,-160;-65,-50; -40,-240
hitsound   = s1,49
guardsound = s1,28
guard.sparkno = s-1
ground.type = low
ground.slidetime = 19   
ground.hittime  = 19
ground.velocity = - 3.5;,-5.6      +1*(var(47)<-600) +1.5*(var(47)<-900) +1.5*(var(47)<-1110)    -1.5*(enemynear,pos Y > -35)
air.velocity = -2.2,-4.1         +1*(var(47)<-600) +1.5*(var(47)<-900) +1.5*(var(47)<-1110)    -1.5*(enemynear,pos Y > -35)
guard.velocity = - 5
airguard.velocity = -2.5,-4
ID = 240
fall = 0
air.fall = 1
fall.recover =1
fall.recovertime = 25
Ground.CornerPush.VelOff = -11
Air.CornerPush.VelOff = -11
Down.CornerPush.VelOff = -11
Guard.CornerPush.VelOff = -11
yaccel = 0.45
id = 704

[State 0, TargetState]  
type = TargetState
triggerall = movehit = 1
trigger1 = Numtarget(704) && p2statetype = A
value = 750
ID = 700
ignorehitpause = 1
persistent = 0

[State 1315, effect]
type = helper
triggerAll = NumTarget;Enemy
trigger1 = (HitCount = 1) && (MoveHit)
name ="Spark FX"
ID =8800
stateno =8800
Postype = p2
pos=(target,const(size.ground.front)-75),-120
scale = 1.8,1.8
Ownpal = 1
SprPriority = 4
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State 200, 2]
type = PlaySnd
trigger1 = animelemTime(2) = 0
value = 0, 0

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;----------------------------------------------------------------------------------------
;Grab
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 730, Counter]
type = Explod
triggerall = Prevstateno = [140,155]
trigger1 = time = 0
Anim = 12400
ID = 12400
Postype = p1
Pos = 20,-60
scale = 1,1
SprPriority = 4
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 730, 1]
type = Pause
triggerall = Prevstateno = [140,155]
trigger1 = time = 0
time = 3
movetime = 1

; Notes: The '-' symbol in the hitflag field means that it only affects
;   players who are not in a hit state. This prevents KFM from combo-ing
;   into the throw. The priority should be set to a low number, such as
;   1 or 2, so that the throw does not take precedence over normal attacks.
;   The type of priority must always be set to "Miss" or "Dodge" for throws,
;   otherwise strange behavior can result.
[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1                      ;Spark anim no (Def: set above)
guard.sparkno = -1
sparkxy = -65,-160         ;No spark
p1sprpriority = 1     ;Draw p1's sprite in front of p2
p1facing = ifelse(command = "holdback", -1, 1)                     ;p2's sprite priority is set to 0 by default
p2facing = 1          ;Force p2 to face KFM
p1stateno = 810       ;On success, KFM changes to state 810
p2stateno = 811       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down
id = 800

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 4
;Trigger1=random%2=0
value = s800,0+random%2

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Throw - Attempt
; CNS difficulty: medium-advanced
; Description: Throws are not difficult to make, although then can be
;     tedious at times. Throw attempt states have a HitDef of a
;     special format. The key parameters in a throw are p1stateno
;     and p2stateno. If the HitDef successfully connects, then
;     the attacker will change to the state number specified by
;     p1stateno, and the opponent will be change to the state
;     number assigned to p2stateno. The special thing about p2stateno
;     is that the opponent will be temporarily brought into the
;     attacker's state file. In this case, no matter who the
;     opponent is, he will be taken to state 820 of this file (kfm.cns)
;     and remain here until the end of the throw (look at his debug
;     information when he is being thrown; the text changes to yellow
;     to mean that he is in another player's state file).
[Statedef 801]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 801
sprpriority = 2

[State 730, Counter]
type = Explod
trigger1 = time = 0
Anim = 6029
ID = 6029
Postype = p1
Pos = 0,-190
scale = 1,1
Ownpal = 1
SprPriority = 4
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 800, 1]
type = Pause
trigger1 = time = 0
time = 5
movetime = 1

[State 730, –³“G]
type = NotHitBy
triggerall = PalNo = [1,10]
trigger1 = time = 0
value = SCA

; Notes: The '-' symbol in the hitflag field means that it only affects
;   players who are not in a hit state. This prevents KFM from combo-ing
;   into the throw. The priority should be set to a low number, such as
;   1 or 2, so that the throw does not take precedence over normal attacks.
;   The type of priority must always be set to "Miss" or "Dodge" for throws,
;   otherwise strange behavior can result.
[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1                      ;Spark anim no (Def: set above)
guard.sparkno = -1
sparkxy = -65,-160         ;No spark
p1sprpriority = 1     ;Draw p1's sprite in front of p2
p1facing = ifelse(command = "holdback", -1, 1)                     ;p2's sprite priority is set to 0 by default
p2facing = 1          ;Force p2 to face KFM
p1stateno = 810       ;On success, KFM changes to state 810
p2stateno = 811       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down
id = 800

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 3
Trigger1=random%2=0
value = s800,0+random%3

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Throw - Throwing the opponent
; Description: In this state, KFM throws the opponent by binding him to
;     various offsets based on his current frame of animation. For
;     example, [State 810, Bind 1] binds the opponent to an offset of
;     28 pixels in front of KFM. That puts him around where KFM's hand
;     is at. Is is important to keep the opponent bound using a
;     TargetBind controller at all times, until you let him go. This
;     is especially important if your player has a Clsn2 box that
;     allows him to get hit while throwing someone. Each time a player
;     gets hit, all his bound targets will be set to a fall state. If
;     the opponent is not bound, then he may get stuck in his thrown
;     state when his attacker is knocked out of the throw halfway.
; Notes: There is a TargetLifeAdd controller to decrease the opponent's
;     life, and a TargetState controller to change his state to a
;     falling state when KFM lets go of him.
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 0

[state -2 , I-Comment]
type = VarSet
trigger1 = animelem = 2
var(31) = 1 

[State -2, Drive increase]
type = varadd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
triggerall = roundstate=2
trigger1 = AnimElemtime(4) = 0
ignorehitpause = 1
v = 50
value = 8
persistent = 0

[state ]
type=helper
trigger1 = Time = 0
name = "TRGT"
stateno=21890
Postype = p2
pos=(target,const(size.ground.front)-180),-70
ownpal=1
pausemovetime=9999
supermovetime=9999

[State 0, SprPriority]
type = SprPriority
trigger1 = animelem = 2
value = 4

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 4
value = s801,0

[State 810, Grab Sound]
type = PlaySnd
trigger1 = AnimElem = 1
value = s1,56

[State 810, hit Sound]
type = PlaySnd
trigger1 = AnimElem = 4
value = s1,24;16

[State 810, Bind 3]
type = TargetBind
trigger1 =  animelem = 1
pos = 75, 0

[State 810, Bind 3]
type = TargetBind
trigger1 =  animelem = 4
pos = 80,-8

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 4
value = -80
kill = 1

[State -1]
Type = EnvShake
trigger1 = animelem = 4
Time = 10
Freq = 90
Ampl = 6

[State 1315, effect]
type = explod
triggerAll = NumEnemy
trigger1 = animelem = 4
ID =6801
anim = 6801
Postype = p2
pos=(target,const(size.ground.front)-180),-70
scale = .9,.9
Ownpal = 1
SprPriority = 5
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State -1, ‘ŠŽèƒXƒe[ƒgˆÚs]
Type = TargetState
trigger1 = AnimElemTime(4) > 0
value = 860
ignorehitpause = 1
persistent = 0

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Throw - Throwing the opponent
[Statedef 815]
type    = S
movetype= A
physics = N
anim = 811
poweradd = 0

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 2
value = s200,5

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 7
value = s200,7

[State 810, Grab Sound]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 1

[State 810, hit Sound]
type = PlaySnd
trigger1 = AnimElem = 7
value = 1,21

[State 810, Bind 3]
type = TargetBind
trigger1 =  animelem = 1
pos = 75, 0

[State 820, Vel]
type = VelSet
trigger1 = AnimElem = 2
x = 12

[State 820, Vel]
type = VelMul
trigger1 = AnimElem = 2 , > 0 && AnimElem = 6 , < 0
x = .9

[State 820, Vel]
type = VelSet
trigger1 = AnimElem = 6
x = 0

[State 820, Turn]
type = Turn
trigger1 = AnimElem = 6

[State 810, Bind 3]
type = TargetBind
trigger1 =  animelem = 7
pos = 70,-8

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 7
value = -80
kill = 1

[State 0, AssertSpecial]
type = EnvShake
trigger1 = AnimElem = 7
time    = 7
ampl    = -7
freq    = 7
phase = 90

[State 1315, effect]
type = helper
trigger1 = AnimElem = 7
name ="Spark FX"
ID =8810
stateno =8810
Postype = p2
pos=(target,const(size.ground.front)-75),-170
scale = 1.8,1.8
Ownpal = 1
SprPriority = 4
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
ignorehitpause = 1

[State -1, ‘ŠŽèƒXƒe[ƒgˆÚs]
Type = TargetState
trigger1 = AnimElemTime(7) > 0
value = 276
ignorehitpause = 1
persistent = 0

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 811]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 3

[State 811, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820
;---------------------------------------------------------------------------
;Thrown air
; (a custom gethit state)
; Description: This is the state that the opponent changes to after being
;     hit by KFM's throw HitDef. The important thing here is to use a
;     ChangeAnim2 controller. The difference between ChangeAnim2 and
;     ChangeAnim is that ChangeAnim2 changes the player's animation to
;     an action in the AIR file of the attacker (in this case, kfm.air),
;     whereas ChangeAnim always changes the player to an action in his
;     own AIR file. Look at Action 820 in kfm.air for some extra
;     comments.
[Statedef 820]
type    = A
movetype= H
physics = N
velset = -7.8,-6.8

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

;In case attacker loses binding on player for any reason, this controller
;guarantees that the player will never get stuck in this thrown state.
[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
;Target Throwing State
[Statedef 830]
type = A
movetype = H
physics = N
velset = -16,-10

[State 863, 2]
type = VelAdd
trigger1 = 1
y = .86

[State 863, 4]
type = ChangeAnim
trigger1 = Time = 0
value = 5050


[State 863, 5]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100
;---------------------------------------------------------------------------
;Target Throwing State
[Statedef 860]
type = A
movetype = H
physics = N
velset = -4,-4

[State 863, 2]
type = VelAdd
trigger1 = 1
y = .5

[State 863, 4]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(selfanimexist(5052),5052,5050)

[State 1403, 3]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 861

[State 863, 5]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100
;---------------------------------------------------------------------------
;wall bounce
[Statedef 861]
type    = A
movetype= H
physics = N

[State 831, hitvel]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1404,1]
type = Velset
trigger1 = time = 1 
x = -12
y = -18.5

[State 831, vel]
type = VelAdd
trigger1 = 1
y = .85

[State 831, screenbound]
type = ScreenBound
;triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 5
trigger2 = FrontEdgeBodyDist <= 5
value = 1
movecamera = 0,1

[State 831, a state];
type = ChangeState
;triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 5
trigger2 = FrontEdgeBodyDist <= 5
value = 862

[State 831, selfstate]
type = SelfState
trigger1 = time > 5
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;wall bounce
[Statedef 862]
type    = A
movetype= H
physics = N

[State 832, trn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1405,1]
type = Velset
trigger1 = time = 0
x = 4
y = -11.5

[State 1405,2]
type = VelAdd
trigger1 = time >= 0
y = 0.5

[State 832, screenbound again...]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1405, 2] 
type = ChangeAnim
trigger1 = Time = 0
value = 5030

[State 1405, 3]
type = ChangeAnim
trigger1 = animtime = 0
trigger1 = anim = 5030
trigger1 = SelfAnimExist(5035)
value = 5035

[State 1405, 4]
type = ChangeAnim
trigger1 = animtime = 0
trigger1 = anim = 5035
trigger1 = SelfAnimExist(5035)
value = 5050

[State 833, 0]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------------------------------------------------------
;bounce falling
[Statedef 863]
type    = A
movetype= H
physics = N

[State 833, 0]
type = VelSet
trigger1 = Time = 0
y = -4

[State 833, 0]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 833, 0]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 833, 0]
type = VelAdd
trigger1 = 1
y = .35

[State 833, 0]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 833, 0]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 833, 0]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 833, 0]
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 833, 0]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
;----------------------------------------------------------------------------------------
;Grab
[Statedef 840]
type    = A
movetype= A
physics = A
juggle  = 10
;velset = 0,0
ctrl = 0
anim = 830
sprpriority = 2

[State 730, Counter]
type = Explod
triggerall = Prevstateno = [140,155]
trigger1 = time = 0
Anim = 12400
ID = 12400
Postype = p1
Pos = 20,-60
scale = 1,1
SprPriority = 4
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 730, 1]
type = Pause
triggerall = Prevstateno = [140,155]
trigger1 = time = 0
time = 3
movetime = 1

; Notes: The '-' symbol in the hitflag field means that it only affects
;   players who are not in a hit state. This prevents KFM from combo-ing
;   into the throw. The priority should be set to a low number, such as
;   1 or 2, so that the throw does not take precedence over normal attacks.
;   The type of priority must always be set to "Miss" or "Dodge" for throws,
;   otherwise strange behavior can result.
[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT        
hitflag = AF        
priority = 7, Miss  ;Throw has low priority, must be miss or dodge type.
sparkno = s6081+(random%3)          ;No spark
p1sprpriority = 1     ;Draw p1's sprite in front of p2
p1facing = ifelse(command = "holdback", -1, 1)                     ;p2's sprite priority is set to 0 by default
p2facing = 1          ;Force p2 to face KFM
p1stateno = 845       ;On success, KFM changes to state 810
p2stateno = 846       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down
id = 840

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 2
;Trigger1=random%2=0
value = s800,0+random%2

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 51
ctrl = 1
;---------------------------------------------------------------------------
;Throw - Attempt
; CNS difficulty: medium-advanced
; Description: Throws are not difficult to make, although then can be
;     tedious at times. Throw attempt states have a HitDef of a
;     special format. The key parameters in a throw are p1stateno
;     and p2stateno. If the HitDef successfully connects, then
;     the attacker will change to the state number specified by
;     p1stateno, and the opponent will be change to the state
;     number assigned to p2stateno. The special thing about p2stateno
;     is that the opponent will be temporarily brought into the
;     attacker's state file. In this case, no matter who the
;     opponent is, he will be taken to state 820 of this file (kfm.cns)
;     and remain here until the end of the throw (look at his debug
;     information when he is being thrown; the text changes to yellow
;     to mean that he is in another player's state file).
[Statedef 841]
type    = A
movetype= A
physics = A
juggle  = 0
velset = 0,0
ctrl = 0
anim = 830
sprpriority = 2

[State 730, Counter]
type = Explod
trigger1 = time = 0
Anim = 6029
ID = 6029
Postype = p1
Pos = 0,-190
scale = 1,1
Ownpal = 1
SprPriority = 4
SuperMoveTime = 9999
PauseMoveTime = 9999

[State 800, 1]
type = Pause
trigger1 = time = 0
time = 5
movetime = 1

[State 730, –³“G]
type = NotHitBy
triggerall = PalNo = [1,10]
trigger1 = time = 0
value = SCA

; Notes: The '-' symbol in the hitflag field means that it only affects
;   players who are not in a hit state. This prevents KFM from combo-ing
;   into the throw. The priority should be set to a low number, such as
;   1 or 2, so that the throw does not take precedence over normal attacks.
;   The type of priority must always be set to "Miss" or "Dodge" for throws,
;   otherwise strange behavior can result.
[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;Attributes: Standing, Normal Throw
hitflag = M-          ;Affect only ground people who are not being hit
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = s6081+(random%3)          ;No spark
p1sprpriority = 1     ;Draw p1's sprite in front of p2
p1facing = ifelse(command = "holdfwd", 1, -1)                     ;p2's sprite priority is set to 0 by default
p2facing = 1          ;Force p2 to face KFM
p1stateno = 810       ;On success, KFM changes to state 810
p2stateno = 811       ;If hit, p2 changes to state 820 in KFM's cns
guard.dist = 0        ;This prevents p2 from going into a guard state if close
fall = 1              ;Force p2 into falling down
id = 800

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 3
Trigger1=random%2=0
value = s800,0+random%3

;---------------------------------------------------------------------------
;Throw - Throwing the opponent
; Description: In this state, KFM throws the opponent by binding him to
;     various offsets based on his current frame of animation. For
;     example, [State 810, Bind 1] binds the opponent to an offset of
;     28 pixels in front of KFM. That puts him around where KFM's hand
;     is at. Is is important to keep the opponent bound using a
;     TargetBind controller at all times, until you let him go. This
;     is especially important if your player has a Clsn2 box that
;     allows him to get hit while throwing someone. Each time a player
;     gets hit, all his bound targets will be set to a fall state. If
;     the opponent is not bound, then he may get stuck in his thrown
;     state when his attacker is knocked out of the throw halfway.
; Notes: There is a TargetLifeAdd controller to decrease the opponent's
;     life, and a TargetState controller to change his state to a
;     falling state when KFM lets go of him.
[Statedef 845]
type    = A
movetype= A
physics = A
anim = 831
poweradd = 0

[state -2 , I-Comment]
type = VarSet
trigger1 = AnimElemtime(2) = 5
var(31) = 1

[State -2, Drive increase]
type = varadd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
triggerall = roundstate=2
trigger1 = AnimElemtime(2) = 0
ignorehitpause = 1
v = 50
value = 10
persistent = 0

[state ]
type=helper
trigger1 = Time = 0
name = "TRGT"
stateno=21891
Postype = p2
pos=(target,const(size.ground.front)-180),-70
ownpal=1
pausemovetime=9999
supermovetime=9999

[State 660, Velset]
type = posfreeze
trigger1 = animelemtime(1) > 0 && animelemtime(2) < 0

[State 660, Velset]
type = Velset
trigger1 = AnimElemtime(2) = 0
y = -15
x = -8

[State 1110, Gravity]
type = Veladd
trigger1 = AnimElemTime(3) = 0 && AnimElemTime(5) = 0
y = -26
x = -12

[State 1110, Gravity]
type = Velset
trigger1 = AnimElemTime(6) = 0
y = 1.76

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 2
value = s210,6

[State 810, Grab Sound]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1, 1

[State 810, slash Sound]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1,52

[State 810, Bind 3]
type = TargetBind
trigger1 =  animelem = 1
pos = 75,10

[State 810, Bind 3]
type = TargetBind
trigger1 =  animelem = 2
pos = 50,30

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 2
value = -50
kill = 1

[State -1, ‘ŠŽèƒXƒe[ƒgˆÚs]
Type = TargetState
trigger1 = AnimElemTime(2) > 0
value = 831
ignorehitpause = 1
persistent = 0

[state 0, Ground impact FX]
type = Explod
triggerall = enemynear,stateno = 832 ;&& !time
trigger1 = AnimElemTime(2) > 0
trigger1 = numexplod(7704) = 0
id = 7704
persistent = 0
pos = 0,0
postype = p2
anim = 7704
sprpriority = 5
scale = 1.5,1.5
removetime = 26
ownpal = 1
ignorehitpause = 1

[State 810, hit Sound]
type = PlaySnd
triggerall = enemynear,stateno = 832 ;&& !time
trigger1 = AnimElemTime(2) > 0
trigger1 = numexplod(7704) = 1
value = s1,48
persistent = 0
;---------------------------------------------------------------------------
[Statedef 846]
type    = A
movetype= H
physics = N
velset = 0,0

[State 811, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 840
;---------------------------------------------------------------------------
;Thrown in Air
; (a custom gethit state)
; Description: This is the state that the opponent changes to after being
;     hit by KFM's throw HitDef. The important thing here is to use a
;     ChangeAnim2 controller. The difference between ChangeAnim2 and
;     ChangeAnim is that ChangeAnim2 changes the player's animation to
;     an action in the AIR file of the attacker (in this case, kfm.air),
;     whereas ChangeAnim always changes the player to an action in his
;     own AIR file. Look at Action 820 in kfm.air for some extra
;     comments.
[Statedef 820]
type    = A
movetype= H
physics = N
velset = -7.8,-6.8

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

;In case attacker loses binding on player for any reason, this controller
;guarantees that the player will never get stuck in this thrown state.
[State 820, 2]
type = SelfState
trigger1 = !gethitvar(isbound)
value = 5050

;---------------------------------------------------------------------------
[Statedef 830]
type = A
movetype = H
physics = N
velset = -11,-6

[State 863, 2]
type = VelAdd
trigger1 = 1
y = .6

[State 863, 4]
type = ChangeAnim2
trigger1 = Time = 0
value = 821

[State 863, 5]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100
;---------------------------------------------------------------------------
[Statedef 831]
type = A
movetype = H
physics = N
velset = -15,21

[State 863, 2]
type = VelAdd
trigger1 = 1
y = 1.2

[State 863, 4]
type = ChangeAnim
trigger1 = Time = 0
value = 5050

[State 641, Hit Ground]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 832
;---------------------------------------------------------------------------
;P2 bouncing
[Statedef 832]
type    = L
movetype= H
physics = N
velset = 0,0

[State 7060]
type = playerpush
trigger1 = 1
value = 0

[State -2]
type = VelSet
trigger1 = Time = 1
x = -9.75
y = -15

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 642, Screenbound]
type = ScreenBound
trigger1 = time = 0
value = 1
movecamera = 0,1

[State 5100, 2] ;Hit ground
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 6]
type = VelMul
trigger1 = Time = 0
x = 0.6

[State 111, 1]
type = StateTypeSet
trigger1 = AnimTime = 0
physics = A

[State 5100, 12]
type = SelfState
trigger1 = AnimTime = 0
value = 5050
;---------------------------------------------------------------------------
; Machine gun shot(front)
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 55
velset = 0,0
anim = ifelse(var(51) = 1,1010,1000)
ctrl = 0
sprpriority = 2

[State -2, Drive increase]
type = varadd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
trigger1 = (ProjcontactTime(var(25)) = 1)
v = 50
value = 8
ignorehitpause = 1

[State 240, 1]
type = PlaySnd
Triggerall = anim = 1000
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
value = 1,17+(random%2) ;value = 1,17+(random%3)

[State 210,SND]
type = PlaySnd
Triggerall = anim = 1000
trigger1 = animelem = 5
value = s1000,0
channel = 1050

[State 0]
type = Explod
Triggerall = anim = 1000
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
ID = 6141
anim = 6141
postype = p1
pos = 20,-180
bindtime = 99999
removetime = -2
sprpriority = 9
ownpal = 1
scale = .8,.8

[State 280, Projectile]
type = Helper
Triggerall = anim = 1000
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 2040
stateno = 2040
pos = 60,-182
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

;-----------------------------------------------------------------------------------------------

[State 240, 1]
type = PlaySnd
Triggerall = anim = 1010
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
value = 1,17+(random%2) ;value = 1,17+(random%3)

[State 210,SND]
type = PlaySnd
Triggerall = anim = 1010
trigger1 = animelem = 5
value = s1001,0
channel = 1050

[State 0]
type = Explod
Triggerall = anim = 1010
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
ID = 6086
anim = 6086
postype = p1
pos = 60,-190
bindtime = 99999
removetime = -2
sprpriority = 9
ownpal = 1
scale = .6,.6

[State 0]
type = Explod
Triggerall = anim = 1010
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
ID = 6141
anim = 6141
postype = p1
pos = 20,-180
bindtime = 99999
removetime = -2
sprpriority = 9
ownpal = 1
scale = .8,.8

[State 280, Projectile]
type = Helper
Triggerall = anim = 1010
trigger1 = Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2140
stateno = 21400+Random%2
pos = 100,-182
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7


[State 280, Projectile]
type = Helper
Triggerall = anim = 1010
trigger1 = Animelemtime(4) = 0
name = "Projectile"
ID = 21400
stateno = 21400
pos = 100,-182
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
Triggerall = anim = 1010
trigger1 = Animelemtime(8) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = 21401
pos = 100,-172;-195
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
Triggerall = anim = 1010
trigger1 = Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = 21402
pos = 100,-170
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Machine gun shot(Diagonal)
[Statedef 1001]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
velset = 0,0
anim = ifelse(var(51) = 1,1011,1001)
ctrl = 0
sprpriority = 2

[State -2, Drive increase]
type = varadd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
trigger1 = (ProjcontactTime(var(25)) = 1)
v = 50
value = 8
ignorehitpause = 1

[State 240, 1]
type = PlaySnd
Triggerall = anim = 1001
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
value = 1,17+(random%2) ;value = 1,17+(random%3)

[State 210,SND]
type = PlaySnd
Triggerall = anim = 1001
trigger1 = animelem = 5
value = s1000,0
channel = 1050

[State 280, Projectile]
type = Helper
Triggerall = anim = 1001
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
helpertype = normal
name = "effect"
ID = 2044
stateno = 2044
pos = 0,-210
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 280, Projectile]
type = Helper
Triggerall = anim = 1001
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 2041
stateno = 2041
pos = 70,-270
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

;-----------------------------------------------------------------------------------------------


[State 240, 1]
type = PlaySnd
Triggerall = anim = 1011
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
value = 1,17+(random%2) ;value = 1,17+(random%3)

[State 210,SND]
type = PlaySnd
Triggerall = anim = 1011
trigger1 = animelem = 5
value = s1001,0
channel = 1050

[State 280, Projectile]
type = Helper
Triggerall = anim = 1011
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "effect"
ID = 2044
stateno = 2044
pos = 0,-210
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 280, Projectile]
type = Helper
Triggerall = anim = 1011
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "effect"
ID = 2144
stateno = 2144
pos = 0,-220
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

;[State 280, Projectile]
;type = Helper
;trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
;;helpertype = normal
;name = "Projectile"
;ID = 2141
;stateno = 2099
;pos = 90,-270
;postype = p1
;facing = 1
;keyctrl = 0
;ownpal = 1
;size.xscale = 1.7
;size.yscale = 1.7

[State 280, Projectile]
type = Helper
Triggerall = anim = 1011
trigger1 = Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = 21410+Random%2
pos = 90,-270
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
Triggerall = anim = 1011
trigger1 = Animelemtime(4) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = 21410
pos = 90,-270
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
Triggerall = anim = 1011
trigger1 = Animelemtime(8) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = 21411
pos = 110,-290
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7


[State 280, Projectile]
type = Helper
Triggerall = anim = 1011
trigger1 = Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = 21412
pos = 130,-290
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------
; Machine gun shot(air)
[Statedef 1002]
type    = A
movetype= A
physics = A
ctrl = 0
anim = ifelse(var(51) = 1,1012,1002)
sprpriority = 2

[State 660, gravity]
type = statetypeset
Triggerall = anim = 1012
trigger1 = !time
statetype = A
movetype = A
physics =  N
ignorehitpause = 1
persistent = 0

[State -2, Drive increase]
type = varadd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
trigger1 = (ProjcontactTime(var(25)) = 1)
v = 50
value = 8
ignorehitpause = 1

[State 660, Velset]
type = Velset
Triggerall = anim = 1002
triggerall = prevstateno = [702,704]
trigger1 = !time
x = -1

[State 660, Velset]
type = Velset
Triggerall = anim = 1002
trigger1 = AnimElem = 1
y = -1

[State 1301,]
type = velset
Triggerall = anim = 1002
trigger1 = animelemTime(4) = 0
y = -8

[State 1012, 速度乗算]
type = velset
Triggerall = anim = 1002
triggerall = !prevstateno = [702,704]
trigger1 = time%2
X = -6

[State 240, 1]
type = PlaySnd
Triggerall = anim = 1002
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
value = 1,17+(random%2) ;value = 1,17+(random%3)

[State 210,SND]
type = PlaySnd
Triggerall = anim = 1002
trigger1 = animelem = 4
value = s1000,1
channel = 1050

[State 660, Velset]
type = veladd
Triggerall = anim = 1002
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
y = -2
;x = -12

;[State 660, Velset]
;type = Velset
;triggerall = vel x > 0
;trigger1 = 1
;x = 6
;
;[State 660, Velset]
;type = Velset
;triggerall = vel x < 0
;trigger1 = 1
;x = -6

[State 280, Projectile]
type = Helper
Triggerall = anim = 1002
trigger1 = Animelemtime(5) = 0
helpertype = normal
name = "Projectile"
ID = 2042
stateno = 2042
pos = 160,-170
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
Triggerall = anim = 1002
trigger1 = Animelemtime(9) = 0
helpertype = normal
name = "Projectile"
ID = 2042
stateno = 2042
pos = 160,-170
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
Triggerall = anim = 1002
trigger1 = Animelemtime(11) = 0
helpertype = normal
name = "Projectile"
ID = 2042
stateno = 2042
pos = 160,-170
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7
 
[State 280, Projectile]
type = Helper
Triggerall = anim = 1002
trigger1 = Animelemtime(5) = 0 || Animelemtime(9) = 0 || Animelemtime(13) = 0
helpertype = normal
name = "Projectile"
ID = 2045
stateno = 2045
pos = 40,-240
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 660, ˆÊ’uŒÅ’è]
type = PosFreeze
Triggerall = anim = 1002
trigger1 = animelemtime(3) < 0

[State 660, gravity]
type = VelAdd
Triggerall = anim = 1002
trigger1 = animelemtime(11) >= 0
y = 0.11

;-----------------------------------------------------------------------------------------------

[State 1012, 速度乗算]
type = velset
Triggerall = anim = 1012
trigger1 = time = 0
x = -1
Y = -1

[State 240, 1]
type = PlaySnd
Triggerall = anim = 1012
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
value = 1,17+(random%2) ;value = 1,17+(random%3)

[State 210,SND]
type = PlaySnd
Triggerall = anim = 1012
trigger1 = animelem = 5
value = s1001,0
channel = 1050

;[State 660, Velset]
;type = Velset
;triggerall = vel x > 0
;trigger1 = 1
;x = 6
;
;[State 660, Velset]
;type = Velset
;triggerall = vel x < 0
;trigger1 = 1
;x = -6

[State 280, Projectile]
type = Helper
Triggerall = anim = 1012
trigger1 = Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2140
stateno = 21420+Random%2
pos = 100,-210;-195
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7


[State 280, Projectile]
type = Helper
Triggerall = anim = 1012
trigger1 = Animelemtime(4) = 0
name = "Projectile"
ID = 21400
stateno = 21420
pos = 100,-210;-195
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
Triggerall = anim = 1012
trigger1 = Animelemtime(8) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = 21421
pos = 100,-210;-195
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7


[State 280, Projectile]
type = Helper
Triggerall = anim = 1012
trigger1 = Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = 21422
pos = 100,-210;-195
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
Triggerall = anim = 1012
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2045
stateno = 2045
pos = 40,-240
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 280, Projectile]
type = Helper
Triggerall = anim = 1012
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2145
stateno = 2145
pos = 80,-250
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 660, gravity]
type = statetypeset
Triggerall = anim = 1012
trigger1 = animelemtime(31)>=0 
statetype = A
movetype = I
physics = A
ignorehitpause = 1
persistent = 0 

[State 611, 3]
type = changestate
Triggerall = anim = 1012
trigger1 = pos y >= 0
value = 52

;-------------------------------------------------------
; Machine gun shot(air Diagonal)
[Statedef 1003]
type    = A
movetype= A
physics = A
ctrl = 0
anim = ifelse(var(51) = 1,1013,1003)
sprpriority = 2

[State 660, gravity]
type = statetypeset
Triggerall = anim = 1013
trigger1 = !time
statetype = A
movetype = A
physics =  N
ignorehitpause = 1
persistent = 0 

[State -2, Drive increase]
type = varadd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
trigger1 = (ProjcontactTime(var(25)) = 1)
v = 50
value = 8
ignorehitpause = 1

[State 660, Velset]
type = Velset
Triggerall = anim = 1003
trigger1 = AnimElem = 1
y = 0

[State 240, 1]
type = PlaySnd
Triggerall = anim = 1003
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
value = 1,17+(random%2) ;value = 1,17+(random%3)

[State 210,SND]
type = PlaySnd
Triggerall = anim = 1003
trigger1 = animelem = 4
value = s200,8
channel = 1050

[State 200, save vel]
type = varset
;Triggerall = anim = 1003
trigger1 = !time
fvar(6) = vel X

[State 1012, 速度乗算]
type = velset
Triggerall = anim = 1003
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
x = ifelse(fvar(6)<4, fvar(6), 4)
y = -15

[State 280, Projectile]
type = Helper
Triggerall = anim = 1003
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 2043
stateno = 2043
pos = 0,-240
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7
 
[State 280, Projectile]
type = Helper
Triggerall = anim = 1003
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 2046
stateno = 2046
pos = -15,-200
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 660, ˆÊ’uŒÅ’è]
type = PosFreeze
Triggerall = anim = 1003
trigger1 = animelemtime(3) < 0

[State 660, Velset]
type = Velset
Triggerall = anim = 1003
trigger1 = AnimElem = 1
y = -8

[State 660, veladd]
type = VelAdd
Triggerall = anim = 1003
trigger1 = animelemtime(11) >= 0
y = 0.11

;-----------------------------------------------------------------------------------------------

[State 240, 1]
type = PlaySnd
Triggerall = anim = 1013
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
value = 1,17+(random%2) ;value = 1,17+(random%3)

[State 210,SND]
type = PlaySnd
Triggerall = anim = 1013
trigger1 = animelem = 5
value = s1001,0
channel = 1050

[State 200, stp Y vel]
type = velset
Triggerall = anim = 1013
trigger1 = time = 0
y = 0

[State 1012, 速度乗算]
type = velset
Triggerall = anim = 1013
Triggerall = vel x != 0
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
x = ifelse(fvar(6)/2.0, fvar(6)/2.0, 4)

[State 1012, 速度乗算]
type = velset
Triggerall = anim = 1013
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
Y = -2

[State 280, Projectile]
type = Helper
Triggerall = anim = 1013
trigger1 = Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2140
stateno = 21430+Random%2
pos = -28,-100
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7


[State 280, Projectile]
type = Helper
Triggerall = anim = 1013
trigger1 = Animelemtime(4) = 0
name = "Projectile"
ID = 21400
stateno = 21430
pos = -28,-100
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
Triggerall = anim = 1013
trigger1 = Animelemtime(8) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = 21431
pos = -28,-100
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
Triggerall = anim = 1013
trigger1 = Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = 21432
pos = -28,-100
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7
 
[State 280, Projectile]
type = Helper
Triggerall = anim = 1013
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2046
stateno = 2046
pos = -15,-200
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 280, Projectile]
type = Helper
Triggerall = anim = 1013
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2146
stateno = 2146
pos = 45,-210
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 660, gravity]
type = statetypeset
Triggerall = anim = 1013
trigger1 = animelemtime(31)>=0 
statetype = A
movetype = I
physics = A
ignorehitpause = 1
persistent = 0 

[State 611, 3]
type = changestate
Triggerall = anim = 1013
trigger1 = pos y >= 0
value = 52

;---------------------------------------------------------------------------
;LV2 Machine gun shot(front)
[Statedef 1050]
type    = S
movetype= A
physics = S
juggle  = 4
;poweradd= -500
velset = 0,0
anim = 1010
ctrl = 0
sprpriority = 2

[State 1050, D-Dust]
type = Explod
triggerall = var(51) = 1
trigger1 = !(Time % 9)
anim = 6350
sprPriority = -3
posType = P1
pos = 0, -ceil(pos y)
scale = 1.5,1.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[state -2 , I-Comment]
type = Varset
trigger1 = !time
var(31) = 1

[State -2, Drive decrease]
type = VarAdd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
trigger1 = !time
var(50) = -500
ignorehitpause = 1
persistent = 0

[State 2000, Helper]
type = Helper
trigger1 = Time = 0
name = "EX"
ID = 7900
stateno = 7900
pos = 0,0
postype = p1
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 240, 1]
type = PlaySnd
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
value = 1,17+(random%2) ;value = 1,17+(random%3)

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 5
value = s1001,0
channel = 1050

[State 0]
type = Explod
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
ID = 6086
anim = 6086
postype = p1
pos = 60,-190
bindtime = 99999
removetime = -2
sprpriority = 9
ownpal = 1
scale = .6,.6

[State 0]
type = Explod
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
ID = 6141
anim = 6141
postype = p1
pos = 20,-180
bindtime = 99999
removetime = -2
sprpriority = 9
ownpal = 1
scale = .8,.8

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2140
stateno = ifelse(var(51) = 1,22040,21400+Random%2)
pos = 100,-182
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7


[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0
name = "Projectile"
ID = 21400
stateno = ifelse(var(51) = 1,22040,21400)
pos = 100,-182
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(8) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = ifelse(var(51) = 1,22040,21401)
pos = 100,ifelse(var(51) = 1,-182,-172);-195
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7


[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = ifelse(var(51) = 1,22040,21402)
pos = 100,ifelse(var(51) = 1,-182,-170)
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;LV2 Machine gun shot(Diagonal)
[Statedef 1051]
type    = S
movetype= A
physics = S
juggle  = 4
;poweradd= -500
velset = 0,0
anim = 1011
ctrl = 0
sprpriority = 2

[State 1050, D-Dust]
type = Explod
triggerall = var(51) = 1
trigger1 = !(Time % 9)
anim = 6350
sprPriority = -3
posType = P1
pos = 0, -ceil(pos y)
scale = 1.5,1.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1

[state -2 , I-Comment]
type = Varset
trigger1 = !time
var(31) = 1

[State -2, Drive decrease]
type = VarAdd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
trigger1 = !time
var(50) = -500
ignorehitpause = 1
persistent = 0

[State 2000, Helper]
type = Helper
trigger1 = Time = 0
name = "EX"
ID = 7900
stateno = 7900
pos = 0,0
postype = p1
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 240, 1]
type = PlaySnd
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
value = 1,17+(random%2) ;value = 1,17+(random%3)

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 5
value = s1001,0
channel = 1050

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "effect"
ID = 2044
stateno = 2044
pos = 0,-210
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "effect"
ID = 2144
stateno = 2144
pos = 0,-220
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

;[State 280, Projectile]
;type = Helper
;trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
;;helpertype = normal
;name = "Projectile"
;ID = 2141
;stateno = 2099
;pos = 90,-270
;postype = p1
;facing = 1
;keyctrl = 0
;ownpal = 1
;size.xscale = 1.7
;size.yscale = 1.7

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = ifelse(var(51) = 1,22041,21410+Random%2)
pos = 90,ifelse(var(51) = 1,-282,-270);-195
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = ifelse(var(51) = 1,22041,21410)
pos = 90,ifelse(var(51) = 1,-282,-270);-195
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(8) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = ifelse(var(51) = 1,22041,21411)
pos = 110,ifelse(var(51) = 1,-282,-290);-195
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7


[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = ifelse(var(51) = 1,22041,21412)
pos = 130,ifelse(var(51) = 1,-282,-290);-195
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------
; LV2 Machine gun shot(air)
[Statedef 1052]
type    = A
movetype= A
physics = N
;velset = 0,0
;poweradd= -500
ctrl = 0
anim = 1012
sprpriority = 2

[state -2 , I-Comment]
type = Varset
trigger1 = !time
var(31) = 1

[State -2, Drive decrease]
type = VarAdd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
trigger1 = !time
var(50) = -500
ignorehitpause = 1
persistent = 0

[State 1012, 速度乗算]
type = velset
trigger1 = !time
x = -1
Y = -1

[State 2000, Helper]
type = Helper
trigger1 = Time = 0
name = "EX"
ID = 7900
stateno = 7900
pos = 0,0
postype = p1
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 240, 1]
type = PlaySnd
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
value = 1,17+(random%2) ;value = 1,17+(random%3)

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 5
value = s1001,0
channel = 1050

;[State 660, Velset]
;type = Velset
;triggerall = vel x > 0
;trigger1 = 1
;x = 6
;
;[State 660, Velset]
;type = Velset
;triggerall = vel x < 0
;trigger1 = 1
;x = -6

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2140
stateno = ifelse(var(51) = 1,22042,21420+Random%2)
pos = 100,ifelse(var(51) = 1,-222,-210);-195
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7


[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0
name = "Projectile"
ID = 21400
stateno = ifelse(var(51) = 1,22042,21420)
pos = 100,ifelse(var(51) = 1,-222,-210);-195
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(8) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = ifelse(var(51) = 1,22042,21421)
pos = 100,ifelse(var(51) = 1,-222,-210);-195
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7


[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = ifelse(var(51) = 1,22042,21422)
pos = 100,ifelse(var(51) = 1,-222,-210);-195
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2045
stateno = 2045
pos = 40,-240
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2145
stateno = 2145
pos = 80,-250
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 660, gravity]
type = statetypeset
trigger1 = animelemtime(31)>=0 
statetype = A
movetype = I
physics = A
ignorehitpause = 1
persistent = 0 

[State 611, 3]
type = changestate
trigger1 = pos y >= 0
value = 52
;-------------------------------------------------------
; LV2 Machine gun shot(air Diagonal)
[Statedef 1053]
type    = A
movetype= A
physics = N
;velset = 0,0
;poweradd= -500
ctrl = 0
anim = 1013
sprpriority = 2

[state -2 , I-Comment]
type = Varset
trigger1 = !time
var(31) = 1

[State -2, Drive decrease]
type = VarAdd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
trigger1 = !time
var(50) = -500
ignorehitpause = 1
persistent = 0

[State 2000, Helper]
type = Helper
trigger1 = Time = 0
name = "EX"
ID = 7900
stateno = 7900
pos = 0,0
postype = p1
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 240, 1]
type = PlaySnd
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
value = 1,17+(random%2) ;value = 1,17+(random%3)

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 5
value = s1001,0
channel = 1050

[State 200, save vel]
type = varset
trigger1 = !time
fvar(6) = vel X

[State 200, stp Y vel]
type = velset
trigger1 = !time
y = 0

[State 1012, 速度乗算]
type = velset
Triggerall = vel x != 0
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
x = ifelse(fvar(6)/2.0, fvar(6)/2.0, 4)

[State 1012, 速度乗算]
type = velset
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
Y = -2

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2140
stateno = ifelse(var(51) = 1,22043,21430+Random%2)
pos = -28,ifelse(var(51) = 1,-212,-100);-195
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7


[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0
name = "Projectile"
ID = 21400
stateno = ifelse(var(51) = 1,22043,21430)
pos = -28,ifelse(var(51) = 1,-212,-100);-195
postype = p1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(8) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = ifelse(var(51) = 1,22043,21431)
pos = -28,ifelse(var(51) = 1,-212,-100);-195
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 2141
stateno = ifelse(var(51) = 1,22043,21432)
pos = -28,ifelse(var(51) = 1,-212,-100);-195
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7
 
[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2046
stateno = 2046
pos = -15,-200
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0 || Animelemtime(16) = 0 || Animelemtime(20) = 0 || Animelemtime(24) = 0
helpertype = normal
name = "Projectile"
ID = 2146
stateno = 2146
pos = 45,-210
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 660, gravity]
type = statetypeset
trigger1 = animelemtime(31)>=0 
statetype = A
movetype = I
physics = A
ignorehitpause = 1
persistent = 0 

[State 611, 3]
type = changestate
trigger1 = pos y >= 0
value = 52
;---------------------------------------------------------------------------
; Falling Sword
; CNS difficulty: medium
[Statedef 700]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 700
sprpriority = 2

[State 680, ˆÊ’uŒÅ’è]
type = PosFreeze
trigger1 = animelemtime(2) < 0

[State 680, •—Ø‚è‰¹]
type = PlaySnd
trigger1 = animelemtime(4) = 0
value = s40,9

[State 0]
type = Explod
Triggerall = timemod = 1,0
trigger1 = animelem = 3
ID = 1055
anim = 1055
postype = p1
pos = -60,-140
bindtime = 99999
removetime = -2
sprpriority = 9
ownpal = 1
scale = 1,1

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 1
value = s200,6

[State 680, hitdef]
type = HitDef
triggerall = !movehit
trigger1 = animelemtime(2) >= 0
attr = A,NA
hitflag = MAFDE
guardflag = MA 
animtype = Light
damage = 70,17
pausetime = 10,10
sparkno = s6081
sparkry = 45,-41
hitsound = s1,3
guardsound = s1,0
groundtype = Hard
ground.slidetime = 17
ground.hittime = 17
airtype = Hard
ground.velocity = -14,0
air.velocity = -10,16
fall = 0
Air.fall=1
fall.recover = 0
getpower = 70,5
givepower = 35,5
;p1stateno = 749
;p2stateno = 750
id = 700

[State 680, Žc‘œ]
type = AfterImage
trigger1 = time = 0
time = 20
length = 7
Framegap = 4
PalBright = 100,100,170
PalContrast = 128,128,250
PalAdd = 0,0,0
trans = add1

[State 680, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 680, Veladd]
type = Veladd
trigger1 = AnimElem = 3
x = 0
y = 45

[State 680, ƒXƒe[ƒg•ÏX]
type = ChangeState
trigger1 = Pos Y >= 0
value = 749
ctrl = 0
;---------------------------------------------------------------------------
; EX Falling Sword !!
; CNS difficulty: medium
[Statedef 701]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 700
;poweradd= -500
sprpriority = 2

[State 1000, fx]
Type = Explod
Trigger1 = animelemtime(1) = 0
Anim = 6027
ID = 6027
Postype = p1
Pos = 0,-50
scale = 1.6,1.6
Ownpal = 1
SprPriority = 9
removeongethit = 1

[State 1500, Žc‘œ]
type = AfterImage
trigger1= time = 0
time = 40
length = 3
TimeGap = 2
Framegap = 2
PalBright = 0,80,256
PalContrast = 128,128,250
palpostbright = -80,-80,-80
paladd = 0,70,248
palmul = .50,.50,.75
trans = add1

[State 680, ˆÊ’uŒÅ’è]
type = PosFreeze
trigger1 = animelemtime(2) < 0

[State 680, •—Ø‚è‰¹]
type = PlaySnd
trigger1 = animelemtime(4) = 0
value = s40,9

[State 0]
type = Explod
trigger1 = animelem = 3
ID = 1055
anim = 1055
postype = p1
pos = 50,-40
bindtime = 99999
removetime = -2
sprpriority = 9
ownpal = 1
scale = 1.9,1.9

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 1
value = s200,6

[State 680, hitdef]
type = HitDef
trigger1 = AnimElem = 3 || AnimElem = 4 || AnimElem = 6
attr = S,SA
hitflag = MAF
guardflag = M
priority = 5,Hit
damage = 70
pausetime = 4,4
sparkno = s6081
sparkxy = 45,-41
hitsound = s1,3
guardsound = s1,0
air.type = High
ground.type = Low
ground.hittime = 18
ground.slidetime = 18
guard.hittime = 18
air.hittime = 120
ground.velocity = -4.45, 0
ground.cornerpush.veloff = 0
guard.velocity = -4.45
guard.cornerpush.veloff = 0
air.velocity = -4.25, -5.25
air.cornerpush.veloff = 0
yaccel = .58
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 120
forcestand = 1
envshake.time = 14
envshake.ampl = 4
envshake.freq = 120

[State 0, TargetState]  
type = TargetState
triggerall = movehit = 1
trigger1 = Numtarget(700) && !p2statetype = A
value = 750
ID = 700
ignorehitpause = 0
persistent = 0

[State 0, TargetState]  
type = ChangeState
triggerall = movehit = 1
trigger1 = Numtarget(700) && !p2statetype = A && target,stateno = 750
value = 749
ignorehitpause = 0
persistent = 0

[State 680, Žc‘œ]
type = AfterImage
trigger1 = time = 0
time = 20
length = 7
Framegap = 4
PalBright = 100,100,170
PalContrast = 128,128,250
PalAdd = 0,0,0
trans = add1

[State 680, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 680, Veladd]
type = Veladd
trigger1 = AnimElem = 3
x = 0
y = 75

[State 680, ƒXƒe[ƒg•ÏX]
type = ChangeState
trigger1 = Pos Y >= 0
value = 749
ctrl = 0
;--------------------------
;Landing
;--------------------------
[Statedef 749]
type    = S
physics = S
ctrl = 0
anim = 701

[State 210,SND]
type = PlaySnd
trigger1 = !time
value = s1,80

[State 1000, fx]
Type = Explod
Trigger1 = !time
Anim = 7402
ID = 7402
Postype = p1
Pos = 0,0
scale = 2.6,2.6
Ownpal = 1
SprPriority = 9
removeongethit = 1

[State 680, hitdef]
type = HitDef
trigger1 = animelemtime(1) >= 0
attr = A,NA
hitflag = MAFDE
guardflag = MA 
animtype = Light
damage = 30,8
pausetime = 0,10
sparkno = s6081
sparkry = 45,-41
hitsound = s1,3
guardsound = s1,0
groundtype = Hard
ground.slidetime = 2
ground.hittime = 1
airtype = Hard
ground.velocity = 0,0
air.velocity = 0,0
fall.recover = 0
getpower = 70,5
givepower = 35,5
id = 700

[State 682, 2]
type = PosSet
triggerall = !time
trigger1 = movehit = 1
y = -15

[State 0, TargetState]  
type = TargetState
trigger1 = Numtarget(700) && !p2statetype = A
trigger1 = movehit
value = 750
ID = 750
ignorehitpause = 1
persistent = 0

[State 682, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 682, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 682, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;P2 State
[Statedef 750]
type    = L
movetype= H
physics = N
velset = 0,0

[State 750, 0]
type = PlayerPush
trigger1 = 1
value = 0
 ignorehitpause = 1

[State 750, 0]
type = posset
trigger1 = 1
y = 0
 ignorehitpause = 1

[State 750, 0]
type = ChangeAnim2
trigger1 = Time = 0
value = 750

[State 750]
Type=SelfState
Trigger1 = alive
Trigger1 = time>=28
value = 5120

[State 750]
Type = SelfState
Trigger1 =! alive
Trigger1 = time >= 28
value = 5150

;===========================================================================
;---------------------------------------------------------------------------
; fireball shot
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 30
ctrl = 0
velset = 0,0
anim = 1100
sprpriority = 2

[State 0]
type = Helper
trigger1 = animelem = 4
ID = 6460
stateno = 6460
postype = p1
pos = 100,-140
sprpriority = 9
ownpal = 1
scale = 1,1

[State 0]
type = Helper
trigger1 = animelem = 4
ID = 6470
stateno = 6470
postype = p1
pos = 100,-120
sprpriority = 9
ownpal = 1
scale = 1,1

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 4
value = s1100,0
channel = 1050

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 4
value = s2,13

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0
helpertype = normal
name = "Projectile"
ID = ifelse(var(51) = 1,1160,1150)
stateno = ifelse(var(51) = 1,1160,1150)
pos = 150,-60
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; EXfireball shot
[Statedef 1110]
type    = S
movetype= A
physics = S
juggle  = 5
;poweradd= -500
ctrl = 0
velset = 0,0
anim = 1100
sprpriority = 2

[State -2, Drive decrease]
type = VarAdd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
trigger1 = !time
var(50) = -500
ignorehitpause = 1
persistent = 0

[State 2000, Helper]
type = Helper
trigger1 = Time = 0
name = "EX"
ID = 7901
stateno = 7901
pos = 0,0
postype = p1
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 1000, fx]
Type = Explod
Trigger1 = animelemtime(1) = 0
Anim = 6028
ID = 6028
Postype = p1
Pos = 0,-190
scale = 1.5,1.5
Ownpal = 1
SprPriority = 9
bindtime = -1
removeongethit = 1
supermovetime = 33
pausemovetime = 33

[State 0, PalFXWiz]
type = PalFX
trigger1 = animelem = 1
time = 50
add = 240,50,0
mul = 250,200,120
sinadd = 110,55,85,10
invertall = 0
color = 0

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 5
value = s1101,0
channel = 1050

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 5
value = s2,13

[State 0]
type = Helper
trigger1 = animelem = 4
ID = 6460
stateno = 6460
postype = p1
pos = 100,-140
sprpriority = 9
ownpal = 1
scale = 1,1

[State 0]
type = Helper
trigger1 = animelem = 4
ID = 6470
stateno = 6470
postype = p1
pos = 100,-120
sprpriority = 9
ownpal = 1
scale = 1,1

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 5
value = s2,13

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(5) = 0
helpertype = normal
name = "Projectile"
ID = ifelse(var(51) = 1,1170,1160)
stateno = ifelse(var(51) = 1,1170,1160)
pos = 120,-70
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; fireball shot(Diagonal)
[Statedef 1101]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 30
ctrl = 0
velset = 0,0
anim = 1101
sprpriority = 2

[State 0]
type = helper
trigger1 = animelem = 4
ID = 6461
stateno = 6461
pos = 30,-340
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 0]
type = helper
trigger1 = animelem = 4
ID = 6471
stateno = 6471
pos = 53,-353
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 5
value = s1100,0
channel = 1050

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 5
value = s2,13

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 2
helpertype = normal
name = "Projectile"
ID = ifelse(var(51) = 1,1161,1151)
stateno = ifelse(var(51) = 1,1161,1151)
pos = 50,-300
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; EXfireball shot(Diagonal)
[Statedef 1111]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= -500
ctrl = 0
velset = 0,0
anim = 1101
sprpriority = 2

[State -2, Drive decrease]
type = VarAdd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
trigger1 = !time
var(50) = -500
ignorehitpause = 1
persistent = 0

[State 2000, Helper]
type = Helper
trigger1 = Time = 0
name = "EX"
ID = 7901
stateno = 7901
pos = 0,0
postype = p1
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 1000, fx]
Type = Explod
Trigger1 = animelemtime(1) = 0
Anim = 6028
ID = 6028
Postype = p1
Pos = 0,-190
scale = 1.5,1.5
Ownpal = 1
SprPriority = 9
bindtime = -1
removeongethit = 1
supermovetime = 33
pausemovetime = 33

[State 0, PalFXWiz]
type = PalFX
trigger1 = animelem = 1
time = 50
add = 240,50,0
mul = 250,200,120
sinadd = 110,55,85,10
invertall = 0
color = 0

[State 0]
type = helper
trigger1 = animelem = 4
ID = 6461
stateno = 6461
pos = 30,-340
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 0]
type = helper
trigger1 = animelem = 4
ID = 6471
stateno = 6471
pos = 53,-353
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 5
value = s1101,0
channel = 1050

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 5
value = s2,13

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 2
helpertype = normal
name = "Projectile"
ID = ifelse(var(51) = 1,1171,1161)
stateno = ifelse(var(51) = 1,1171,1161)
pos = 50,-300
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.7
size.yscale = 1.7

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
;---------------------------------------------------------------------------
; Missil launch LV1
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 30
ctrl = 0
velset = 0,0
anim = 1200
sprpriority = 8

;[State 0]
;type = Explod
;trigger1 = animelem = 4
;ID = 6460
;anim = 6460
;postype = p1
;pos = 110,-120
;bindtime = 99999
;removetime = -2
;sprpriority = 9
;ownpal = 1
;scale = 1.3,1.3

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 4
value = s1000,1

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 4
value = s2,13

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0
helpertype = normal
name = "Projectile"
ID = 7713
stateno = 7713
pos = 186,-275
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0
helpertype = normal
name = "Projectile"
ID = 1250
stateno = 1250
pos = 26,-310
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===========================================================================
;---------------------------------------------------------------------------
;EX Missil launch LV2
[Statedef 1201]
type    = S
movetype= A
physics = S
juggle  = 5
;poweradd= -500
ctrl = 0
velset = 0,0
anim = 1201
sprpriority = 8

[state -2 , I-Comment]
type = Varset
trigger1 = !time
var(31) = 1

[State -2, Drive decrease]
type = VarAdd
triggerall = var(51) = 0
triggerall = var(49) >= 1000
trigger1 = !time
var(50) = -500
ignorehitpause = 1
persistent = 0

[State 2000, Helper]
type = Helper
trigger1 = Time = 0
name = "EX"
ID = 7901
stateno = 7901
pos = 0,0
postype = p1
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1

[State 1000, fx]
Type = Explod
Trigger1 = animelemtime(1) = 0
Anim = 6028
ID = 6028
Postype = p1
Pos = 0,-190
scale = 1.5,1.5
Ownpal = 1
SprPriority = 9
bindtime = -1
removeongethit = 1
supermovetime = 33
pausemovetime = 33

[State 0, PalFXWiz]
type = PalFX
trigger1 = animelem = 1
time = 50
add = 240,50,0
mul = 250,200,120
sinadd = 110,55,85,10
invertall = 0
color = 0

;[State 0]
;type = Explod
;trigger1 = animelem = 4
;ID = 6460
;anim = 6460
;postype = p1
;pos = 110,-120
;bindtime = 99999
;removetime = -2
;sprpriority = 9
;ownpal = 1
;scale = 1.3,1.3

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 4
value = s210,4

[State 210,SND]
type = PlaySnd
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
value = s2,13

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0 || Animelemtime(8) = 0 || Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 7713
stateno = 7713
pos = 186,-275
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(4) = 0
helpertype = normal
name = "Projectile"
ID = 1260
stateno = 1260
pos = 26,-310
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(8) = 0
helpertype = normal
name = "Projectile"
ID = 1261
stateno = 1261
pos = 26,-310
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 280, Projectile]
type = Helper
trigger1 = Animelemtime(12) = 0
helpertype = normal
name = "Projectile"
ID = 1262
stateno = 1262
pos = 26,-310
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Slash!
[Statedef 1300]
type    = S
movetype= A
physics = S
juggle  = 5
poweradd= 30
ctrl = 0
velset = 0,0
anim = 1300
sprpriority = 2

[State 210, Width]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0

[State 240, 1]
type = PlaySnd
trigger1 = Time = 2
value = 1,27

[State 210,SND]
type = PlaySnd
trigger1 = animelem = 2
value = s200,4

[State 240, 3]
type = PosAdd
trigger1 = AnimElem = 4
x = 55

[State 240, 3]
type = PosAdd
trigger1 = AnimElem = 5
x = 15

[State 240, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, SP
hitflag = MAF
guardflag = MA
animtype = hard
damage    = 34,17
guardflag = MA
pausetime = 8,12
sparkno = -1                      ;Spark anim no (Def: set above)
guard.sparkno = s6406 ; 6405
sparkxy = -65,-160; -65,-90; -40,-240
hitsound   = s1,51
guardsound = s1,28
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -27.5,0
air.velocity = -24,-1.5
fall = 0
air.fall = 1
yaccel = 0.85

[State 200, Spark]
type = explod
trigger1 = movehit=1
anim = 6802
id=6802
postype = p2
Pos = -25, -160
pausemovetime = 999
supermovetime = 999
ownpal = 1
scale = 1.3,1.3
sprpriority = 9
persistent = 0
ignorehitpause = 1

[State 200, Spark]
type = explod
trigger1 = movehit=1
anim = 6600+random%3
id=6600
postype = p2
Pos = -25, -160
pausemovetime = 999
supermovetime = 999
ownpal = 1
scale = 1.7,1.7
sprpriority = 9
persistent = 0
ignorehitpause = 1

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1