; KFM's constants and state file.
; There are comments scattered through this file, so you may like to
; take a look if would like to learn more about the cns.

[Data]
;Amount of life to start with
life = 1000
;attack power (more is stronger)
attack = 100
;defensive power (more is stronger)
defence = 100
;Percentage to increase defense everytime player is knocked down
fall.defence_up = 50
;Time which player lies down for, before getting up
liedown.time = 60
;Number of points for juggling
airjuggle = 15
;Default hit spark number for HitDefs
sparkno = S7020
;Default guard spark number
guard.sparkno = 40
;1 to enable echo on KO
KO.echo = 0
;Volume offset (negative for softer)
volume = 0
;Variables with this index and above will not have their values
;reset to 0 between rounds or matches. There are 60 int variables,
;indexed from 0 to 59, and 40 float variables, indexed from 0 to 39.
;If omitted, then it defaults to 60 and 40 for integer and float
;variables repectively, meaning that none are persistent, i.e. all
;are reset. If you want your variables to persist between matches,
;you need to override state 5900 from common1.cns.
IntPersistIndex = 60
FloatPersistIndex = 0

[Size]
xscale = 1           ;Horizontal scaling factor.
yscale = 1           ;Vertical scaling factor.
ground.back = 15     ;Player width (back, ground)
ground.front = 16    ;Player width (front, ground)
air.back = 12        ;Player width (back, air)
air.front = 12       ;Player width (front, air)
height = 60          ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too
head.pos = -5, -90   ;Approximate position of head
mid.pos = -5, -60    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y). Recommended 0,0

[Velocity]
walk.fwd  = 2.4      ;Walk forward
walk.back = -2.2     ;Walk backward
run.fwd  = 4.6, 0    ;Run forward (x, y)
run.back = -4.5,-3.8 ;Hop backward (x, y)
jump.neu = 0,-8.4    ;Neutral jumping velocity (x, y)
jump.back = -2.55    ;Jump back Speed (x, y)
jump.fwd = 2.5       ;Jump forward Speed (x, y)
runjump.back = -2.55,-8.1 ;Running jump speeds (opt)
runjump.fwd = 4,-8.1      ;.
airjump.neu = 0,-8.1      ;.
airjump.back = -2.55      ;Air jump speeds (opt)
airjump.fwd = 2.5         ;.
air.gethit.groundrecover = -4.15,-3.5  ;Velocity for ground recovery state (x, y) **MUGEN 1.0**
air.gethit.airrecover.mul = .5,.2     ;Multiplier for air recovery velocity (x, y) **MUGEN 1.0**
air.gethit.airrecover.add = 0,-3.5    ;Velocity offset for air recovery (x, y) **MUGEN 1.0**
air.gethit.airrecover.back = -5       ;Extra x-velocity for holding back during air recovery **MUGEN 1.0**
air.gethit.airrecover.fwd = 5         ;Extra x-velocity for holding forward during air recovery **MUGEN 1.0**
air.gethit.airrecover.up = -2         ;Extra y-velocity for holding up during air recovery **MUGEN 1.0**
air.gethit.airrecover.down = 9.5      ;Extra y-velocity for holding down during air recovery **MUGEN 1.0**

[Movement]
airjump.num = 1       ;Number of air jumps allowed (opt)
airjump.height = 35   ;Minimum distance from ground before you can air jump (opt)
yaccel = .44          ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching
stand.friction.threshold = 2          ;If player's speed drops below this threshold while standing, stop his movement **MUGEN 1.0**
crouch.friction.threshold = .05       ;If player's speed drops below this threshold while crouching, stop his movement **MUGEN 1.0**
air.gethit.groundlevel = 25           ;Y-position at which a falling player is considered to hit the ground **MUGEN 1.0**
air.gethit.groundrecover.ground.threshold = -20 ;Y-position below which falling player can use the recovery command **MUGEN 1.0**
air.gethit.groundrecover.groundlevel = 10   ;Y-position at which player in the ground recovery state touches the ground **MUGEN 1.0**
air.gethit.airrecover.threshold = -1  ;Y-velocity above which player may use the air recovery command **MUGEN 1.0**
air.gethit.airrecover.yaccel = .35    ;Vertical acceleration for player in the air recovery state **MUGEN 1.0**
air.gethit.trip.groundlevel = 15      ;Y-position at which player in the tripped state touches the ground **MUGEN 1.0**
down.bounce.offset = 0, 20            ;Offset for player bouncing off the ground (x, y) **MUGEN 1.0**
down.bounce.yaccel = .4               ;Vertical acceleration for player bouncing off the ground **MUGEN 1.0**
down.bounce.groundlevel = 12          ;Y-position at which player bouncing off the ground touches the ground again **MUGEN 1.0**
down.friction.threshold = .05         ;If the player's speed drops below this threshold while lying down, stop his movement **MUGEN 1.0**

;Default language victory quotes (optional).  **MUGEN 1.0**
;If this section is included, the default language victory quotes must be in English.
[Quotes]
; Up to 100 victory quotes can be specified per language (victory0 - victory99)
victory1 = "See? The stronger fighter wins! As easy to understand as a flowchart!"
victory2 = "MOVE OVER, BANANA KEN!"
victory3 = "PHEW! I BET THAT WOULD MAKE FOR ONE EXCITING REPLAY!"
victory4 = "YOU LEAVE DAIGO TO ME"

;---------------------------------------------------------------------------
; Variable usage:
; This is a record of the variables that Ken uses. Keeping a record of your
; variable usage helps you avoid careless mistakes later.
; var(1)  - Used in the .cmd for combo condition (updated every tick)
; var(2)  - V-Skill released

; var(4) - V-Skill used
; var(5) - Delay between Shoryuken attempts


;var(20) - Finest KO
;var(31) - THE BEST
;var(32) - THE BEST

;fvar(3) - THE BEST
;fvar(20) - fvar(20)
;fvar(21) - fvar(21)
;fvar(22) - gameX measured


;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

;Training mode detector
[State 0, Helper]
type = Helper
trigger1 = prevstateno = 1911 || prevstateno = 1912 || prevstateno = 1913 || prevstateno = 1914 || prevstateno = 1915 
trigger1 = time = 0
trigger1 = !numhelper(50783)
trigger1 = !numexplod(50783)
trigger1 = numenemy < 2 && !numpartner
trigger1 = roundno = 1 && matchno = 1
trigger1 = life = lifemax
helpertype = normal ;player
name = "Training Mode (Intro skipped)"
ID = 50783
stateno = 50783
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0


[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050
ctrl = 0

[State 0, 5] ;Wait, am I actually on the ground?
type = ChangeState
trigger1 = Pos y < 0
value = 50
ctrl = 1

[State 0, 6] ;Why am I underground, get out of there.
type = PosSet
trigger1 = Pos y > 0
y = 0

[State 0, 7] ;And for that matter, am I real?
type = Destroyself
trigger1 = Ishelper

[State 0, 8]
type = PlaySnd
trigger1 = animelem = 58
value = S5,1
channel = 1

[State 0, 9]
type = PlaySnd
trigger1 = animelem = 127
value = S5,3
channel = 1

;---------------------------------------------------------------------------
; Run forward
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S40,2
volumescale = 230

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 5
value = S40,1
volumescale = 230

[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
value = 0


;---------------------------------------------------------------------------
; Hop backwards
[Statedef 105]
type    = A
physics = A
ctrl = 0
anim = 105
sprpriority = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nostandguard
flag2 = nocrouchguard

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S40,2
volumescale = 230

[State -3, Explod]
type = Explod
trigger1 = time = 0
anim = 8104
ID = 8104
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 2]
type = CtrlSet
trigger1 = Time = 2
value = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; Lose by Time Over
; CNS difficulty: basic
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
; CNS difficulty: basic
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 181+random%5

;---------------------------------------------------------------------------
; Win pose 1 - ORE NO WIN DA SOMETHINGGDSFSD
; CNS difficulty: basic
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 2]
type = PlaySnd
trigger1 = time = 0
value = S5,8
channel = 1

;---------------------------------------------------------------------------
; Win pose 2 - YEY
; CNS difficulty: basic
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, 2]
type = PlaySnd
trigger1 = animelem = 4
value = S5,2
channel = 1

;---------------------------------------------------------------------------
; Win pose 3 - I DID IT!
; CNS difficulty: basic
[Statedef 183]
type = S
ctrl = 0
anim = 183
velset = 0,0

[State 183, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 183, 2]
type = PlaySnd
trigger1 = animelem = 4
value = S5,9+random%4
channel = 1

;---------------------------------------------------------------------------
; Win pose 4 - I DID IT!
; CNS difficulty: basic
[Statedef 184]
type = S
ctrl = 0
anim = 184
velset = 0,0

[State 184, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 184, 2]
type = PlaySnd
trigger1 = animelem = 3
value = S0, 0

[State 184, 3]
type = PlaySnd
trigger1 = animelem = 7
value = S0, 1

[State 184, 4]
type = PlaySnd
trigger1 = animelem = 14
value = S0, 4

[State 184, 5]
type = PlaySnd
trigger1 = animelem = 21
value = S5,9+random%4
channel = 1

[State 184, 6]
type = AssertSpecial
trigger1 = time = [0,230]
flag = roundnotover

;---------------------------------------------------------------------------
; Win pose 5 - It's fun!
; CNS difficulty: basic
[Statedef 185]
type = S
ctrl = 0
anim = 185
velset = 0,0

[State 185, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 185, 2]
type = ScreenBound
trigger1 = 1
value = 0

[State 185, 3]
type = Assertspecial
trigger1 = numexplod(8700)
flag = nobardisplay
flag2 = noFG

[State 185, 4]
type = Explod
trigger1 = time = 1
anim = 8700
ID = 8700
pos = -20,0
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.6,0.5
sprpriority = 890001
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 185, 5]
type = PlaySnd
trigger1 = time = 1
value = 5, 17
channel = 2
abspan = 0

[State 185, 6]
type = PlaySnd
trigger1 = time = 356
value = 5, 18
abspan = 0

[State 185, 7]
type = VelSet
trigger1 = animelem = 3
x = 2.3
y = 0

[State 185, 8]
type = VelSet
trigger1 = animelem = 10
x = 0

[State 185, 9]
type = AssertSpecial
trigger1 = time = [0,463]
flag = roundnotover

;---------------------------------------------------------------------------
; Pre-intro
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = StageVar(info.name) = "Windows Destruction"
trigger1 = enemynear, name = "Bonzi Buddy"
value = 1990

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 1911+random%5

;---------------------------------------------------------------------------
; Introduction 1
; CNS difficulty: basic
[Statedef 1911]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 1910, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 1910, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 1910, 3]
type = PlaySnd
trigger1 = Animelem = 2
value = 5,13

[State 1910, 4] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Introduction 2
; CNS difficulty: basic
[Statedef 1912]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 1912, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 191

[State 1912, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 1912, 3]
type = PlaySnd
trigger1 = Animtime = 0
value = 5,1

[State 1912, 4] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Introduction 3
; CNS difficulty: basic
[Statedef 1913]
type = S
ctrl = 0
anim = 192
velset = 0,0

[State 1913, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 192

[State 1913, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 1913, 3]
type = PlaySnd
trigger1 = Animelem = 7
value = 5,14

[State 1913, 4] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Introduction 4
; CNS difficulty: basic
[Statedef 1914]
type = S
ctrl = 0
anim = 193
velset = 0,0

[State 19140, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 193

[State 1914, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 1914, 3]
type = PlaySnd
trigger1 = Animelem = 4
value = 5,15

[State 1914, 4] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Introduction 5
; CNS difficulty: basic
[Statedef 1915]
type = S
ctrl = 0
anim = 194
velset = 0,0

[State 1915, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 194

[State 1915, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 1915, 3]
type = PlaySnd
trigger1 = Animelem = 21
value = 5,16

[State 1915, 4]
type = PlaySnd
trigger1 = animelem = 5
value = S0, 0

[State 1915, 5]
type = PlaySnd
trigger1 = animelem = 8
value = S0, 1

[State 1915, 6]
type = PlaySnd
trigger1 = animelem = 14
value = S0, 4

[State 1915, 7] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Introduction VS Bonzi on Windows Destruction (Just go straight to idle pose)
; CNS difficulty: basic
[Statedef 1990]
type = S
ctrl = 0
anim = 0
velset = 0,0
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, 3] ;Change to stand state when done
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
; CNS difficulty: easy
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, 2]
type = PlaySnd
trigger1 = animelem = 4
value = S5,1
channel = 1

[State 195, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Stand Light Punch
; CNS difficulty: easy
[Statedef 200]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
;Commonly-used controllers:
velset = 0,0                     ;Set velocity (x,y) (Def: no change)
ctrl = 0                         ;Set ctrl (Def: no change)
anim = 200                       ;Change animation (Def: no change)
poweradd = 10                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set p1's sprite layering priority to 2 (in front)
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0007

[State 200, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA                     ;Attribute: Standing, Normal Attack
damage = 13, 2                   ;Damage that move inflicts, guard damage
animtype = Light                 ;Animation type: Light, Medium, Heavy, Back (def: Light)
guardflag = MA                   ;Flags on how move is to be guarded against
hitflag = MAF                    ;Flags of conditions that move can hit
priority = 3, Hit                ;Attack priority: 0 (least) to 7 (most), 4 default
;Hit/Miss/Dodge type (Def: Hit)
pausetime = 8, 8                 ;Time attacker pauses, time opponent shakes
sparkno = S7000                  ;Spark anim no (Def: set above)
guard.sparkno = S7005            ;Guard Spark anim no (Def: set above)
sparkxy = -10, -76               ;X-offset for the "hit spark" rel. to p2,
;Y-offset for the spark rel. to p1
hitsound = S6, 0                  ;Sound to play on hit
guardsound = S0,5
ground.type = High               ;Type: High, Low, Trip (def: Normal)
ground.slidetime = 5             ;Time that the opponent slides back
ground.hittime  = 11             ;Time opponent is in hit state
ground.velocity = -4             ;Velocity at which opponent is pushed
airguard.velocity = -1.9,-.8     ;Guard velocity in air (def: (air.xvel*1.5, air.yvel/2))
air.type = High                  ;Type: High, Low, Trip (def: same as ground.type)
air.velocity = -1.4,-3           ;X-velocity at which opponent is pushed,
;Y-velocity at which opponent is pushed
air.hittime = 15                 ;Time before opponent regains control in air

[State 200, 2]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing medium punch
; CNS difficulty: easy
[Statedef 210]
type    = S
movetype= A
physics = S
poweradd= 30
ctrl = 0
velset = 0,0
anim = 210
sprpriority = -1
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0007

[State 210, Width]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 37
guardflag = MA
pausetime = 12,16
sparkno = S7010
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,1
guardsound = S0,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 16
ground.velocity = -2.5
air.velocity = -2.5,-4
forcenofall = 1

[State 210, 3]
type = ChangeAnim
trigger1 = AnimElemTime(5) > 0 && AnimElemTime(6) <= 0
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
value = 210
elem = 6

[State 210, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong punch
; CNS difficulty: easy
[Statedef 220]
type    = S
movetype= A
physics = S
poweradd= 45
ctrl = 0
velset = 0,0
anim = 220
sprpriority = -1
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0007

[State 220, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 4

[State 220, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Hard
damage    = 44, 13
guardflag = MA
pausetime = 6,17
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,2
guardsound = S0,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 16
ground.velocity = -3.5
air.velocity = -1.5,-4

[State 220, 3]
type = PosAdd
trigger1 = animelem = 3
trigger2 = animelem = 4
x = 6

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Standing light kick
; CNS difficulty: easy
[Statedef 230]
type    = S
movetype= A
physics = S
poweradd= 11
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0007

[State 230, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 230, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 16
guardflag = MA
pausetime = 12,12
sparkno = S7000
guard.sparkno = S7005
sparkxy = -10,-37
hitsound   = S6,3
guardsound = S0,5
ground.type = Low
ground.slidetime = 10
ground.hittime  = 14
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing medium kick
; CNS difficulty: easy
[Statedef 240]
type    = S
movetype= A
physics = S
poweradd= 30
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0007

[State 240, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 33
guardflag = MA
pausetime = 12,16
sparkno = S7010
guard.sparkno = S7005
sparkxy = -10,-60
hitsound   = S6,4
guardsound = S0,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -6
air.velocity = -2.2,-3.2

[State 240, 3]
type = PosAdd
trigger1 = AnimElem = 3
x = 5

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Standing strong kick
; CNS difficulty: easy
[Statedef 250]
type    = S
movetype= A
physics = S
poweradd= 50
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0007

[State 210, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 4

[State 250, 2]
type = HitDef
trigger1 = Animelem = 4
attr = S, NA
animtype  = Hard
damage    = 49, 25
guardflag = MA
pausetime = 9,17
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-60
hitsound   = S6,5
guardsound = S0,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -7, -2
air.velocity = -3,-4
fall = 1

[State 250, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light punch
; CNS difficulty: easy
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
ctrl = 0
anim = 400
sprpriority = 2
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0007

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 13
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 10,11
sparkno = S7000
guard.sparkno = S7005
sparkxy = -10,-42
hitsound   = S6,0
guardsound = S0,5
ground.type = Low
ground.slidetime = 4
ground.hittime  = 9
ground.velocity = -2
air.velocity = -1.5,-3

[State 400, 3]
type = CtrlSet
trigger1 = Time = 6
value = 1

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
;Crouching medium punch
; CNS difficulty: easy
[Statedef 410]
type    = C
movetype= A
physics = C
poweradd= 25
ctrl = 0
anim = 410
sprpriority = 2
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0007

[State 410, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 410, 3]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = 29
animtype  = Medium
hitflag = MAF
guardflag = MA
pausetime = 12,16
sparkno = S7010
guard.sparkno = S7005
sparkxy = -10,-46
hitsound   = S6,2
guardsound = S0,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -3
air.velocity = -3,-4

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------------------------------------------------------
;Crouching strong punch
; CNS difficulty: easy
[Statedef 420]
type    = C
movetype= A
physics = C
poweradd= 35
ctrl = 0
anim = 420
sprpriority = 2
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0007

[State 420, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 420, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = 43, 26
animtype  = Medium
hitflag = MAF
guardflag = L
pausetime = 0,12
sparkno = S7020
sparkxy = -10,-53
guard.sparkno = S7005
hitsound   = S6,2
guardsound = S0,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -0.5, -7
air.velocity = -0.25,-8

[State 420, 3]
type = PosAdd
trigger1 = animelem = 4
x = 10

[State 420, 4]
type = ChangeState
trigger1 = command = "holdup"
trigger1 = time > 7
trigger1 = movehit
value = 40
ctrl = 1

[State 420, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouching light kick
; CNS difficulty: easy
[Statedef 430]
type    = C
movetype= A
physics = C
poweradd= 11
ctrl = 0
anim = 430
sprpriority = 2
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0007

[State 430, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 430, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 18
animtype  = Light
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = S7000
guard.sparkno = S7005
sparkxy = -10,-8
hitsound   = S6,3
guardsound = S0,5
ground.type = Low
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -2
air.velocity = -2,-3
down.velocity = -3,0
down.hittime = 22

[State 430, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Medium Kick
; CNS difficulty: easy
[Statedef 440]
type    = C
movetype= A
physics = C
poweradd= 35
ctrl = 0
anim = 440
sprpriority = 2
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0007

[State 440, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 2

[State 440, 3]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 32
hitflag = MAFD
guardflag = L
pausetime = 12,16
sparkno = S7010
guard.sparkno = S7005
sparkxy = -5,-10
hitsound   = S6,4
guardsound = S0,5
ground.type = Low
ground.slidetime = 10
ground.hittime  = 17
ground.velocity = -1.5
air.velocity = -1.2,-3

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Crouch Strong Kick
; CNS difficulty: easy
[Statedef 450]
type    = C
movetype= A
physics = C
poweradd= 46
ctrl = 0
anim = 450
sprpriority = 2
velset = 3, 0
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0007

[State 450, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 450, 3]
type = HitDef
trigger1 = animelem = 3
attr = C, NA
damage    = 50, 26
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkno = S7020
sparkxy = -5,-10
guard.sparkno = S7005
hitsound   = S6,5
guardsound = S0,5
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 17
ground.velocity = -1.5,-2
air.velocity = -1.2,-3
guard.velocity = -5
fall = 1

[State 450, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;Jump Light Punch
; CNS difficulty: easy
[Statedef 600]
type    = A
movetype= A
physics = A
poweradd= 5
ctrl = 0
anim = 600
sprpriority = 2
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0016

[State 600, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 600, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 10
guardflag = HA
priority = 3
pausetime = 7,8
sparkno = S7000
guard.sparkno = S7005
sparkxy = -10,-58
hitsound   = S6,0
guardsound = S0,5
ground.type = High
ground.slidetime = 5
ground.hittime  = 8
ground.velocity = -4
air.velocity = -1.3,-3
air.hittime = 14

[State 600, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1

;---------------------------------------------------------------------------
;Jump Medium Punch
; CNS difficulty: easy
[Statedef 610]
type    = A
movetype= A
physics = A
poweradd= 30
ctrl = 0
anim = 610
sprpriority = 2
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0016

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 42
guardflag = HA
priority = 4
pausetime = 12,16
sparkno = S7010
guard.sparkno = S7005
sparkxy = -10,-55
hitsound   = S6,1
guardsound = S0,5
animtype = Med
ground.type = High
ground.slidetime = 12
ground.hittime  = 14
ground.velocity = -6
air.velocity = -3,-4

;---------------------------------------------------------------------------
;Jump Strong Punch
; CNS difficulty: easy
[Statedef 620]
type    = A
movetype= A
physics = A
poweradd= 60
juggle = 3
ctrl = 0
anim = 620
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(31)
flag = nojugglecheck
ignorehitpause = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = var(31)
trigger1 = time = 0
time = 25
length = 12
trans = add1
paladd = 0,0,0
palmul = 1,1,1
palbright = 10,10,10
palcontrast = 250,224,120
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0189
ignorehitpause = 1

[State 620, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 0, 4

[State 620, 2]
type = PlaySnd
trigger1 = Time = 0
value = 5, 0
channel = 1

[State 620, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 10

[State 620, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 1 
y = -7.6

[State 620, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(5) >= 0
y = 0.47

[State 620, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 0

[State 620, 4]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 55, 5
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkno = S7020
sparkxy = -10,-70
hitsound   = S6,7
guardsound = S0,5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -1,-12
guard.velocity = -7
air.velocity = -1,-12
fall = 1
fall.recover = 0

[State 620, 3]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1101

;---------------------------------------------------------------------------
;Jump Light Kick
; CNS difficulty: easy
[Statedef 630]
type    = A
movetype= A
physics = A
poweradd= 10
ctrl = 0
anim = 630
sprpriority = 2
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0016

[State 630, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 0

[State 630, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 16
guardflag = HA
priority = 3
pausetime = 8,8
sparkno = S7010
guard.sparkno = S7005
sparkxy = -5,-35
hitsound   = S6,3
guardsound = S0,5
ground.type = High
ground.slidetime = 6
ground.hittime  = 10
ground.velocity = -4
air.velocity = -2,-3
air.hittime = 14

;---------------------------------------------------------------------------
;Jump Medium Kick
; CNS difficulty: easy
[Statedef 640]
type    = A
movetype= A
physics = A
poweradd= 30
ctrl = 0
anim = 640
sprpriority = 2
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0016

[State 640, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 640, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 35
guardflag = HA
priority = 4
pausetime = 12,16
sparkno = S7010
guard.sparkno = S7005
sparkxy = -10,-40
hitsound   = S6,4
guardsound = S0,5
animtype = Med
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -3,-4

;---------------------------------------------------------------------------
;Jump Strong Kick
; CNS difficulty: easy
[Statedef 650]
type    = A
movetype= A
physics = A
poweradd= 60
ctrl = 0
anim = 650
sprpriority = 2
juggle = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0016

[State 650, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 1

[State 650, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 45, 14
guardflag = HA
priority = 4
pausetime = 12,12
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-40
hitsound   = S6,5
guardsound = S0,5
animtype = Med
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -9,-2 
air.velocity = -9,-2
fall = 1


;---------------------------------------------------------------------------
; V-Skill: The Bestep in the World
[Statedef 900]
type    = S
movetype= I
physics = S
velset = const(velocity.run.fwd.x)*2.5,0
anim = 900
ctrl = 0

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 0, VarSet]
type = VarSet
trigger1 = var(4) != 1
trigger1 = time = 0
v = 4
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 2
value = 0

[State 0, VarSet]
type = VarSet
triggerall = time < 9
trigger1 = command != "hold_b"
trigger2 = command != "hold_y"
v = 2
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S40,2
volumescale = 230

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S40,1
volumescale = 230

[State 100, 4]
type = ChangeState
triggerall = !var(59)
triggerall = time > 3
triggerall = time <= 6
trigger1 = command = "holdback"
value = 902
ctrl = 0

[State 100, 4]
type = ChangeState
triggerall = time >= 9
trigger1 = var(2) = 0
trigger2 = var(5) = 0
trigger2 = var(59)
value = 901
ctrl = 0

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;The Bestep in the World (Shoryuken)
[Statedef 901]
type    = S
movetype= A
physics = S
juggle = 3
poweradd= 55
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 2

[State 0, AfterImage]
type = AfterImage
trigger1 = var(31)
trigger1 = time = 0
time = 25
length = 12
trans = add1
paladd = 0,0,0
palmul = 1,1,1
palbright = 10,10,10
palcontrast = 250,224,120
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(31)
flag = nojugglecheck
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(31)
trigger1 = time = 0
value = S950,3
volumescale = 130
abspan = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.033
ignorehitpause = 1

[State 1100, Explod]
type = Explod
trigger1 = Time = 0
anim = 8100
ID = 8100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 1100, Explod]
type = Explod
trigger1 = Time = 0
anim = 8105
ID = 8105
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,1.1
sprpriority = -4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 1100, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 4

[State 1100, 2]
type = PlaySnd
trigger1 = Time = 0
value = 5, 0
channel = 1

[State 1100, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 10

[State 1100, 4]
type = StateTypeSet
trigger1 = AnimElem = 4
stateType = A
physics = N

[State 1100, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 3.5
y = -4.5

[State 1100, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(4) >= 0
y = 0.47

[State 1100, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 1100, 4]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 55, 5
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,7
guardsound = S0,5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -1,-8
guard.velocity = -7
air.velocity = -1,-8
fall = 1
fall.recover = 0

[State 1051, 3]
type = ChangeState
trigger1 = time > 18
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1101

;---------------------------------------------------------------------------
;The Bestep in the World (Cancel)
[Statedef 902]
type    = S
movetype= I
physics = S
velset = const(velocity.walk.fwd.x),0
anim = 901
ctrl = 0

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; The Heatest Rush in the World
[Statedef 950]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 20000
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 3
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 7
x = const(velocity.run.fwd.x)*2.8

[State 0, NotHitBy]
type = NotHitBy
trigger1 = animelem = 7
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 14

[State 0, PlayerPush]
type = PlayerPush
trigger1 = animelem = 7 
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S950,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S950,2
volumescale = 130
abspan = 0

[State 0, Pause]
type = Pause
trigger1 = time = 0
time = 25
movetime = 25

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "Vinetrigger activation"
ID = 9500
stateno = 9500
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S950,1

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 8105
ID = 8105
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = 1,1
sprpriority = -50
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 8041
ID = 8041
pos = 0,-60
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 99999
supermovetime = 99999
scale = 0.8,0.8
sprpriority = -2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1


[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 80420
ID = 80420
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 99999
supermovetime = 99999
scale = 1.2,0.75
sprpriority = -5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 7
helpertype = normal ;player
name = "Shameless Recycling"
ID = 8040
stateno = 8040 
pos = 0,-60
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 80421
ID = 80421
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 99999
supermovetime = 99999
scale = 1,1
sprpriority = -5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 80422
ID = 80422
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 99999
supermovetime = 99999
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, VarSet]
type = VarSet
trigger1 = animtime = 0
v = 31
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Initiate Vinetrigger - The Heatest Rush in the World
; CNS difficulty: medium
[Statedef 9500]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 9999
ctrl = 0
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = 1
anim = 9101
ID = 9101
pos = 0,0
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 99999
supermovetime = 99999
scale = 2,2
sprpriority = -500
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time <= 10
v = 6
value = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = time >= 34
trigger1 = time <= 44
v = 6
value = -1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 9101
trans = addalpha
alpha = 20*var(6), 256-(15*var(6))

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 8040
ID = 8040
pos = 0,-60
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 9
pausemovetime = 999999
supermovetime = 999999
scale = 3,3
sprpriority = 50
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 8040
ID = 8041
pos = 0,-60
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 9
pausemovetime = 999999
supermovetime = 999999
scale = 2,2
sprpriority = 50
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 8040
ID = 8042
pos = 0,-60
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 9
pausemovetime = 999999
supermovetime = 999999
scale = 2,2
sprpriority = 50
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8040
trans = addalpha
scale = 3-(time*0.333), 3-(time*0.333)
alpha = 256-(time*28), 256

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8041
trans = addalpha
scale = 2-(time*0.222), 1-(time*0.111)
alpha = 256-(time*28), 256

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 8042
trans = addalpha
scale = 1-(time*0.111), 2-(time*0.222)
alpha = 256-(time*28), 256

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time >= 44

;---------------------------------------------------------------------------
; Really big hits
; CNS difficulty: easy
[Statedef 8040]
type    = S
movetype= I
physics = N
ctrl = 0
velset = 0,0
anim = 8040
sprpriority = 5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 150-(time*15),256

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = time*45
scale = 0+(time*0.2),0+(time*0.2)

[State 0, Explod]
type = Explod
trigger1 = parent, stateno != 950
trigger1 = time = 0
anim = 8050
ID = 8050
pos = 160,120
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 9999999
scale = 0.5,0.5
sprpriority = -3
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;SHORYUKEN
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle = 3
poweradd= 55
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(31)
flag = nojugglecheck
ignorehitpause = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = var(31)
trigger1 = time = 0
time = 25
length = 12
trans = add1
paladd = 0,0,0
palmul = 1,1,1
palbright = 10,10,10
palcontrast = 250,224,120
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(31)
trigger1 = time = 0
value = S950,3
volumescale = 130
abspan = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0189
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[State 1100, Explod]
type = Explod
trigger1 = Time = 0
anim = 8100
ID = 8100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 1100, Explod]
type = Explod
trigger1 = Time = 0
anim = 8105
ID = 8105
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,1.1
sprpriority = -4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 1100, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 4

[State 1100, 2]
type = PlaySnd
trigger1 = Time = 0
value = 5, 0
channel = 1

[State 1100, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 10

[State 1100, 4]
type = StateTypeSet
trigger1 = AnimElem = 4
stateType = A
physics = N

[State 1100, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 1 
y = -6.5

[State 1100, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(4) >= 0
y = 0.47

[State 1100, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 1100, 4]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 55, 5
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,7
guardsound = S0,5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -1,-12
guard.velocity = -7
air.velocity = -1,-12
fall = 1
fall.recover = 0

[State 1051, 3]
type = ChangeState
trigger1 = time > 18
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1101

;---------------------------------------------------------------------------
;SHORYUKEN
[Statedef 1110]
type    = S
movetype= A
physics = S
juggle = 3
poweradd= 55
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(31)
flag = nojugglecheck
ignorehitpause = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = var(31)
trigger1 = time = 0
time = 25
length = 12
trans = add1
paladd = 0,0,0
palmul = 1,1,1
palbright = 10,10,10
palcontrast = 250,224,120
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(31)
trigger1 = time = 0
value = S950,3
volumescale = 130
abspan = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0189
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[State 1100, Explod]
type = Explod
trigger1 = Time = 0
anim = 8100
ID = 8100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 1110, Explod]
type = Explod
trigger1 = Time = 0
anim = 8105
ID = 8105
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,1.1
sprpriority = -4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 1110, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 4

[State 1110, 2]
type = PlaySnd
trigger1 = Time = 0
value = 5, 0
channel = 1

[State 1100, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 14

[State 1110, 4]
type = StateTypeSet
trigger1 = AnimElem = 4
stateType = A
physics = N

[State 1110, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 2 
y = -7.5

[State 1110, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(4) >= 0
y = 0.47

[State 1110, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 1110, 4]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 75, 15
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,7
guardsound = S0,5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -1,-12
guard.velocity = -7
air.velocity = -1,-12
fall = 1
fall.recover = 0

[State 1051, 3]
type = ChangeState
trigger1 = time > 18
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1101

;---------------------------------------------------------------------------
;SHORYUKEN
[Statedef 1120]
type    = S
movetype= A
physics = S
juggle = 3
poweradd= 55
velset = 0,0
anim = 1120
ctrl = 0
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = var(31)
flag = nojugglecheck
ignorehitpause = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = var(31)
trigger1 = time = 0
time = 25
length = 12
trans = add1
paladd = 0,0,0
palmul = 1,1,1
palbright = 10,10,10
palcontrast = 250,224,120
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(31)
trigger1 = time = 0
value = S950,3
volumescale = 130
abspan = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0189
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[State 1100, Explod]
type = Explod
trigger1 = Time = 0
anim = 8100
ID = 8100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 1120, Explod]
type = Explod
trigger1 = Time = 0
anim = 8105
ID = 8105
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,1.1
sprpriority = -4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 1120, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 4

[State 1120, 2]
type = PlaySnd
trigger1 = Time = 0
value = 5, 0
channel = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 1125
ID = 1125
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 30
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 0.5,0.5
sprpriority = 3
ontop = 0
ownpal = 0
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1100,0
volumescale = 130

[State 0, Explod]
type = Explod
trigger1 = time = 7
anim = 1126
ID = 1126
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 30
vel = 0,0
accel = 0,0
random = 0,0
removetime = 32
scale = 0.5, 0.5
sprpriority = 2
ontop = 0
ownpal = 0
removeongethit = 1

[State 1120, 4]
type = StateTypeSet
trigger1 = AnimElem = 4
stateType = A
physics = N

[State 1100, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 15

[State 1120, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 3 
y = -8.5

[State 1120, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(4) >= 0
y = 0.47

[State 1120, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 1120, 4]
type = HitDef
trigger1 = Time = 0
attr = A, SA
animtype  = Medium
damage    = 95, 25
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 0,12
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,7
guardsound = S0,5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -1.5,-12
guard.velocity = -7
air.velocity = -1.5,-12
fall = 1
fall.recover = 0

[State 1120, 3]
type = ChangeState
trigger1 = time > 18
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1101

;---------------------------------------------------------------------------

[Statedef 1101]
type    = S
movetype= I
physics = S
anim = 1101
sprpriority = 1
velset = 0,0

[State 1052, 1] ;Reset y-position to ground level
type = PosSet
trigger1 = Time = 0
y = 0

[State 1052, 2]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0

[State 1052, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------

[Statedef 11000]
type    = S
movetype= I
physics = S
anim = 11000
sprpriority = 1
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 11000, DestroySelf]
type = DestroySelf
trigger1 = root, movetype = H
trigger2 = stateno = 5120

;---------------------------------------------------------------------------
;Shoryureppa
[Statedef 3050]
type    = S
movetype= A
physics = N
poweradd= 55
velset = 0,0
anim = 3050
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 32
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(31)
v = 32
value = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 18

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(32)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0242
ignorehitpause = 1

[State 3050, Super Pause]
type = SuperPause
trigger1 = time = 6
pos = 10, -27
anim = S8500
sound = S0, 6
poweradd = -1000

[State 0, AfterImage]
type = AfterImage
trigger1 = var(32)
trigger1 = animelem = 4
time = 86
length = 12
trans = add1
paladd = 0,0,0
palmul = 1,1,1
palbright = 10,10,10
palcontrast = 250,224,120
ignorehitpause = 1

[State 3050, 1]
type = VelSet
trigger1 = animelem = 4
x = 2.8

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(32)
trigger1 = time = 13
trigger2 = time = 33
trigger3 = animelem = 23
value = S950,3
volumescale = 130
abspan = 0


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5 
value = S5,4
channel = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S5,5
channel = 1

[State 1100, 1]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 14
trigger3 = animelem = 26
value = 0, 4

[State 220, 2]
type = HitDef
triggerall = !var(32)
trigger1 = AnimElem = 3
attr = S, HA
animtype  = Hard
damage    = 54, 13
getpower = 0,0
guardflag = MA
pausetime = 17,17
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,2
guardsound = S0,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 32
ground.velocity = -1.5
air.velocity = -1.5,-3

[State 220, 2]
type = HitDef
triggerall = var(32)
trigger1 = AnimElem = 3
attr = S, HA
animtype  = Hard
damage    = 64, 13
getpower = 45,45
guardflag = MA
pausetime = 22,22
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,2
guardsound = S0,5
ground.type = Low
ground.slidetime = 12
ground.hittime  = 32
ground.velocity = -1.5
air.velocity = -1.5,-3

[State 220, 2]
type = HitDef
triggerall = !var(32)
trigger1 = animelem = 14
attr = S, HA
animtype  = Hard
damage    = 54, 13
getpower = 0,0
guardflag = MA
pausetime = 17,17
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,2
guardsound = S0,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 32
ground.velocity = -1.5
air.velocity = -1.5,-2

[State 220, 2]
type = HitDef
triggerall = var(32)
trigger1 = animelem = 14
attr = S, HA
animtype  = Hard
damage    = 64, 13
getpower = 45,45
guardflag = MA
pausetime = 22,22
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,2
guardsound = S0,5
ground.type = High
ground.slidetime = 12
ground.hittime  = 32
ground.velocity = -1.5
air.velocity = -1.5,-2

[State 1120, Explod]
type = Explod
trigger1 = AnimElem = 3
trigger2 = animelem = 14
anim = 8105
ID = 8105
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,1.1
sprpriority = -4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 1120, Explod]
type = Explod
trigger1 = Time = 58
anim = 8105
ID = 8105
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,1.5
sprpriority = -4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 26
statetype = A       ;S,A,C,L
movetype = A
physics = N

[State 3050, 1]
type = VelSet
trigger1 = animelem = 26
x = 2
y = -8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 24
value = S1100,0
volumescale = 130

[State 0, Explod]
type = Explod
trigger1 = animelem = 26
anim = 1126
ID = 1126
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 30
vel = 0,0
accel = 0,0
random = 0,0
removetime = 19
scale = 0.5, 0.5
sprpriority = 2
ontop = 0
ownpal = 0
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 24
anim = 1125
ID = 1125
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 30
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 0.5, 0.5
sprpriority = 2
ontop = 0
ownpal = 0
removeongethit = 1

[State 1120, 4]
type = HitDef
trigger1 = !var(32)
trigger1 = animelem = 24
attr = A, HA
animtype  = Medium
damage    = 165, 45
getpower = 0,0
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 0,12
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,6
guardsound = S0,5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -0.2,-16
guard.velocity = -7
air.velocity = -0.2,-16
envshake.time = 25
envshake.ampl = 7
envshake.freq = 176
fall = 1
fall.recover = 0

[State 1120, 4]
type = HitDef
trigger1 = var(32)
trigger1 = animelem = 24
attr = A, HA
animtype  = Medium
damage    = 185, 45
getpower = 130,130
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 0,12
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,6
guardsound = S0,5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -0.2,-16
guard.velocity = -7
air.velocity = -0.2,-16
envshake.time = 25
envshake.ampl = 7
envshake.freq = 176
fall = 1
fall.recover = 0

[State 3050, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(27) >= 0
y = 0.47

[State 3050, 3]
type = ChangeState
trigger1 = time > 65
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1101

;---------------------------------------------------------------------------
;Shinryuken
[Statedef 3100]
type    = S
movetype= A
physics = N
poweradd= 55
velset = 0,0
anim = 3100
ctrl = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 32
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 17

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(31)
v = 32
value = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = var(31) = 0
trigger1 = fvar(3) < 1
trigger1 = time = 0
fv = 3
value = 0.0242
ignorehitpause = 1

[State 3100, Super Pause]
type = SuperPause
trigger1 = time = 6
pos = 10, -27
anim = S8500
sound = S0, 6
poweradd = -1000

[State 3100, PlaySnd]
type = PlaySnd
trigger1 = time = 5 
value = S5,6
channel = 1

[State 3100, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 620, 4]
type = HitDef
trigger1 = !var(32)
trigger1 = Time = 0
attr = S, HA
animtype  = Hard
damage    = 35, 5
getpower = 0,0
priority  = 7, Hit
hitflag = MAFD
guardflag = MA
pausetime = 0,4
sparkno = S7020
sparkxy = -10,-70
hitsound   = S6,7
guardsound = S0,5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = 2
guard.velocity = -1
air.velocity = 2,-7

[State 620, 4]
type = HitDef
trigger1 = var(32)
trigger1 = Time = 0
attr = S, HA
animtype  = Hard
damage    = 35, 5
getpower = 25,25
priority  = 7, Hit
hitflag = MAFD
guardflag = MA
pausetime = 0,4
sparkno = S7020
sparkxy = -10,-70
hitsound   = S6,7
guardsound = S0,5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = 2
guard.velocity = -1
air.velocity = 2,-7


[State 3100, 1]
type = PlaySnd
trigger1 = animtime = 0
value = 0, 4


[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 3101
ctrl = 0

;Shinryuken
[Statedef 3101]
type    = A
movetype= A
physics = N
poweradd= 55
velset = 0,0
anim = 3101
ctrl = 0
sprpriority = 2

[State 0, AfterImage]
type = AfterImage
trigger1 = var(32)
trigger1 = time = 0
time = 30
length = 12
trans = add1
paladd = 0,0,0
palmul = 1,1,1
palbright = 10,10,10
palcontrast = 250,224,120
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(32)
trigger1 = time = 0
value = S950,4
volumescale = 130
abspan = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(32)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = var(32)
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0.5
y = -9

[State 3101, PlaySnd]
type = PlaySnd
trigger1 = time = 0 
value = S5,7
channel = 1


[State 1100, 1]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 7
trigger3 = animelem = 10
value = 0, 2

[State 1100, 1]
type = PlaySnd
trigger1 = animelem = 13
value = 0, 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1100,1
volumescale = 130

[State 3101, Explod]
type = Explod
trigger1 = time = 0
anim = 3105
ID = 3105
pos = 0,-144
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 28
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = -5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 3101, Explod]
type = Explod
trigger1 = time = 0
anim = 3106
ID = 3106
pos = 0,-144
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 28
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 25
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 3101, HitDef]
type = HitDef
triggerall = !var(32)
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
trigger3 = AnimElem = 5
trigger4 = AnimElem = 7
trigger5 = AnimElem = 9
trigger6 = AnimElem = 10
trigger7 = AnimElem = 12
attr = A, HA
animtype  = Medium
damage    = 25, 5
getpower = 0,0
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 0,0
sparkno = S7000+((random%2)*10)
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,4
guardsound = S0,5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = 0,-20
guard.velocity = -7
air.velocity = 0,-7

[State 3101, HitDef]
type = HitDef
triggerall = var(32)
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
trigger3 = AnimElem = 5
trigger4 = AnimElem = 7
trigger5 = AnimElem = 9
trigger6 = AnimElem = 10
trigger7 = AnimElem = 12
attr = A, HA
animtype  = Medium
damage    = 30, 5
getpower = 21,21
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 0,0
sparkno = S7000+((random%2)*10)
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,4
guardsound = S0,5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = 0,-20
guard.velocity = -7
air.velocity = 0,-7

[State 3101, HitDef]
type = HitDef
triggerall = !var(32)
trigger1 = animelem = 13
attr = A, HA
animtype  = Medium
damage    = 165, 45
getpower = 0,0
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 25,25
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,6
guardsound = S0,5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -4.5,-12
guard.velocity = -7
air.velocity = -4.5,-12
fall = 1
fall.recover = 0

[State 3101, HitDef]
type = HitDef
triggerall = var(32)
trigger1 = animelem = 13
attr = A, HA
animtype  = Medium
damage    = 205, 45
getpower = 144,144
priority  = 5
hitflag = MAF
guardflag = MA
pausetime = 8,25
sparkno = S7020
guard.sparkno = S7005
sparkxy = -10,-70
hitsound   = S6,6
guardsound = S0,5
ground.type = Low
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -4.5,-12
guard.velocity = -7
air.velocity = -4.5,-12
fall = 1
fall.recover = 0

[State 3050, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(8) >= 0
y = 0.47

[State 3101, Changestate]
type = ChangeState
trigger1 = time > 40
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 3102

[Statedef 3102]
type    = S
movetype= I
physics = S
anim = 3102
sprpriority = 1
velset = 0,0

[State 3102, 1] ;Reset y-position to ground level
type = PosSet
trigger1 = Time = 0
y = 0

[State 3102, 2]
type = PlaySnd
trigger1 = Time = 0
value = 40, 0

[State 3102, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; Downed get-hit (getting up)
[Statedef 5120]
type    = L
movetype= I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = vel x > 0
trigger1 = anim != 5121
value = 5121

[State 5120, 2]
type = VelSet
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = Time = 0
x = 0

[State 5120, 2]
type = VelSet
trigger1 = command = "holdback"
trigger1 = Time = 0
x = -2.8

[State 5120, 2]
type = VelSet
trigger1 = command = "holdfwd"
trigger1 = Time = 0
x = 7

[State 0, PlayerPush]
type = PlayerPush
trigger1 = vel x = 0
value = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = vel x != 0
value = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Air get-hit (fall recovery on ground)
[Statedef 5201]
type    = A
movetype= H
physics = A
anim = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < Const720p(-20)

[State 5201, 2]
type = VelSet
trigger1 = command = "holdback"
trigger1 = Time = 0
x = Const(velocity.air.gethit.groundrecover.x)
y = Const(velocity.air.gethit.groundrecover.y)

[State 5201, 2]
type = VelSet
trigger1 = command = "holdfwd"
trigger1 = Time = 0
x = -(Const(velocity.air.gethit.groundrecover.x))
y = Const(velocity.air.gethit.groundrecover.y)

[State 5201, 2]
type = VelSet
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = Time = 0
x = 0
y = Const(velocity.air.gethit.groundrecover.y)

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 5
add = 128,128,128 ;256,256,256

[State 5201, 6]
type = Explod
trigger1 = Time = 0
anim = F60
postype = p1
pos = 0, (pos y) - floor(vel y)
facing = facing
sprpriority = -10

;---------------------------------------------------------------------------
; Air get-hit (fall recovery in air)
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 5
add = 128,128,128

[State 5210, 1]
type = PosFreeze
trigger1 = Time < 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < Const720p(-80)

[State 5210, 1.0 behavior 1]
type = VelMul
trigger1 = Time = 4
x = Const(velocity.air.gethit.airrecover.mul.x)
y = Const(velocity.air.gethit.airrecover.mul.y)

[State 5210, 1.0 behavior 2]
type = VelAdd
trigger1 = Time = 4
x = Const(velocity.air.gethit.airrecover.add.x)
y = Const(velocity.air.gethit.airrecover.add.y)

[State 5210, 2002.04.14 behavior 1]
type = null;VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 2002.04.14 behavior 2]
type = null;VelAdd
trigger1 = Time = 4
x = 0 
y = -4.5

[State 5210, 2002.04.14 behavior 3]
type = null;VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 2002.04.14 behavior 4]
type = null;VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 2002.04.14 behavior 5]
type = null;VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = Const(velocity.air.gethit.airrecover.up)

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = Const(velocity.air.gethit.airrecover.down)

[State 5210, 2] ;Go fwd
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = Const(velocity.air.gethit.airrecover.fwd)

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = Const(velocity.air.gethit.airrecover.back)

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 20

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd
trigger1 = Time >= 4
y = Const(movement.air.gethit.airrecover.yaccel)

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;Jump land
ctrl = 1

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Change palette
type = RemapPal
trigger1 = 1
source = 1,1
dest = 1,palno

[State 0, VarSet]
type = VarSet
trigger1 = 1
fv = 20
value = gamewidth

[State 0, VarSet]
type = VarSet
trigger1 = 1
fv = 21
value = gameheight

[State 0, VarSet]
type = VarSet
trigger1 = 1
fv = 22
value = 1

[State 5900, 4] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
trigger2 = teammode = turns
value = 190

[State 5900, 5] ;All other rounds
type = ChangeState
trigger1 = 1
value = 0

;---------------------------------------------------------------------------
;  Training Mode
[Statedef 50783]
type    = S
movetype= I
physics = N
velset = 0,0
anim = 9999
sprpriority = 4

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0, DestroySelf]
type = DestroySelf
trigger1 = roundsexisted > 0
trigger2 = roundstate != 2
trigger3 = root, prevstateno != 1911
trigger3 = root, prevstateno != 1912
trigger3 = root, prevstateno != 1913
trigger3 = root, prevstateno != 1914
trigger3 = root, prevstateno != 1915


;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------

[Statedef -2]

;---------------------------------------------------------------------------
;Detect Training Mode for V-Trigger Meter
; This rather simple method of detecting training mode relies on looking at the meter after intros.
; Training mode tends to give characters max meter right at the beginning of intros (roundstate 1), but if players choose to skip intros, it will do so as soon as it can in roundstate 2. This method hopes to account for that.
; This method also doesn't account for if a player presses the space bar or F3 at the beggining of the round, because if people are going to cheat with non-training mode fights, I might as well give them infinite V-Trigger for the first round too.
; There is a helper in State 0 that checks for training mode when the intro is skipped.

[State 0, Explod]
type = Explod
triggerall = numenemy < 2 && !numpartner && power = const(data.power)
triggerall = roundno = 1 && matchno = 1
triggerall = life = lifemax
triggerall = !numexplod(50783)
trigger1 = roundstate <= 1
trigger2 = numhelper(50783)
trigger2 = helper(50783), time >= 16
anim = 9999
ID = 50783
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(31) = 0
trigger1 = power = const(data.power)
trigger1 = numexplod(50783)
trigger1 = AILevel = 0 ;This turns off the infinite V-Trigger if the AI gains control, but when players take control again, the infinite V-Trigger will return.
fv = 3
value = 1

;---------------------------------------------------------------------------
;V-Trigger

[State 0, VarAdd]
type = VarSet
trigger1 = var(31) != 0
trigger1 = fvar(3) <= 0
v = 31
value = 0
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = roundstate = 2
trigger1 = var(31) > 0
trigger1 = fvar(3) > 0
fv = 3
value = -0.00125
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = numexplod(6000) = 0
trigger1 = teammode = simul
trigger1 = NumPartner = 1
trigger1 = partner,ID < ID
anim = 6000
ID = 6000
pos = 95,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = numexplod(6000) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 6000
ID = 6000
pos = 30,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = numexplod(6000) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 60000
ID = 6000
pos = -30,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0


[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = numexplod(6000) = 0
trigger1 = teammode = simul
trigger1 = NumPartner = 1
trigger1 = partner,ID < ID
anim = 60000
ID = 6000
pos = -95,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = numexplod(60033) = 0
triggerall = !var(31)
triggerall = fvar(3) < 1
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 60033
ID = 60033
pos = 30,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.3,0.3
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = numexplod(6003) = 0
triggerall = !var(31)
triggerall = fvar(3) >= 1
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 6003
ID = 6003
pos = 30,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.3,0.3
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = numexplod(60033)
trigger1 = var(31)
trigger2 = fvar(3) >= 1
id = 60033

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = numexplod(6003)
trigger1 = var(31)
trigger2 = fvar(3) < 1
id = 6003

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = numexplod(60031)
trigger1 = var(31) = 0
id = 60031

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = numexplod(60031) = 0
triggerall = var(31)
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 60031
ID = 60031
pos = 30,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.3,0.3
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0


[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = numexplod(60033) = 0
triggerall = !var(31)
triggerall = fvar(3) < 1
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 60034
ID = 60033
pos = -30,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.3,0.3
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = numexplod(6003) = 0
triggerall = !var(31)
triggerall = fvar(3) >= 1
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 60030
ID = 6003
pos = -30,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.3,0.3
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = numexplod(60031) = 0
triggerall = var(31)
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 60032
ID = 60031
pos = -30,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.3,0.3
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = fvar(3) >= 1
triggerall = numexplod(6004) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 6004
ID = 6004
pos = 30,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.3,0.3
sprpriority = 9999999
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = fvar(3) >= 1
triggerall = numexplod(6004) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 60040
ID = 6004
pos = -30,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.3,0.3
sprpriority = 9999999
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = numexplod(6004)
trigger1 = fvar(3) < 1
trigger1 = var(31) = 0
id = 6004

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = numexplod(6001) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 6001
ID = 6001
pos = 30,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = fvar(3)/2,0.5
sprpriority = 9999999
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = numexplod(6001) = 0
trigger1 = teammode = simul
trigger1 = NumPartner = 1
trigger1 = partner,ID < ID
anim = 6001
ID = 6001
pos = 95,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = fvar(3)/2,0.5
sprpriority = 9999999
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = numexplod(6001) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 60010
ID = 6001
pos = -30,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = fvar(3)/2,0.5
sprpriority = 9999999
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = numexplod(6001) = 0
trigger1 = teammode = simul
trigger1 = NumPartner = 1
trigger1 = partner,ID < ID
anim = 60010
ID = 6001
pos = -95,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = fvar(3)/2,0.5
sprpriority = 9999999
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0


[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = numexplod(6002) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 6002
ID = 6002
pos = 30,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 500
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = numexplod(6002) = 0
trigger1 = teammode = simul
trigger1 = NumPartner = 1
trigger1 = partner,ID < ID
anim = 6002
ID = 6002
pos = 95,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 500
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = numexplod(6002) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 60020
ID = 6002
pos = -30,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 500
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = numexplod(6002) = 0
trigger1 = teammode = simul
trigger1 = NumPartner = 1
trigger1 = partner,ID < ID
anim = 60020
ID = 6002
pos = -95,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 500
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(6001)
ID = 6001
scale = fvar(3)/2,0.5

[State 0, VarAdd]
type = VarAdd
trigger1 = alive
trigger1 = fvar(3) < 1
trigger1 = var(31) = 0
trigger1 = movetype = H
trigger1 = time = 0
trigger1 = gethitvar(damage) >= 195
fv = 3
value = 0.038420

[State 0, VarAdd]
type = VarAdd
trigger1 = alive
trigger1 = fvar(3) < 1
trigger1 = var(31) = 0
trigger1 = movetype = H
trigger1 = time = 0
trigger1 = gethitvar(damage) >= 95
fv = 3
value = 0.038420

[State 0, VarAdd]
type = VarAdd
trigger1 = alive
trigger1 = fvar(3) < 1
trigger1 = var(31) = 0
trigger1 = movetype = H
trigger1 = time = 0
trigger1 = gethitvar(damage) >= 15
fv = 3
value = 0.021839

[State 0, VarAdd]
type = VarAdd
trigger1 = alive
trigger1 = fvar(3) < 1
trigger1 = var(31) = 0
trigger1 = movetype = H
trigger1 = time = 0
trigger1 = gethitvar(damage) < 15
fv = 3
value = 0.000867

[State 0, VarSet]
type = VarSet
trigger1 = fvar(3) < 0
fv = 3
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = fvar(3) > 1
fv = 3
value = 1

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = fvar(3) >= 1
triggerall = numexplod(6005) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 6005
ID = 6005
pos = 30,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = fvar(3) >= 1
triggerall = numexplod(6005) = 0
trigger1 = teammode = simul
trigger1 = NumPartner = 1
trigger1 = partner,ID < ID
anim = 6005
ID = 6005
pos = 95,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = fvar(3) >= 1
triggerall = numexplod(6005) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 60050
ID = 6005
pos = -30,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = fvar(3) >= 1
triggerall = numexplod(6005) = 0
trigger1 = teammode = simul
trigger1 = NumPartner = 1
trigger1 = partner,ID < ID
anim = 60050
ID = 6005
pos = -95,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999998
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = var(31) != 0
triggerall = numexplod(6006) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 6006
ID = 6006
pos = 30,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999997
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = var(31) != 0
triggerall = numexplod(6006) = 0
trigger1 = teammode = simul
trigger1 = NumPartner = 1
trigger1 = partner,ID < ID
anim = 6006
ID = 6006
pos = 95,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999997
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = var(31) != 0
triggerall = numexplod(6006) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 60060
ID = 6006
pos = -30,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999997
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = var(31) != 0
triggerall = numexplod(6006) = 0
trigger1 = teammode = simul
trigger1 = NumPartner = 1
trigger1 = partner,ID < ID
anim = 60060
ID = 6006
pos = -95,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999997
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = var(31) != 0
triggerall = numexplod(6007) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 6007
ID = 6007
pos = 30,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999999
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 1
triggerall = var(31) != 0
triggerall = numexplod(6007) = 0
trigger1 = teammode = simul
trigger1 = NumPartner = 1
trigger1 = partner,ID < ID
anim = 6007
ID = 6007
pos = 95,fvar(21) - 10
postype = left
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999999
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = var(31) != 0
triggerall = numexplod(6007) = 0
trigger1 = teammode != simul
trigger2 = teammode = simul
trigger2 = NumPartner = 1
trigger2 = partner,ID > ID
anim = 60070
ID = 6007
pos = -30,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999999
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
triggerall = teamside = 2
triggerall = var(31) != 0
triggerall = numexplod(6007) = 0
trigger1 = teammode = simul
trigger1 = NumPartner = 1
trigger1 = partner,ID < ID
anim = 60070
ID = 6007
pos = -95,fvar(21) - 10
postype = right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 99999999999
supermovetime = 99999999999
scale = 0.5,0.5
sprpriority = 9999999
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = numexplod(6005)
trigger1 = fvar(3) <= 0
trigger1 = var(31) = 0
trigger2 = win
id = 6005

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = numexplod(6006)
trigger1 = fvar(3) <= 0
trigger1 = var(31) = 0
trigger2 = var(31) = 0
trigger3 = win
id = 6006

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = numexplod(6007)
trigger1 = fvar(3) <= 0
trigger1 = var(31) = 0
trigger2 = var(31) = 0
trigger3 = win
id = 6007


;---------------------------------------------------------------------------

[State -2, KOExplode]
type = Explod
triggerall = MoveHit
triggerall = WinKO = 1
triggerall = NumExplod(8600) = 0
trigger1 = HitDefAttr = SA, HA
trigger2 = StateNo = 3050
trigger3 = StateNo = 3100
trigger4 = StateNo = 3101
trigger5 = StateNo = 3102
pos = 0,0
postype = left
bindtime = -1
anim = 8600
id = 8600
sprpriority = -5
removetime = -1
ignorehitpause = 1
scale = 0.5,0.5
ownpal = 1

[State -2, KOExplode]
type = Explod
triggerall = MoveContact = [1,2] 
triggerall = WinKO = 1
triggerall = NumExplod(8600) = 0
trigger1 = HitDefAttr = SA, HA
pos = 0,0
postype = left
bindtime = -1
anim = 8000
id = 8000
sprpriority = -5
removetime = -1
ignorehitpause = 1
scale = 1,2
ownpal = 1

[State -2, KOSound]
type = PlaySnd
triggerall = WinKO = 1
triggerall = NumExplod(8600) = 1
trigger1 = Var(20) = 0
value = s800,0
ignorehitpause = 1

[State -2, KOSound]
type = PlaySnd
triggerall = WinKO = 1
triggerall = NumExplod(8600) = 1
trigger1 = Var(20) = 0
value = s800,1
ignorehitpause = 1

[State -2, KOSound]
type = PlaySnd
triggerall = WinKO = 1
triggerall = NumExplod(8600) = 1
trigger1 = Var(20) = 0
value = s800,2
ignorehitpause = 1

[State -2, KOSound]
type = PlaySnd
triggerall = WinKO = 1
triggerall = NumExplod(8600) = 1
trigger1 = Var(20) = 0
value = s800,3
ignorehitpause = 1


[State -2, KOSound]
type = PlaySnd
triggerall = WinKO = 1
triggerall = NumExplod(8600) = 1
trigger1 = Var(20) = 0
value = s800,4
ignorehitpause = 1


[State -2, 1]
type = VarAdd
triggerall = WinKO = 1
triggerall = NumExplod(8600) = 1
trigger1 = TimeMod = 1,0
ignorehitpause = 1
v = 20
value = 10

[State -2, 2]
type = VarSet
triggerall = WinKO = 1
triggerall = NumExplod(8600) = 1
trigger1 = Var(20) >= 200
ignorehitpause = 1
v = 20
value = -1

[State -2,4]
type = AssertSpecial
triggerall = WinKO = 1
trigger1 = NumExplod(86000) = 1
ignorehitpause = 1
flag = nokoslow
flag = NoMusic

[State 11000, StopSnd]
type = StopSnd
trigger1 = movetype = H
trigger2 = (stateno = 5000) || (stateno = 5010) || (stateno = 5020) || (stateno = 5070)
trigger2 = time = 0
trigger3 = (stateno != 5000) && (stateno != 5010) && (stateno != 5020) && (stateno != 5070)
trigger3 = stateno != [120,160]
trigger3 = gethitvar(damage)
channel = 2

;---------------------------------------------------------------------------
[State 0, VarSet]
type = VarSet
triggerall = var(4) != 0
trigger1 = enemynear, movetype != H
trigger2 = enemynear, pos y <= -150
v = 4
value = 0

;---------------------------------------------------------------------------

[State 0, VarSet]
type = VarSet
trigger1 = movetype = A
trigger1 = time = 1
v = 5
value = 64 - (AILevel * 8)

[State 0, VarSet]
type = VarSet
trigger1 = var(3) < 0 
v = 5
value = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = movetype != A
trigger1 = var(5) > 0
trigger1 = roundstate = 2
v = 5
value = -1

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

[State 0, Explod]
type = Explod
triggerall = fvar(22)
triggerall = stateno != 5500
trigger1 = var(31) != 0
trigger1 = !numexplod(80422)
trigger1 = roundstate = 2
trigger1 = alive
anim = 80422
ID = 80422
pos = 0,0
postype = p1
facing = -1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 99999
supermovetime = 99999
scale = 1,0.6
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0


[State 11000]
type = PlaySnd
triggerall = numhelper(11000) < 1
trigger1 = stateno = 1100
trigger2 = stateno = 1110
trigger3 = stateno = 1120
trigger4 = stateno = 3050
trigger5 = stateno = 3100
trigger6 = stateno = 620
trigger7 = stateno = 901
trigger8 = stateno = 950
value = 100, 0
channel = 2
volumescale = 95
loop = 1
abspan = 0


[State -3, Helper]
type = Helper
triggerall = numhelper(11000) < 1
trigger1 = stateno = 1100
trigger2 = stateno = 1110
trigger3 = stateno = 1120
trigger4 = stateno = 3050
trigger5 = stateno = 3100
trigger6 = stateno = 620
trigger7 = stateno = 901
trigger8 = stateno = 950
helpertype = normal ;player
name = "MUSIC"
ID = 11000
stateno = 11000
pos = 120,0
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 99999999999
pausemovetime = 99999999999

;This controller plays a sound everytime KFM lands from a jump, or
;from his back-dash.
[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
value = 40, 0

[State -3, Explod]
type = Explod
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
anim = 8102
ID = 8102
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = -4
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State -3, Explod]
type = Explod
triggerall = Time = 1
trigger1 = stateno = 52 ;Jump land
trigger2 = stateno = 106 ;Run-back land
trigger3 = stateno = 1101 ;land from Shoryu
trigger4 = stateno = 3102
anim = 8104
ID = 8104
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0