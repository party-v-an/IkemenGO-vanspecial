; Ryu-X's constants and state file.
;
;Variables:
; Var(1) = The win pose decider variable
; Var(2) = Recovery Roll Variable
; Var(3) = Guard Push Var
; Var(4) = Hyper Combo Finish Variable
; Var(5) = Fix for State 5080 >_<
; Var(6) = Danger Sound Variable
; Var(7) = Taunt Variable
; Var(8) = Hyper Combo Finish Variable
; Var(9) = 0 - Normal Ryu | 1 - You are now in Burst Mode
; Var(10) = Pos During Turns Mode Intro
; Var(11) = A Shinkuu Hadoken Vel X Tracker
; Var(12) = Aerial Rave Bound Screen Effect Variable
; Var(13) = Dust Trail Variable
; Var(14) = Denjin Hadoken Variable
; Var(15) = Intro Variable
; Var(16) = Time During Ryu's Rave
; Var(17) = Combo Counter for Ryu's Rave
; Var(18) = EnvColor During El Raging Demon
; Var(19) = Randomized Posing for the Raging Demon
; Var(20) = Aerial Rave Mode
; Var(21) = Super Jump Mode

[Data]
life = 1000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 30
airjuggle = 20
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 100
IntPersistIndex = 9
FloatPersistIndex = 40

[Size]
xscale = 0.27          ;Horizontal scaling factor.
yscale = 0.27           ;Vertical scaling factor.
ground.back = 20     ;Player width (back, ground)
ground.front = 17    ;Player width (front, ground)
air.back = 20        ;Player width (back, air)
air.front = 17       ;Player width (front, air)
height = 60	     ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too   
head.pos = -5, -90   ;Approximate position of head
mid.pos = -5, -60    ;Approximate position of midsection
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y)

[Velocity]
walk.fwd  = 3.3      ;Walk forward
walk.back = -2.6     ;Walk backward
run.fwd  = 4.8, 0    ;Run forward (x, y)
run.back = -6.5,-3.8    ;Hop backward (x, y)
jump.neu = 0,-9.5      ;Neutral jumping velocity (x, y)
jump.back = -3    ;Jump back Speed (x, y)
jump.fwd = 2.7       ;Jump forward Speed (x, y)
runjump.back = -2.55,-9   ;Running jump speeds (opt)
runjump.fwd = 4,-9        ;.
airjump.neu = 0,-9        ;.
airjump.back = -2.55,-9   ;Air jump speeds (opt)
airjump.fwd = 2.5,-9      ;.

[Movement]
airjump.num = 1
yaccel = .5
stand.friction = .8
crouch.friction = .8

;---------------------------------------------------------------------------
; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180, Random Win pose]
type = VarRandom
trigger1 = Time = 0
v = 1
range = 1,3

[State 180, Ore no...Gatsu da!/Zois!]
type = ChangeState
trigger1 = Var(1) = 1
value = 181

[State 180, No leaves!]
type = ChangeState
trigger1 = Var(1) = 2 
value = 183

[State 180, Leaves!/No leaves part 2 for Evil Ryu]
type = ChangeState
trigger1 = Var(1) = 3
value = 182

---------------------------------------------------------------------------
; Win pose 1 - This is MY Victory (Evil Ryu cares not for such things!)
[Statedef 181]
type = S
ctrl = 0
anim = ifelse(Palno > 6, 186, 181)
velset = 0,0

[State 195, Ore no gatsu da!]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = Time = 0
value = S8,8

[State 195, Zois!]
type = PlaySnd
triggerall = Palno > 6
trigger1 = Time = 0
value = S16,11

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 2 - Leaves! (But Evil Ryu's too EVIL for Leaves!)
[Statedef 182]
type = S
ctrl = 0
anim = ifelse(Palno > 6, 185, 182)
velset = 0,0

[State 195, Mata..]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = Time = 20
value = S12,11

[State 195, Leaf!]
type = Explod
triggerall = Palno <= 6
triggerall = NumExplod(184) = 0
trigger1 = AnimElem = 12
persistent = 0
anim = 184
ID = 184
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 3 - Aw, no leaves?! (Evil Ryu only wishes to Stomp, so let him stomping!)
[Statedef 183]
type = S
ctrl = 0
anim = ifelse(Palno > 6, 1020, 183)
velset = 0,0

[State 990, Hm!]
type = Playsnd
triggerall = Palno > 6
trigger1 = AnimElem = 4
persistent = 0
value = 16,9

[State 990, Smash!]
type = Playsnd
triggerall = Palno > 6
trigger1 = AnimElem = 5
persistent = 0
value = 16,2

[State 990, Shake!]
type = EnvShake
triggerall = Palno > 6
Trigger1 = AnimElem = 5,-1
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 10

[State 790, Evil Red Stuff]
type = Explod
triggerall = Palno > 6
trigger1 = AnimElem = 5
anim = 951
postype = P1
ID = 952
pos = 0,0
removetime = -1
bindtime = 999
removeongethit = 1
sprpriority = 5
ownpal = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Intro vs. Ken-X
[Statedef 184]
type = S
ctrl = 0
anim = 188
velset = 0,0

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, Whoosh!]
type = PlaySnd
trigger1 = AnimElem =  8
value = S6,1

[State 191, Ikuzo!]
type = PlaySnd
trigger1 = Animtime = 0
value = S8,4

[State 191, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, Intro Randomizer]
type = VarRandom
triggerall = palno <= 6
trigger1 = Time = 0
v = 15
range = 1,2

[State 190, Intro Randomizer]
type = VarRandom
triggerall = palno > 6
trigger1 = Time = 0
v = 15
range = 1,3

[State 190, Intro vs. Ken-X] 
type = ChangeState
triggerall = palno <= 6
trigger1 = P2Name = "Ken-X" 
value = 184

[State 190, Intro vs. Evil Ryu] 
type = ChangeState
triggerall = palno <= 6
trigger1 = P2Name = "Ryu-X" && enemy, palno > 6
value = 197

[State 190, Intro 1] 
type = ChangeState
triggerall = palno <= 6
trigger1 = Var(15) = 1
value = 191

[State 190, Intro 2] 
type = ChangeState
triggerall = palno <= 6
trigger1 = Var(15) = 2
value = 193

[State 190, Evil Intro 1] 
type = ChangeState
triggerall = palno > 6
trigger1 = Var(15) = 1
value = 990

[State 190, Evil Intro 2] 
type = ChangeState
triggerall = palno > 6
trigger1 = Var(15) = 2
value = 1090

[State 190, Evil Intro 3] 
type = ChangeState
triggerall = palno > 6
trigger1 = Var(15) = 3
value = 1110

;---------------------------------------------------------------------------
; Introduction
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, Yoshu Haji Meo!]
type = PlaySnd
trigger1 = AnimElem =  8
value = S12,9

[State 191, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Turns Mode Introduction
[Statedef 192]
type = S
physics = N
ctrl = 0
anim = 160
velset = 0,0

[State 192, Remember Pos X]
type = VarSet
trigger1 = Time = 0
var(10) = Floor(Pos X)

[State 192, 1]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 196, 3]
type = PosAdd
trigger1 = Time = 0
persistent = 0
x = -160
y = -40

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 5
value = 43

[State 192, VelSet]
type = VelSet
trigger1 = Time = 5
x = 4.5
y = -6

[State 192, VelAdd]
type = VelAdd
trigger1 = Time >= 5
y = .39

[State 191, Intro] 
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, Landing]
type = PosSet
triggerall = Time >= 15
trigger1 = Pos Y >= 0
x = Var(10)
y = 0

[State 191, Landing 2]
type = VelSet
triggerall = Time >= 15
trigger1 = Pos Y >= 0
x = 0
y = 0

[State 191, Landing and Taunt Animation]
type = ChangeAnim
triggerall = Time >= 15
trigger1 = Pos Y >= 0
value = 195
persistent = 0

[State 723, Landing Dust]
type = Explod
triggerall = Time >= 15
trigger1 = Pos Y >= 0
persistent = 0
anim = 733
ID = 733
pos = -65,-3
postype = p1
sprpriority = -1
bindtime = 1

[State 191, Landing Sound]
type = PlaySnd
triggerall = Time >= 15
trigger1 = Pos Y >= 0
value = 12,0
persistent = 0

[State 191, Ikuzu!]
type = PlaySnd
trigger1 = Anim = 195 && AnimElem = 14
value = S12,18

[State 191, To Standing]
type = ChangeState
trigger1 = (Anim = 195) && (AnimTime = 0)
value = 0

;---------------------------------------------------------------------------
; Introduction 2 (Ken and Sean + Ryu)
[Statedef 193]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 193, Ken]
type = Helper
trigger1 = Time = 0
ID = 194
name = "Ken"
pos = -30, 0
postype = p1
stateno = 194
helpertype = normal
keyctrl = 0
ownpal = 0
ignorehitpause = 1

[State 193, Sean]
type = Helper
trigger1 = Time = 0
ID = 195
name = "Sean"
pos = -60, 0
postype = p1
stateno = 194
helpertype = normal
keyctrl = 0
ownpal = 0
ignorehitpause = 1

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 193, Ikuzu!]
type = PlaySnd
trigger1 = AnimElem = 7
value = S12,18

[State 191, To Standing]
type = ChangeState
trigger1 = (AnimTime = 0)
value = 0

;---------------------------------------------------------------------------
; Introduction 2 (Ken and Sean's States)
[Statedef 194]
type = S
ctrl = 0
anim = IfElse(IsHelper(194), 193, 192)
velset = 0,0

[State 194, Hamode!]
type = PlaySnd
trigger1 = (Anim = 193) && (AnimElem = 2)
value = S12,15

[State 194, Ken Away!]
type = VelSet
trigger1 = (Anim = 193) && (AnimElem = 5)
x = -8
y = -8

[State 194, Sean Away!]
type = VelSet
trigger1 = (Anim = 192) && (AnimElem = 7)
x = -8
y = -6

[State 191, Bye!]
type = DestroySelf
trigger1 = BackEdgeBodyDist < -30
value = 0

;---------------------------------------------------------------------------
; Intro vs. Evil Ryu!
[Statedef 197]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 191

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 2075, Intro Text FWD]
type = Helper
trigger1 = (Time = 100) && (facing = 1)
facing = 1
stateno = 198
helpertype = normal
Name = "Evil Ryu Intro"
shadow = -1,0,0
keyctrl = 0
ownpal = 1
sprpriority = 1

[State 194, Begin!]
type = ChangeAnim
trigger1 = Anim = 191 && Animtime = 0
value = 0

[State 191, Music]
type = PlaySnd
trigger1 = TimeMod = 430,0
value = S1,11
channel = 1
abspan = 0

[State 191, No Stage Music]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 2075, Intro Text Back]
type = Helper
trigger1 = (Time = 100) && (facing = -1)
facing = -1
stateno = 198
helpertype = normal
Name = "Evil Ryu Intro"
shadow = -1,0,0
keyctrl = 0
ownpal = 1
sprpriority = 1

[State 194, Intro Over!]
type = ChangeState
trigger1 = Time = 1300
value = 0

;---------------------------------------------------------------------------
;Text for the Evil Ryu Intro
[Statedef 198]
type = S
movetype = I
physics = S
anim = 160
velset = 0,0

[State -2, Intro text]
type = Explod
trigger1 = (Time = 0) && (NumExplod(194) = 0) 
postype = Back
ID = 194
anim = 194
pos = 155,0
bindtime = 1
removetime = -2
sprpriority = 5
ontop = 1

[State 194, 1]
type = DestroySelf
trigger1 = (Time >= 1) && (NumExplod(194) = 0)

;---------------------------------------------------------------------------
;Taunt Chooser
[Statedef 195]
type = S
ctrl = 1

[State 195, 1]
type = VarRandom
trigger1 = Time = 0
v = 7
range = 1,2

[State 195, Normal]
type = Changestate
triggerall = palno <= 6
trigger1 = Var(7) = [1,2]
value = 196

[State 195, Evil]
type = Changestate
triggerall = palno > 6
trigger1 = Var(7) = [1,2]
value = 199

;---------------------------------------------------------------------------
;Taunt (Both, now in one state!)
[Statedef 196]
type = S
ctrl = IfElse(Var(7) = 1, 0, 1)
anim = IfElse(Var(7) = 1, 195, 196)
velset = 0,0,0

[State 195, Kagate-Koy!]
type = PlaySnd
trigger1 = (Anim = 196) && (AnimElem = 2)
value = S4,1
channel = 3

[State 195, The End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Evil Taunt (Both, now in one state!)
[Statedef 199]
type = S
movetype = I
ctrl = 0
anim = IfElse(Var(7) = 1, 970, 971)
velset = 0,0,0

[State 990, Hm!]
type = Playsnd
triggerall = Anim = 970
trigger1 = AnimElem = 4
persistent = 0
value = 16,9

[State 990, HOO!]
type = Playsnd
triggerall = Anim = 971
trigger1 = AnimElem = 4
persistent = 0
value = 16,5

[State 990, Smash!]
type = Playsnd
trigger1 = AnimElem = 5
persistent = 0
value = 16,2

[State 990, Shake!]
type = EnvShake
Trigger1 = AnimElem = 5,-1
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 10

[State 199, No blocking for you!]
type = Assertspecial
trigger1 = 1
flag = unguardable

[State 195, 2]
type = StatetypeSet
trigger1 = (Anim = 971) && AnimElem = 5
movetype = A

[State 199, Grand Hitting Action]
type = HitDef
triggerall = Anim = 971
trigger1 = AnimElem = 5
attr = S, SA
animtype  = Heavy
damage    = 5
hitflag = MAFDP
pausetime = 5,5
sparkxy = -25,-50
hitsound = S1,3
guardsound = S1,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5,-3
air.velocity = -5,-3
down.velocity = 0,0
fall = 1
air.fall = 1
fall.recover = 0
palfx.time = 35
palfx.add = 40,10,0
palfx.mul = 300,192,192

[State 790, Evil Red Stuff]
type = Explod
triggerall = Anim = 971
trigger1 = AnimElem = 5
anim = 951
postype = P1
ID = 952
pos = 0,0
removetime = 44
bindtime = 999
removeongethit = 1
sprpriority = 5
ownpal = 1

[State 195, The End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Dash Forwards
[Statedef 100]
type    = S   ;Running is on the ground
physics = N   ;We'll define our own physics
anim = ifelse(palno > 6, 101, 100)  ;Evil or Good?!
ctrl = 0      ;No control for duration of dash

[State 100, A must for dashes everywhere]
type = Assertspecial
trigger1 = 1
flag = nowalk

[State 100, Dash Forward!]
type = VelSet
triggerall = palno <= 6
trigger1 = Time = [8,27]
x = 7

[State 100, Friction]
type = VelMul
triggerall = palno <= 6
trigger1 = Time > 20
x = .80

[State 100, Ending Friction]
type = VelSet
triggerall = palno <= 6
trigger1 = Time = 24
x = 2

[State 100, To Standing?!]
type = ChangeState
triggerall = palno <= 6
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 100, Dust!]
type = MakeDust
triggerall = palno <= 6
trigger1 = Time = [0,1]
pos = 0,0
pos2 = 0,0

[State 100, Dust! 2]
type = MakeDust
triggerall = palno <= 6
trigger1 = Time = [22,25]
pos = 0,0
pos2 = 0,0

[State 100, Dashy Lines!]
type = explod
trigger1 = palno <= 6 && time = 8
trigger2 = palno > 6 && time = 0
anim = 734
postype = p1
pos = 0,0
bindtime = 1
sprpriority = 2
ownpal = 1

[State 100, Heh!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 0
value = S12,6

[State 100, Skirting Across the Ground]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 22
value = S12,3

[State 100, (Evil) Dust Dust]
type = MakeDust
triggerall = palno > 6
trigger1 = 1
pos = -25,-2
spacing = 2

[State 100, (Evil) Go!]
type = VelSet
triggerall = palno > 6
trigger1 = Time = 0
x = 6

[State 100, (Evil) Friction]
type = VelAdd
triggerall = palno > 6
trigger1 = Time >= 8 && Vel X >= 1
x = -.15

[State 100, (Evil) To Standing with you!]
type = ChangeState
triggerall = palno > 6
trigger1 = time = 35
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Dash Backwards
[Statedef 105]
type    = S   ;Running is on the ground
physics = N   ;We'll define our own physics
anim = 105    ;Anim action 105
ctrl = 1      

[State 100, A must for dashes everywhere]
type = Assertspecial
trigger1 = 1
flag = nowalk

[State 100, Begin Dashing]
type = VelSet
trigger1 = Time = [8,25]
x = -10

[State 100, Friction]
type = VelMul
trigger1 = Time > 13
x = .80;93

[State 100, End Friction]
type = VelSet
trigger1 = Time = 26
x = -1

[State 100, Huh!]
type = PlaySnd
trigger1 = Time = 8
value = S12,5

[State 100, Dust!]
type = MakeDust
trigger1 = Time = [0,1]
pos = 0,0
pos2 = 0,0

[State 100, Dust! 2]
type = MakeDust
trigger1 = Time = [23,24]
pos = 0,0
pos2 = 0,0

[State 100, Skirting Across the Ground]
type = PlaySnd
trigger1 = Time = 22
value = S12,3

[State 100, No, you are actually not airborne :P]
type = Posset
trigger1 = Pos Y >=0
y = 0

[State 100, To Standing!]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Evil Backwards Dash!
[Statedef 106]
type    = S
physics = N
anim = 101
ctrl = 1

[State 100, Dust Dust]
type = MakeDust
trigger1 = 1
pos = -25,-2
spacing = 2

[State 100, A must for dashes everywhere]
type = Assertspecial
trigger1 = 1
flag = nowalk

[State 100, Go!]
type = VelSet
trigger1 = Time = 0
x = -6

[State 100, Friction]
type = VelAdd
trigger1 = Time >= 8 && Vel X <= -1
x = .15

[State 100, To Standing with you!]
type = ChangeState
trigger1 = time = 35
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; STAND_X
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = ifelse(Palno > 6 && P2Dist X < 40, 901, 200)
poweradd = 15     

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]
trigger1 = Time = 0
x = 0
y = 0

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
damage    = 15
animtype = Light
getpower = 10,5
givepower = 11,8
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 8,8
numhits = 1
sparkno = 0
sparkxy = 0,-80
hitsound = S1,1
guardsound = S1,0
ground.type = High
ground.slidetime = 13
ground.hittime  = 13
ground.velocity = -6
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -6
air.velocity = -3
ground.cornerpush.veloff = -7
air.fall = 1
fall.recovertime = 16

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 200, Whoosh!]
type = PlaySnd
trigger1 = time = 1
value = S6,1

;---------------------------------------------------------------------------
; STAND_Y
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd = 25
ctrl = 0
anim = 210

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]
trigger1 = Time = 0
x = 0
y = 0

[State 210, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 32
getpower = 20,10
givepower = 15,8
priority = 3, Hit
guardflag = MA
pausetime = 8,8
sparkxy = 0,-80
hitsound = S1,2
sparkno = 1
guardsound = S1,0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -6
guard.velocity = -8
air.velocity = -5
ground.cornerpush.veloff = -9.5
air.fall = 1
fall.recovertime = 26

[State 210, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 210, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
; Collarbone Breaker/Zugai Hassatsu
[Statedef 211]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd = 25
ctrl = 0
anim = ifelse(Palno > 6, 242, 241)

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]
trigger1 = Time = 0
x = 0
y = 0

[State 260, 6]
type = VelSet
trigger1 = AnimElem = 4
x = 6

[State 260, 10]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 210, 1]
type = HitDef
trigger1 = AnimElem = 5 && Palno <= 6
trigger2 = Animelem = 6 && Palno > 6
attr = S, NA    
animtype  = Medium
damage    = 30
getpower = 20,10
givepower = 15,8
guardflag = HA
pausetime = 9,9
sparkxy = 0,-80
hitsound   = S1,2
sparkno = 1
guardsound = S1,0
ground.type = Low
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -8
air.velocity = -2.2,-2
ground.cornerpush.veloff = -10

[State 210, 1]
type = HitDef
trigger1 = AnimElem = 6 && Palno <= 6
trigger2 = AnimElem = 7 && Palno > 6
attr = S, NA    
animtype  = Medium
damage    = 41
getpower = 20,10
givepower = 15,8
guardflag = HA
pausetime = 9,9
sparkxy = 0,-80
hitsound   = S1,2
sparkno = 1
guardsound = S1,0
ground.type = Low
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -12
air.velocity = -2.2,-2
ground.cornerpush.veloff = -12

[State 210, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 210, 3]
type = PlaySnd
trigger1 = AnimElem = 4
value = S6,2

[State 210, 3]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = AnimElem = 4
value = S0,5

[State 241, Ho!]
type = PlaySnd
triggerall = Palno > 6
trigger1 = AnimElem = 1
value = S16,9

[State 241, Ho!]
type = PlaySnd
triggerall = Palno > 6
trigger1 = AnimElem = 4
value = S16,5

;---------------------------------------------------------------------------
; STAND_Z
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 40
ctrl = 0
anim = ifelse(palno > 6, 905, 220)

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]               
trigger1 = Time = 0
x = 0
y = 0

[State 220, 1]
type = HitDef
trigger1 = Palno <= 6 && AnimElem = 2
trigger2 = Palno > 6 && AnimElem = 4
attr = S, NA
animtype  = Hard
damage    = 53
getpower = 30,15
givepower = 15,8
guardflag = MA
pausetime = 9,9
sparkno = 2
sparkxy = 0,-80
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -12
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -10
guard.velocity = -10
air.velocity = -4,-5
air.fall = 1
fall.recovertime = 28

[State 220, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 220, Whoosh!]
type = PlaySnd
trigger1 = Palno <= 6 && AnimElem = 1
trigger2 = Palno > 6 && AnimElem = 3
value = S6,3

[State 661, Hoo!]
type = Playsnd
triggerall = Palno > 6
trigger1 = AnimElem = 3
value = S16,4

;---------------------------------------------------------------------------
; FWD_Z (Right Hook)
[Statedef 221]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= ifelse(prevstateno = 222, 0, 40)
ctrl = 0
anim = 903

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]               
trigger1 = Time = 0
x = 0
y = 0

[State 220, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
damage    = ifelse(prevstateno = 222,70,53)
getpower = ifElse(prevstateno = 222,0,30)
givepower = 15,8
guardflag = MA
pausetime = 9,9
sparkno = 2
sparkxy = 0,-80
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -8
air.velocity = -2.2,-2
ground.cornerpush.veloff = -10

[State 220, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 220, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

[State 250, Yeah!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,5

;---------------------------------------------------------------------------
; Alpha Counter 3 - Counter Hook
[Statedef 222]
type = S
movetype = A
Physics = N
anim = 920
velset = 0,0
ctrl = 0
juggle = 0
sprpriority = 4

[State 740, Ikuzo!]
type = PlaySnd
trigger1 = Time = 1
value = S8,4

[State 740, Counter!]
type = PlaySnd
trigger1 = Time = 1
value = S9,2

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 4
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 10
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 4
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 4
pos = 35,-60
anim = F3
time = 10
poweradd = -1000
sound = S1,3

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 222, To Hook]
type = Changestate
trigger1 = Time = 5
value = 221

;---------------------------------------------------------------------------
; STAND_A
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 15
ctrl = 0
anim = ifelse(palno > 6, 900, 230)

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]               
trigger1 = Time = 0
x = 0
y = 0

[State 250, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Light
damage    = 15
getpower = 10,5
givepower = 11,8
priority = 3,Hit
guardflag = MA
pausetime = 8,8
sparkxy = 0,-40
hitsound   = S1,4
guardsound = S1,0
sparkno = 0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -5.5
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -6
air.velocity = -3
ground.cornerpush.veloff = -6.5
air.fall = 1
fall.recovertime = 16

[State 250, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 250, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,1

;---------------------------------------------------------------------------
; STAND_B
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 25
ctrl = 0
anim = 240

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]
trigger1 = Time = 0
x = 0
y = 0

[State 241, Respectable Width]
type = Width
trigger1 = 1
edge = 25,5
player = 15,5

[State 260, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Medium
damage    = 16
getpower = 20,10 
givepower = 12,8
guardflag = MA
pausetime = 8,8
sparkxy = 0,-90
hitsound   = S1,5
guardsound = S1,0
sparkno = 1
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -8;.4
air.velocity = -2.2,-2
air.fall = 1
fall.recovertime = 26

[State 260, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Medium
damage    = 16
getpower = 20,10
givepower = 12,8
guardflag = MA
pausetime = 8,8
sparkxy = -10,-80
hitsound   = S1,5
guardsound = S1,0
sparkno = 1
ground.type = Low
ground.slidetime = 14
ground.hittime  = 16
ground.velocity = -7.4
air.velocity = -2.2,-2
air.fall = 1
fall.recovertime = 26

[State 260, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 260, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

[State 241, Huh!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = AnimElem = 4
value = S12,5

[State 241, Ho!]
type = PlaySnd
triggerall = Palno > 6
trigger1 = AnimElem = 4
value = S16,5

;---------------------------------------------------------------------------
; Hop Kick
[Statedef 241]
type    = A
movetype= A
physics = N
juggle  = 1
poweradd = 25 
ctrl = 0
velset = 4,-2
sprpriority = 2
anim = 251

[State 240, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 6,3

[State 200, 1]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = AnimElem = 5
value = 12,6

[State 661, Hoo!]
type = Playsnd
triggerall = Palno > 6
trigger1 = AnimElem = 5
value = S16,4

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Heavy
damage    = 65
priority = 4
guardflag = MA
getpower = 20,5
givepower = 10,9
pausetime = 9,9
sparkno = 2
sparkxy = -10,-60
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = -8
ground.cornerpush.veloff = -6
air.velocity = -3.3,-3
airguard.velocity = -2,-3

[State 240, Gravity]
type = StatetypeSet
triggerall = Time >= 6
trigger1 = 1
physics = A

;---------------------------------------------------------------------------
; STAND_C
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 40
ctrl = 0
anim = 250

[State 200, Velset when not chained from dash]
type = Velset
triggerall = PrevStateno != [100,102]               
trigger1 = Time = 0
x = 0
y = 0

[State 250, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage   = 63
animtype = Hard
guardflag = MA
pausetime = 9,9
sparkno = 2 
sparkxy = -10,-85
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 21
ground.hittime  = 21
ground.velocity = -12
guard.slidetime = 11
guard.hittime = 11
airguard.velocity = -10
guard.velocity = -10
air.velocity = -4,-5
air.fall = 1
fall.recovertime = 28

[State 270, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 270, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

[State 241, Yah!]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = AnimElem = 1
value = S0,5

[State 661, Hoo!]
type = Playsnd
triggerall = Palno > 6
trigger1 = AnimElem = 1
value = S16,4

;---------------------------------------------------------------------------
;CROUCH_X
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 15
ctrl = 0
anim = 400

[State 200, No falling!]
type = Velset            
trigger1 = Time = 0
y = 0

[State 400, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage    = 15
animtype  = Light
getpower  = 10
givepower = 8
priority = 3
hitflag = MAf
guardflag = L
pausetime = 8,8
sparkxy = 0,-50
hitsound   = S1,1
guardsound = S1,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6
air.velocity = -1.3,-3
sparkno = 0
ground.cornerpush.veloff = -8

[State 400, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 400, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,1

;---------------------------------------------------------------------------
;CROUCH_Y
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 25
ctrl = 0
anim = 410

[State 200, No falling!]
type = Velset            
trigger1 = Time = 0
y = 0

[State 410, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = 32
getpower  = 20
givepower = 20
hitflag = MAf
guardflag = MAf
pausetime = 8,8
sparkxy = 0,-50
hitsound   = S1,2
guardsound = S1,0
ground.type = Low
guard.velocity = -5
sparkno = 1
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10
air.velocity = -2.2,-2
ground.cornerpush.veloff = -10

[State 410, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 410, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
; CROUCH_Z (Launcher)
[Statedef 420]
type    = C                      
movetype= A                      
physics = C                      
juggle  = 1                  
ctrl = 0                         
anim = 420                      
       
[State 200, No falling!]
type = Velset            
trigger1 = Time = 0
y = 0

[State 250, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA
damage = 35
animtype = Medium
guardflag = MA    
hitflag = MAf      
getpower = 30,15
givepower = 15,8
pausetime = 9,9
sparkno = 2
sparkxy = 0,-70
hitsound = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0 ,-11.5
airguard.velocity = -1.8,-.8
air.type = High
air.velocity = 0,-10
air.juggle = 4
air.slidetime = 20
air.hittime = 20 
fall = 0

[State 250, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

[State 250, Yeah!]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = AnimElem = 1
value = S0,5

[State 250, Ho!]
type = PlaySnd
triggerall = Palno > 6
trigger1 = AnimElem = 1
value = S16,5

[State 250, 5]
type = ChangeState
trigger1 = MoveContact
trigger1 = !MoveGuarded
trigger1 = command = "holdup"
value = 55650
ctrl = 1

[State 250, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;CROUCH_A
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 15
ctrl = 0
anim = 430

[State 200, No falling!]
type = Velset            
trigger1 = Time = 0
y = 0

[State 430, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage    = 15
animtype  = Light
getpower  = 10
givepower = 8
hitflag = MAFD
guardflag = L
pausetime = 8,8
sparkxy = 0,-20
hitsound   = S1,4
guardsound = S1,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6
air.velocity = -.3,-3
down.velocity = -3,-6
air.hittime = 12
sparkno = 0
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = -8

[State 400, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 400, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,1

;---------------------------------------------------------------------------
;CROUCH_B
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 4
poweradd= 25
ctrl = 0
anim = 440

[State 200, No falling!]
type = Velset            
trigger1 = Time = 0
y = 0

[State 430, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
damage    = 32
animtype  = Med
getpower  = 20
givepower = 15
hitflag = MAFD
guardflag = L
pausetime = 8,8
sparkxy = 0,-20
hitsound   = S1,5
guardsound = S1,0
ground.type = Low
down.velocity = -3,-6
air.hittime = 12
sparkno = 1
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10
air.velocity = -2.2,-2
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = -10

[State 400, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 400, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
;CROUCH_C (Trip)
[Statedef 450]
type    = C
movetype= A
physics = C
juggle  = 1
poweradd= 40
ctrl = 0
anim = 450

[State 200, No falling!]
type = Velset            
trigger1 = Time = 0
y = 0

[State 450, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
damage    = 45
animtype  = High
getpower = 30,15
givepower = 15,8
hitflag = MAFD
guardflag = L
pausetime = 9,9
sparkxy = 0,-20
hitsound   = S1,6
guardsound = S1,0
ground.type = Trip
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -.1,-4
air.velocity = -1.3,-3
guard.velocity = -6
sparkno = 2
fall = 1
fall.recover = 0

[State 450, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 450, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

;---------------------------------------------------------------------------
;JUMP_X
[Statedef 600]
type    = A
movetype= A
physics = A
juggle = 1
poweradd= 15
ctrl = 0
anim = 600

[State 600, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage    = 15
getpower  = 10
givepower = 10
priority = 3
guardflag = HA
pausetime = 8,8
sparkxy = 10,-70
hitsound   = S1,1
guardsound = S1,0
ground.type = High
air.type = Low
air.velocity = 0,IfElse(Vel Y < 0, Vel Y * .95,-5);0,-6
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6
sparkno = 0
air.hittime = 9
yaccel = Const(movement.yaccel)
[State 600, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 600, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,1

;---------------------------------------------------------------------------
;JUMP_Y
[Statedef 610]
type    = A
movetype= A
physics = A
juggle = 1
poweradd= 25
ctrl = 0
anim = 610

[State 610, 3]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
damage    = 11
getpower  = 10
givepower = 15
guardflag = HA
pausetime = 8,8
sparkno = 1 
sparkxy = -10,-70
hitsound   = S1,2
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6
air.type = Low
air.velocity = 0,IfElse(Vel Y < 0, Vel Y * 1.1,-8)
air.hittime = 9
yaccel = Const(movement.yaccel)

[State 610, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = A, NA
damage    = 11
getpower  = 10
givepower = 15
guardflag = HA
pausetime = 12,9
sparkno = 1 
sparkxy = -10,-90
hitsound   = S1,2
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6
air.type = High
yaccel = Const(movement.yaccel)
air.velocity = 0,-10.2
air.hittime = 12

[State 610, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 610, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
;JUMP_Z
[Statedef 620]
type    = A
movetype= A
physics = A
juggle = 1
poweradd= 40
ctrl = 0
anim = 620

[State 620, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
guardflag = HA
animtype = Hard
damage = 45
getpower = 30,15
givepower = 15,8
pausetime = 9,9
sparkno = 2
sparkxy = 10,-70
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.type = Low
ground.slidetime = 21
ground.hittime = 19
guard.hittime = 18
air.hittime = 9
yaccel = Const(movement.yaccel)
ground.velocity = -6
guard.velocity = -6
air.velocity = -12,12
airguard.velocity = -6,1
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
fall.envshake.ampl = 5

[State 620, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = IfElse(Movecontact && P2statetype = A, 50, 51)
ctrl = 1

[State 620, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

[State 620, Aerial RAVE!]
type = Varset
trigger1 = movehit && prevstateno = [600,641]
var(12) = 1

[State 600, 5]
type = VelSet
trigger1 = (P2Statetype = A) && (movecontact)
x = Vel X * .9
y = .2

;---------------------------------------------------------------------------
;JUMP_A 
[Statedef 630]
type    = A
movetype= A
physics = A
juggle = 1
poweradd= 15
ctrl = 0
anim = ifelse(Palno > 6, 631, 630)

[State 630, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage    = 15
getpower  = 10
givepower = 8
guardflag = HA
priority = 3
pausetime = 8,8
sparkxy = -5,-60
hitsound   = S1,4
guardsound = S1,0
ground.type = High
air.type = Low
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -6
yaccel = Const(movement.yaccel)
air.velocity = 0,IfElse(Vel Y < 0, Vel Y * 1.1,-5);0,-6
sparkno = 0

[State 630, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 630, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,1

;---------------------------------------------------------------------------
;JUMP_B (holding up)
[Statedef 640]
type    = A
movetype= A
physics = A
juggle = 1
poweradd= 25
ctrl = 0
anim = 640

[State 640, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
damage    = 22
getpower  = 20
givepower = 15
guardflag = HA
priority = 3
pausetime = 8,8
sparkxy = 5,-80
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 13
ground.hittime  = 13
ground.velocity = -7
air.type = Low
yaccel = Const(movement.yaccel)
air.velocity = 0,IfElse(Vel Y < 0, Vel Y * .9,-5);0,-2.5
sparkno = 1
air.hittime = 9

[State 640, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 640, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
;JUMP_C (holding up)
[Statedef 650]
type    = A
movetype= A
physics = A
poweradd= 40
juggle = 1
ctrl = 0
anim = 650

[State 650, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = A, NA
guardflag = HA
animtype = Hard
damage = 45
getpower = 30,15
givepower = 15,8
pausetime = 9,9
sparkno = 2
sparkxy = -10,-60
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.type = Low
ground.slidetime = 21
ground.hittime = 20
guard.hittime = 18
air.hittime = 9
yaccel = Const(movement.yaccel)
ground.velocity = -6
guard.velocity = -6
air.velocity = -12,12
airguard.velocity = -6,1
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
fall.envshake.ampl = 5

[State 650, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = IfElse(Movecontact && P2statetype = A, 50, 51)
ctrl = 1

[State 650, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

[State 620, Aerial RAVE!]
type = Varset
trigger1 = movehit && prevstateno = [600,641]
var(12) = 1

[State 600, 5]
type = VelSet
trigger1 = (P2Statetype = A) && (movecontact)
x = Vel X * .9
y = .2

;---------------------------------------------------------------------------
;JUMP_B (Normal)
[Statedef 641]
type    = A
movetype= A
physics = A
poweradd= 25
juggle = 1
ctrl = 0
anim = ifelse(Palno > 6, 642, 641)

[State 670, 1]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 47
getpower  = 20
givepower = 15
guardflag = HA
priority = 3
pausetime = 8,8
sparkxy = -15,-70
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 14
ground.velocity = -5
air.type = Low
yaccel = Const(movement.yaccel)
air.velocity = 0,IfElse(Vel Y < 0, Vel Y * .9,-5);0,-2.5
sparkno = 1
air.hittime = 9

[State 670, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 670, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
;JUMP_C (Normal)
[Statedef 651]
number = 10
type    = A
movetype= A
physics = A
poweradd= 40
juggle = 1
ctrl = 0
anim = ifelse(Palno > 6, 652, 651)

[State 651, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
guardflag = HA
animtype = Hard
damage = 68
getpower = 30,15
givepower = 15,8
pausetime = 9,9
sparkno = 2
sparkxy = -15,-70
hitsound   = S1,6
guardsound = S1,0
ground.type = High
air.type = Low
ground.slidetime = 16
ground.hittime = 15
guard.hittime = 18
air.hittime = 9
yaccel = Const(movement.yaccel)
ground.velocity = -6
guard.velocity = -6
air.velocity = -12,12
airguard.velocity = -6,1
air.fall = 1
fall.recover = 0
fall.envshake.time = 10
fall.envshake.ampl = 5

[State 680, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = IfElse(Movecontact && P2statetype = A, 50, 51)
ctrl = 1

[State 680, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

[State 620, Aerial RAVE!]
type = Varset
trigger1 = movehit && prevstateno = [600,641]
var(12) = 1

[State 600, 5]
type = VelSet
trigger1 = (P2Statetype = A) && (movecontact)
x = Vel X * .9
y = .2

;---------------------------------------------------------------------------
; Punch Throw Grabbing
[Statedef 660]
type    = S
movetype= A
physics = S
ctrl = 0
juggle  = 8
velset = 0,0
anim = 670
sprpriority = 2

[State 660, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NT   
p2facing = 1
p1facing = ifelse(command = "holdfwd",-1,1)
hitflag = M-
getpower = 30,15                  
givepower = 15,8
priority = 2, Miss
sparkno = -1
hitsound = S1,9
p1stateno = 661
p2stateno = 662
p2getp1state = 1
fall = 1
fall.xvelocity = 0
fall.yvelocity = 0
kill = 0

[State 660, Damn]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw 1 - Overhead Slam! (P1 States)
[Statedef 661]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0,0
anim = 660

[State 661, NO MOVING]
type = PosFreeze
trigger1 = time >= 0

[State 661, Bind 1]
type = Targetbind
trigger1 = AnimElem = 1
pos = 40,0
time = 12

[State 661, Bind 2]
type = Targetbind
trigger1 = AnimElem = 2
pos = 50,-100
time = 5

[State 661, Bind 3]
type = Targetbind
trigger1 = AnimElem = 3
pos = 20,-85
time = 8

[State 661, Bind 4]
type = Targetbind
trigger1 = AnimElem = 4
pos = -50,-65
time = 4

[State 661, Bind 4]
type = Targetbind
trigger1 = AnimElem = 5
pos = -70,-35
time = 2

[State 661, HIT THE GROUND]
type = Targetstate
trigger1 = AnimElem = 5,1
value = 663

[State 661, Heh!]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = Time = 0
value = S12,6

[State 661, Grrr...!]
type = PlaySnd
triggerall = Palno > 6
trigger1 = Time = 0
value = S16,9

[State 661, Yah!]
type = Playsnd
triggerall = Palno <= 6
trigger1 = AnimElem = 4
value = S0,5

[State 661, Hoo!]
type = Playsnd
triggerall = Palno > 6
trigger1 = AnimElem = 4
value = S16,4

[State 5110, 6]
type = PlaySnd
trigger1 = AnimElem = 5
value = S8,6

[State 661, Ow!]
type = Targetlifeadd
trigger1 = AnimElem = 5
value = -120

[State 661, Turning]
type = Turn
trigger1 = AnimElem = 6

[State 710, Tech Hit!]
type = ChangeState
trigger1 = Time < 11 && (numtarget = 0) ; abort if opponent escaped somehow
value = 680

[State 2206, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw 1 - Overhead Slam! (P2 States)
[Statedef 662]
type    = S
movetype= H
physics = S
ctrl = 0
velset = 0,0,0

[State 662, Animation Time]
type = ChangeAnim2
trigger1 = Time = 0
value = 661

[State 720, It's Tech Hit Time]
type = SelfState
trigger1 = alive
trigger1 = time > 5 && time < 10
trigger1 = CanRecover
trigger1 = Command = "x" || Command = "y" || Command = "z" || Command = "a" || Command = "b" || Command = "c"
value = 5210 ;HITFALL_AIRRECOVER

;---------------------------------------------------------------------------
; Throw 1 - Overhead Slam! (P2 States - Hitting the ground)
[Statedef 663]
type    = S
movetype= H
physics = S
ctrl = 0
velset = 0,0,0
anim = 5101

[State 5110, EnvShake]
type = EnvShake
trigger1 = Time = 0
freq = 100
ampl = -5
phase = 10
time = 20

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = Time = 6;AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 11] ;If Alive
type = SelfState
triggerall = alive
trigger1 = Time = 6;AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5100

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; Throw 2 - Air Throw (Grab)
[Statedef 670]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 671

[State 670, 1]
type = HitDef
trigger1 = Time = 0
attr = A, NT   
p2facing = -1
p1facing = 1
hitflag = AF
getpower = 30,15                  
givepower = 15,8
priority = 2, Miss
sparkno = -1
hitsound = S1,9
damage = 50
p1stateno = 671
p2stateno = 672
p2getp1state = 1
fall = 1
kill = 0

[State 671, Damn!]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Throw 2 - Airborne Up and Over! (P1 State)
[Statedef 671]
type = A
movetype = A
physics = S
ctrl = 0
anim = 680
velset = 0,-.05

[State 803, Bind 1]
type = TargetBind
trigger1 = animelem = 1
pos = 10,-5

[State 803, Bind 2]
type = TargetBind
trigger1 = animelem = 2
pos = 5,5

[State 803, Vel DOWN!]
type = VelSet
trigger1 = animelem = 2
y = .05

[State 803, Gravity]
type = VelAdd
trigger1 = Time > 46
y = .39

[State 661, Heh!]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = Time = 0
value = S12,6

[State 661, Grrr...!]
type = PlaySnd
triggerall = Palno > 6
trigger1 = Time = 0
value = S16,9

[State 661, Yah!]
type = Playsnd
triggerall = Palno <= 6
trigger1 = AnimElem = 3
value = S0,5

[State 661, Ho!]
type = Playsnd
triggerall = Palno > 6
trigger1 = AnimElem = 3
value = S16,5

[State 803, Go away, you fiend!]
type = TargetState
trigger1 = AnimElem = 3
value = 693

[State 661, Ouch!]
type = targetlifeadd
trigger1 = AnimElem = 3
value = -100

[State 803, Turning is Neat]
type = Turn
trigger1 = Time = 46

[State 710, Tech Hit!]
type = ChangeState
trigger1 = Time < 11 && (numtarget = 0) ; abort if opponent escaped somehow
value = 681

[State 803, 2]
type = ChangeState
trigger1 = Pos Y >= -20
value = 674

;---------------------------------------------------------------------------
; Throw 2 - Airborne Up and Over! (P2 State)
[Statedef 672]
type = A
movetype = H
physics = N
ctrl = 0

[State 801, 2]
type = ChangeAnim2
trigger1 = time = 0
value = 681

[State 720, 3] ; Recover in mid air (use SelfState)
type = ChangeState
trigger1 = alive
trigger1 = time > 5 && time < 10
trigger1 = CanRecover
trigger1 = Command = "x" || Command = "y" || Command = "z" || Command = "a" || Command = "b" || Command = "c"
value = 675;5210 ;HITFALL_AIRRECOVER

;------------------------------------
; Throw 2 - Airborne Up and Over! (P2 State) Part 2
[Statedef 673]
type = A
movetype = H
physics = N
velset = -8,-8
sprpriority = 1

[State 663, 1]
type = PosAdd
trigger1 = time = 0
y = -10
x = 10

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, Gravity]
type = VelAdd
trigger1 = 1
y = .39

[State 663, Hitting the Ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100 

;---------------------------------------------------------------------------
; Throw 2 - Airborne Up and Over! (P1 Landing)
[Statedef 674]
type = A
physics = S
ctrl = 0
anim = 0

[State 723, Landing Dust]
type = Explod
trigger1 = Time = 1
persistent = 0
anim = 733
ID = 733
pos = -65,-3
postype = p1
sprpriority = -1
bindtime = 1

[State 674, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 674, To Standing]
type = Changestate
trigger1 = Time = 2
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw 2 - Airborne Up and Over! (P2 Turn)
[Statedef 675]
type = A
physics = S
ctrl = 0

[State 675, Bug Fix]
type = Turn
trigger1 = Time = 0

[State 720, 3] ; Recover in mid air (use SelfState)
type = SelfState
trigger1 = Time = 1
value = 5210 ;HITFALL_AIRRECOVER

;---------------------------------------------------------------------------
; You've been TECH HIT! (Ground)
[Statedef 680]
type = S
movetype= I
physics = S
anim = 690
velset = -5,0

[State 720, Guh!]
type = PlaySnd
trigger1 = Time = 0
value = S0,1

[State 720, 1]
type = makedust
trigger1 = time < 20
Trigger1 = Time % 2 = 0
pos = 0,0

[State 720, 1]
type = Changestate
Trigger1 = animTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;You've been TECH HIT! (Air)
[Statedef 681]
physics = A
ctrl = 0
velset = -3,-6

[State 720, Guh!]
type = PlaySnd
trigger1 = Time = 0
value = S0,1

[State 630, 3]
type = Changestate
trigger1 = Time = 6
value = 50

;---------------------------------------------------------------------------
; Kick Throw Grabbing
[Statedef 690]
type    = S
movetype= A
physics = S
ctrl = 0
juggle  = 8
velset = 0,0
anim = 670
sprpriority = 2

[State 660, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NT   
p2facing = -1
p1facing = ifelse(command = "holdfwd",-1,1)
hitflag = M-
priority = 2, Miss
sparkno = -1
getpower = 30,15
givepower = 15,8
damage = 50
hitsound = S1,9
p1stateno = 691
p2stateno = 692
kill = 0
p2getp1state = 1
fall = 1
fall.yvelocity = -.2

[State 660, Damn]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw 3 - Up and Over! (P1 State)
[Statedef 691]
type = S
movetype = A
physics = S
ctrl = 0
anim = 700
velset = 0,0,0

[State 661, Bind 1]
type = Targetbind
trigger1 = AnimElem = 1
pos = 40,0
time = 12

[State 803, Bind 2]
type = TargetBind
trigger1 = animelem = 2
pos = 10,-5

[State 803, Bind 3]
type = TargetBind
trigger1 = animelem = 3
pos = 5,5

[State 661, Heh!]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = Time = 0
value = S12,6

[State 661, Grrr...!]
type = PlaySnd
triggerall = Palno > 6
trigger1 = Time = 0
value = S16,9

[State 661, Yah!]
type = Playsnd
triggerall = Palno <= 6
trigger1 = AnimElem = 4
value = S0,5

[State 661, Ho!]
type = Playsnd
triggerall = Palno > 6
trigger1 = AnimElem = 4
value = S16,5

[State 803, Go away, you fiend!]
type = TargetState
trigger1 = AnimElem = 4
value = 693

[State 661, Ouch!]
type = targetlifeadd
trigger1 = AnimElem = 4
value = -100

[State 803, 1]
type = PosSet
trigger1 = animelem = 1
y = 0

[State 803, Turning is Neat]
type = Turn
trigger1 = Animtime = 0

[State 710, Tech Hit!]
type = ChangeState
trigger1 = Time < 11 && (numtarget = 0) ; abort if opponent escaped somehow
value = 680

[State 803, 2]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Throw 3 - Up and Over! (P2 State)
[Statedef 692]
type = S
movetype = H
physics = N
ctrl = 0

[State 801, 2]
type = ChangeAnim2
trigger1 = time = 0
value = 701

[State 720, 3] ; Recover in mid air (use SelfState)
type = SelfState
trigger1 = alive
trigger1 = time > 5 && time < 10
trigger1 = CanRecover
trigger1 = Command = "x" || Command = "y" || Command = "z" || Command = "a" || Command = "b" || Command = "c"
value = 5210 ;HITFALL_AIRRECOVER

;------------------------------------
; Throw 3 - Up and Over! (P2 State) Part 2
[Statedef 693]
type = A
movetype = H
physics = N
velset = -12,-12.5
sprpriority = 1

[State 663, 1]
type = PosAdd
trigger1 = time = 0
y = -10
x = 10

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, Gravity]
type = VelAdd
trigger1 = 1
y = .5

[State 663, Hitting the Ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100 

;---------------------------------------------------------------------------
; Ground Fireball_X
[Statedef 700]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
velset = 0
anim = 710

[State 241, Respectable Width]
type = Width
trigger1 = 1
edge = 25,5
player = 15,5

[State 700, Hadoken!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 2
value = S13,1

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 3
value = S16,9

[State 700, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 700, 1]
type = Projectile
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
projanim = 720
projhitanim = 721
removeanim = 721
offset = 45, -3
projID = 722
velocity = 3.5, 0
; HitDef part of projectile info
attr = S, SP
damage    = 78,9
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3

[State 184, 2]
type = Projectile
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
projanim = 860
projid = 722
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 3.5
offset = 60,8
; HitDef part of projectile info
attr = S, SP
damage    = 78,9
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3

[State 700, The Dust Trail!]
type = Helper
trigger1 = AnimElem = 4, 1
helpertype = Normal
name = "DustTrail"
postype = p1
pos = IfElse(Var(9) = 0, 70, 50),10
stateno = 706
ownpal = 1
persistent = 0

[State 700, Done!]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 701, WHOOSH!]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
value = S12,4

[State 700, Small Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
value = S14,2

;---------------------------------------------------------------------------
; Ground Fireball_Y
[Statedef 701]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
velset = 0
anim = 710

[State 241, Respectable Width]
type = Width
trigger1 = 1
edge = 25,5
player = 15,5

[State 700, Hadoken!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 2
value = S13,1

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 3
value = S16,9

[State 701, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 701, 1]
type = Projectile
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
projanim = 720
projhitanim = 721
removeanim = 721
offset = 45, -3
velocity = 5.5, 0
projID = 722
sparkno = 3
sparkxy = 60,-57
; HitDef part of projectile info
attr = S, SP
damage    = 61,6
animtype = Hard
guardflag = MA
pausetime = 0,9
getpower = 30,15                  
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3

[State 184, 2]
type = Projectile
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
projanim = 860
projid = 722
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 5.5
offset = 60,8
attr = S, SP
damage    = 61,6
animtype = Hard
guardflag = MA
pausetime = 0,9
getpower = 30,15                  
givepower = 15,8
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3

[State 700, The Dust Trail!]
type = Helper
trigger1 = AnimElem = 4, 1
helpertype = Normal
name = "DustTrail"
postype = p1
pos = IfElse(Var(9) = 0, 70, 50),10
stateno = 706
ownpal = 1
persistent = 0

[State 701, Done!]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 701, WHOOSH!]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
value = S12,4

[State 700, Small Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
value = S14,2

;---------------------------------------------------------------------------
; Ground Fireball_Z
[Statedef 702]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
velset = 0
anim = 710

[State 241, Respectable Width]
type = Width
trigger1 = 1
edge = 25,5
player = 15,5

[State 700, Hadoken!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 2
value = S13,1

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 3
value = S16,9

[State 702, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 702, 1]
type = Projectile
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
projanim = 720
projhitanim = 721
removeanim = 721
projID = 722
offset = 45, -3
velocity = 7, 0
; HitDef part of projectile info
attr = S, SP
damage    = 48,3
animtype = Hard
guardflag = MA
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
getpower = 30,15                  
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3

[State 184, 2]
type = Projectile
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
projanim = 860
projid = 722
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 7
offset = 60,8
attr = S, SP
damage    = 48,3
animtype = Hard
guardflag = MA
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
getpower = 30,15                  
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3

[State 700, The Dust Trail!]
type = Helper
trigger1 = AnimElem = 4, 1
helpertype = Normal
name = "DustTrail"
postype = p1
pos = IfElse(Var(9) = 0, 70, 50),10
stateno = 706
ownpal = 1
persistent = 0

[State 702, Done!]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 701, WHOOSH!]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
value = S12,4

[State 700, Small Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
value = S14,2

;---------------------------------------------------------------------------
; Ground Red Fireball_X
[Statedef 703]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
velset = 0
anim = ifelse(Palno > 6, 981, 710)

[State 700, Hadoken!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 2
value = S13,1

[State 700, Metsu!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 1
value = S16,6

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 12
value = S16,9

[State 790, Evil Red Stuff]
type = Explod
triggerall = Palno > 6
trigger1 = Time = 0
anim = 951
postype = P1
ID = 952
pos = 0,0
removetime = 16
bindtime = 999
removeongethit = 1
sprpriority = 5
ownpal = 1

[State 700, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 700, 1]
type = Projectile
triggerall = Var(9) = 0
trigger1 = Palno <= 6 && AnimElem = 4
projanim = 722
projhitanim = 723
removeanim = 723
projID = 723
offset = 45, -3
velocity = 3.5, 0
; HitDef part of projectile info
attr = S, SP
damage    = 87,12
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3
air.fall = 1
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 32,0,0
palfx.mul = 400,192,192
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 700, Evil]
type = Projectile
triggerall = Var(9) = 0
trigger1 = Palno > 6 && AnimElem = 12
projanim = 980
projhitanim = 721
removeanim = 721
projID = 723
offset = 45, -3
velocity = 3.5, 0
projhits = 5
projmisstime = 0
; HitDef part of projectile info
attr = S, SP
damage    = 17,3
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 4,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3
air.fall = 1
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 184, 2]
type = Projectile
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
projanim = 861
projid = 723
projhitanim = 862
projremovetime = -1
projhitvelocity = 0,0
velocity = 3.5
offset = 60,8
attr = S, SP
damage    = 87,12
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3
air.fall = 1
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 32,0,0
palfx.mul = 400,192,192
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 700, The Dust Trail!]
type = Helper
trigger1 = Palno <= 6 && AnimElem = 4, 1
trigger2 = Palno > 6 && AnimElem = 12, 1
helpertype = Normal
name = "DustTrail"
postype = p1
pos = IfElse(Var(9) = 0, 70, 50),10
stateno = 706
ownpal = 1
persistent = 0

[State 700, Done!]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 701, WHOOSH!]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = Palno <= 6 && AnimElem = 4
trigger2 = Palno > 6 && AnimElem = 12
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = Palno <= 6 && AnimElem = 4
trigger2 = Palno > 6 && AnimElem = 12
value = S12,4

[State 700, Small Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
value = S14,2

;---------------------------------------------------------------------------
; Ground Red Fireball_Y
[Statedef 704]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
velset = 0
anim = ifelse(Palno > 6, 981, 710)

[State 700, Hadoken!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 2
value = S13,1

[State 700, Metsu!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 1
value = S16,6

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 12
value = S16,9

[State 790, Evil Red Stuff]
type = Explod
triggerall = Palno > 6
trigger1 = Time = 0
anim = 951
postype = P1
ID = 952
pos = 0,0
removetime = 16
bindtime = 999
removeongethit = 1
sprpriority = 5
ownpal = 1

[State 701, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 701, 1]
type = Projectile
triggerall = Var(9) = 0
trigger1 = Palno <= 6 && AnimElem = 4
projanim = 722
projhitanim = 723
removeanim = 723
projID = 723
offset = 45, -3
velocity = 5.5, 0
sparkno = 3
sparkxy = 60,-57
; HitDef part of projectile info
attr = S, SP
damage    = 75,9
animtype = Hard
guardflag = MA
pausetime = 0,9
getpower = 30,15                  
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 32,0,0
palfx.mul = 400,192,192
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 701, Evil]
type = Projectile
triggerall = Var(9) = 0
trigger1 = Palno > 6 && AnimElem = 12
projanim = 980
projhitanim = 721
removeanim = 721
projID = 723
offset = 45, -3
velocity = 5.5, 0
sparkno = 3
sparkxy = 60,-57
projhits = 4
; HitDef part of projectile info
attr = S, SP
damage    = 18,3
animtype = Hard
guardflag = MA
pausetime = 4,9
getpower = 30,15                  
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 184, 2]
type = Projectile
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
projanim = 861
projid = 723
projhitanim = 862
projremovetime = -1
projhitvelocity = 0,0
velocity = 5.5
offset = 60,8
attr = S, SP
damage    = 75,9
animtype = Hard
guardflag = MA
pausetime = 0,9
getpower = 30,15                  
givepower = 15,8
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 32,0,0
palfx.mul = 400,192,192
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 700, The Dust Trail!]
type = Helper
trigger1 = Palno <= 6 && AnimElem = 4, 1
trigger2 = Palno > 6 && AnimElem = 12, 1
helpertype = Normal
name = "DustTrail"
postype = p1
pos = IfElse(Var(9) = 0, 70, 50),10
stateno = 706
ownpal = 1
persistent = 0

[State 701, Done!]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 701, WHOOSH!]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = Palno <= 6 && AnimElem = 4
trigger2 = Palno > 6 && AnimElem = 12
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = Palno <= 6 && AnimElem = 4
trigger2 = Palno > 6 && AnimElem = 12
value = S12,4

[State 700, Small Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
value = S14,2

;---------------------------------------------------------------------------
; Ground Red Fireball_Z
[Statedef 705]
type    = S
movetype= A
physics = S
poweradd= 70
ctrl = 0
velset = 0
anim = ifelse(Palno > 6, 981, 710)

[State 700, Hadoken!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 2
value = S13,1

[State 700, Metsu!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 1
value = S16,6

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 12
value = S16,9

[State 790, Evil Red Stuff]
type = Explod
triggerall = Palno > 6
trigger1 = Time = 0
anim = 951
postype = P1
ID = 952
pos = 0,0
removetime = 16
bindtime = 999
removeongethit = 1
sprpriority = 5
ownpal = 1

[State 702, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 702, 1]
type = Projectile
triggerall = Var(9) = 0
trigger1 = Palno <= 6 && AnimElem = 4
projanim = 722
projhitanim = 723
removeanim = 723
projID = 723
offset = 45, -3
velocity = 7, 0
; HitDef part of projectile info
attr = S, SP
damage    = 62,6
animtype = Hard
guardflag = MA
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
getpower = 30,15                  
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 32,0,0
palfx.mul = 400,192,192
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 702, Evil]
type = Projectile
triggerall = Var(9) = 0
trigger1 = Palno > 6 && AnimElem = 12
projanim = 980
projhitanim = 721
removeanim = 721
projID = 723
offset = 45, -3
velocity = 7, 0
projhits = 3
projmisstime = 0
; HitDef part of projectile info
attr = S, SP
damage    = 21,2
animtype = Hard
guardflag = MA
pausetime = 4,9
sparkno = 3
sparkxy = 60,-57
getpower = 30,15                  
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 184, 2]
type = Projectile
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
projanim = 861
projid = 723
projhitanim = 862
projremovetime = -1
projhitvelocity = 0,0
velocity = 7
offset = 60,8
attr = S, SP
damage    = 62,6
animtype = Hard
guardflag = MA
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
getpower = 30,15                  
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -2.5,-5
air.juggle = 3
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 32,0,0
palfx.mul = 400,192,192
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 700, The Dust Trail!]
type = Helper
trigger1 = Palno <= 6 && AnimElem = 4, 1
trigger2 = Palno > 6 && AnimElem = 12, 1
helpertype = Normal
name = "DustTrail"
postype = p1
pos = IfElse(Var(9) = 0, 70, 50),10
stateno = 706
ownpal = 1
persistent = 0

[State 702, Done!]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 701, WHOOSH!]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = Palno <= 6 && AnimElem = 4
trigger2 = Palno > 6 && AnimElem = 12
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = Palno <= 6 && AnimElem = 4
trigger2 = Palno > 6 && AnimElem = 12
value = S12,4

[State 700, Small Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
value = S14,2

;---------------------------------------------------------------------------
; Dust Trail Helper
[Statedef 706]
type    = C
movetype= I
physics = N
ctrl = 0
anim = 747
sprpriority = 5

[State 703, No Shadows!]
type = Assertspecial
trigger1 = 1
flag = noshadow

[State 703, Ground_Hadoken X]
type = VelSet
trigger1 = Time = 0 && (parent, StateNo = 700 || parent, StateNo = 703)
x = 3.5

[State 703, Ground_Hadoken Y]
type = VelSet
trigger1 = Time = 0 && (parent, StateNo = 701 || parent, StateNo = 704)
x = 5.5

[State 703, Ground_Hadoken Z]
type = VelSet
trigger1 = Time = 0 && (parent, StateNo = 702 || parent, StateNo = 705)
x = 7

[State 703, Denjin Hadoken/Burst Shinkuu Hadoken]
type = VelSet
trigger1 = Time = 0 && (parent, StateNo = 821)
trigger2 = Time = 0 && (parent, StateNo = 870)
x = 6

[State 703, Dissipation Animation]
type = ChangeState
trigger1 = parent, Var(13) = 1
trigger2 = FrontEdgeBodyDist <= -100
value = 707
ignorehitpause = 1

;---------------------------------------------------------------------------
; Dust Trail Helper DEAD!
[Statedef 707]
type    = C
movetype= I
physics = N
ctrl = 0
anim = 748
sprpriority = 5
velset = 0,0

[State 703, Bug Fix]
type = VelSet
trigger1 = 1
x = 1

[State 703, No Shadows!]
type = Assertspecial
trigger1 = 1
flag = noshadow

[State 703, Buh Bye!]
type = DestroySelf
trigger1 = AnimTime = 0

;---------------------------------------------------------------------------
; Fake Hadoken
[Statedef 708]
type    = S
movetype= I
physics = S
poweradd= 0
ctrl = 0
velset = 0
anim = 712

[State 702, Yeah!]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = Time = 2
value = S0,5

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = Time = 2
value = S16,9

[State 702, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 702, Done!]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Air Fake Hadoken
[Statedef 709]
type    = A
movetype= A
physics = N
poweradd= 0
velset = Vel X / 2, Vel Y / 2
ctrl = 0
anim = 713

[State 702, Yeah!]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = Time = 2
value = S0,5

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = Time = 2
value = S16,9

[State 710, 1]
type = VelMul
trigger1 = Time = 0
x = .2 ;.05
y = .2  ;.02

[State 710, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 712, Whoops!]
type = PosSet
trigger1 = Pos Y >= 25
y = 25

;---------------------------------------------------------------------------
; Air Fireball_X
[Statedef 710]
type    = A
movetype= A
physics = N
poweradd= 70
velset = Vel X / 2, Vel Y / 2
ctrl = 0
anim = ifelse(palno > 6, 960, 711)

[State 700, Hadoken!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 2
value = S13,1

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 3
value = S16,9

[State 710, 1]
type = VelMul
trigger1 = Time = 0
x = .2 ;.05
y = .2  ;.02

[State 700, 1]
type = Projectile
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
projanim = 720
projhitanim = 721
removeanim = 722
projID = 724
offset = 25, ifelse(palno > 6, -34, -47)
velocity = 3.5, 0
; HitDef part of projectile info
attr = S, SP
damage    = 78,9
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
air.animtype = Back
air.velocity = -7,-3
air.juggle = 3
air.fall = 1
fall.recover = 0

[State 700, 1]
type = Projectile
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
projanim = 860
projhitanim = 831
removeanim = 831
projID = 724
offset = 50,-40
velocity = 3.5, 0
; HitDef part of projectile info
attr = S, SP
damage    = 78,9
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
air.animtype = Back
air.velocity = -7,-3
air.juggle = 3
air.fall = 1
fall.recover = 0

[State 710, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 620, Aerial RAVE!]
type = Varset
trigger1 = projhit724 = 1 && prevstateno = [600,641]
var(12) = 1

[State 712, Whoops!]
type = PosSet
trigger1 = Pos Y >= 25
y = 25

[State 701, WHOOSH!]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
value = S12,4

[State 700, Small Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
value = S14,2

;---------------------------------------------------------------------------
; Air Fireball_Y
[Statedef 711]
type    = A
movetype= A
physics = N
poweradd= 70
velset = Vel X / 2, Vel Y / 2
ctrl = 0
anim = ifelse(palno > 6, 960, 711)

[State 700, Hadoken!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 2
value = S13,1

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 3
value = S16,9

[State 711, 1]
type = VelMul
trigger1 = Time = 0
x = .2 ;.05
y = .2  ;.02

[State 701, 1]
type = Projectile
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
projanim = 720
projhitanim = 721
removeanim = 722
projID = 724
offset = 25, ifelse(palno > 6, -34, -47)
velocity = 5.5, 0
sparkno = 3
sparkxy = 60,-57
; HitDef part of projectile info
attr = S, SP
damage    = 61,6
animtype = Hard
guardflag = MA
pausetime = 0,9
getpower = 30,15                  
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
air.animtype = Back
air.velocity = -7,-3
air.juggle = 3
air.fall = 1
fall.recover = 0

[State 701, 1]
type = Projectile
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
projanim = 860
projhitanim = 831
removeanim = 831
projID = 724
offset = 25, -47
velocity = 5.5, 0
sparkno = 3
sparkxy = 60,-57
; HitDef part of projectile info
attr = S, SP
damage    = 61,6
animtype = Hard
guardflag = MA
pausetime = 0,9
getpower = 30,15                  
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
air.animtype = Back
air.velocity = -7,-3
air.juggle = 3
air.fall = 1
fall.recover = 0

[State 711, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 712, Whoops!]
type = PosSet
trigger1 = Pos Y >= 25
y = 25

[State 620, Aerial RAVE!]
type = Varset
trigger1 = projhit724 = 1 && prevstateno = [600,641]
var(12) = 1

[State 701, WHOOSH!]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
value = S12,4

[State 700, Small Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
value = S14,2

;---------------------------------------------------------------------------
; Air Fireball_Z
[Statedef 712]
type    = A
movetype= A
physics = N
poweradd= 70
velset = Vel X / 2, Vel Y / 2
ctrl = 0
anim = ifelse(palno > 6, 960, 711)

[State 700, Hadoken!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 2
value = S13,1

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 3
value = S16,9

[State 712, 1]
type = VelMul
trigger1 = Time = 0
x = .2 ;.05
y = .2  ;.02

[State 702, 1]
type = Projectile
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
projanim = 720
projhitanim = 721
removeanim = 722
projID = 724
offset = 25, ifelse(palno > 6, -34, -47)
velocity = 7, 0
; HitDef part of projectile info
attr = S, SP
damage    = 48,3
animtype = Hard
guardflag = MA
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
getpower = 30,15                  
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
air.animtype = Back
air.velocity = -7,-3
air.juggle = 3
air.fall = 1
fall.recover = 0

[State 702, 1]
type = Projectile
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
projanim = 860
projhitanim = 831
removeanim = 831
projID = 724
offset = 50,-40
velocity = 7, 0
; HitDef part of projectile info
attr = S, SP
damage    = 48,3
animtype = Hard
guardflag = MA
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
getpower = 30,15                  
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8
air.animtype = Back
air.velocity = -7,-3
air.juggle = 3
air.fall = 1
fall.recover = 0

[State 712, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 712, Whoops!]
type = PosSet
trigger1 = Pos Y >= 25
y = 25

[State 620, Aerial RAVE!]
type = Varset
trigger1 = projhit724 = 1 && prevstateno = [600,641]
var(12) = 1

[State 701, WHOOSH!]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = AnimElem = 4
value = S12,4

[State 700, Small Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
value = S14,2

;---------------------------------------------------------------------------
; Air Red Fireball_X
[Statedef 713]
type    = A
movetype= A
physics = N
poweradd= 70
velset = Vel X / 2, Vel Y / 2
ctrl = 0
anim = ifelse(palno > 6, 961, 711)

[State 700, Hadoken!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 2
value = S13,1

[State 700, Metsu!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 1
value = S16,6

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 6
value = S16,9

[State 790, Evil Red Stuff]
type = Explod
triggerall = Palno > 6
trigger1 = Time = 3
anim = 954
postype = P1
ID = 952
pos = 0,0
removetime = 16
bindtime = 999
removeongethit = 1
sprpriority = -1
ownpal = 1

[State 712, 1]
type = VelMul
trigger1 = Time = 0
x = .2 ;.05
y = .2  ;.02

[State 700, 1]
type = Projectile
triggerall = Var(9) = 0
trigger1 = Palno <= 6 && AnimElem = 4
projanim = 722
projhitanim = 723
removeanim = 723
projID = 725
offset = 25,-47
velocity = 3.5, 0
; HitDef part of projectile info
attr = S, SP
damage    = 87,12
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -7.5,-5
air.juggle = 3
air.fall = 1
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 32,0,0
palfx.mul = 400,192,192
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 700, Evil]
type = Projectile
triggerall = Var(9) = 0
trigger1 = Palno > 6 && AnimElem = 6
projanim = 980
projhitanim = 721
removeanim = 721
projID = 725
offset = 25,-34
velocity = 3.5, 0
projhits = 5
projmisstime = 0
; HitDef part of projectile info
attr = S, SP
damage    = 17,3
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 4,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -7.5,-5
air.juggle = 3
air.fall = 1
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 700, 1]
type = Projectile
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
projanim = 861
projhitanim = 862
removeanim = 862
projID = 725
offset = 50,-40
velocity = 3.5, 0
; HitDef part of projectile info
attr = S, SP
damage    = 87,12
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -7.5,-5
air.juggle = 3
air.fall = 1
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 32,0,0
palfx.mul = 400,192,192
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 712, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 712, Whoops!]
type = PosSet
trigger1 = Pos Y >= 25
y = 25

[State 620, Aerial RAVE!]
type = Varset
trigger1 = projhit725 = 1 && prevstateno = [600,641]
var(12) = 1

[State 701, WHOOSH!]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = palno <= 6 && AnimElem = 4
trigger2 = palno > 6 && AnimElem = 6
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = palno <= 6 && AnimElem = 4
trigger2 = palno > 6 && AnimElem = 6
value = S12,4

[State 700, Small Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
value = S14,2

;---------------------------------------------------------------------------
; Air Red Fireball_Y
[Statedef 714]
type    = A
movetype= A
physics = N
poweradd= 70
velset = Vel X / 2, Vel Y / 2
ctrl = 0
anim = ifelse(palno > 6, 961, 711)

[State 700, Hadoken!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 2
value = S13,1

[State 700, Metsu!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 1
value = S16,6

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 6
value = S16,9

[State 790, Evil Red Stuff]
type = Explod
triggerall = Palno > 6
trigger1 = Time = 3
anim = 954
postype = P1
ID = 952
pos = 0,0
removetime = 16
bindtime = 999
removeongethit = 1
sprpriority = -1
ownpal = 1

[State 712, 1]
type = VelMul
trigger1 = Time = 0
x = .2 ;.05
y = .2  ;.02

[State 700, 1]
type = Projectile
triggerall = Var(9) = 0
trigger1 = palno <= 6 && AnimElem = 4
projanim = 722
projhitanim = 723
removeanim = 723
projID = 725
offset = 25,-47
velocity = 5.5, 0
; HitDef part of projectile info
attr = S, SP
damage    = 75,9
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -7.5,-5
air.juggle = 3
air.fall = 1
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 32,0,0
palfx.mul = 400,192,192
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 700, Evil]
type = Projectile
triggerall = Var(9) = 0
trigger1 = Palno > 6 && AnimElem = 6
projanim = 980
projhitanim = 721
removeanim = 721
projID = 725
offset = 25,-34
velocity = 5.5, 0
projhits = 4
projmisstime = 0
; HitDef part of projectile info
attr = S, SP
damage    = 18,3
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 4,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -7.5,-5
air.juggle = 3
air.fall = 1
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 700, 1]
type = Projectile
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
projanim = 861
projhitanim = 862
removeanim = 862
projID = 725
offset = 50,-40
velocity = 5.5, 0
; HitDef part of projectile info
attr = S, SP
damage    = 75,9
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -7.5,-5
air.juggle = 3
air.fall = 1
fall.animtype = Hard
fall.recovertime = 45
forcestand = 1
palfx.time = 50
palfx.add = 32,0,0
palfx.mul = 400,192,192
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 712, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 712, Whoops!]
type = PosSet
trigger1 = Pos Y >= 25
y = 25

[State 620, Aerial RAVE!]
type = Varset
trigger1 = projhit725 = 1 && prevstateno = [600,641]
var(12) = 1

[State 701, WHOOSH!]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = palno <= 6 && AnimElem = 4
trigger2 = palno > 6 && AnimElem = 6
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = palno <= 6 && AnimElem = 4
trigger2 = palno > 6 && AnimElem = 6
value = S12,4

[State 700, Small Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
value = S14,2

;---------------------------------------------------------------------------
; Air Red Fireball_Z
[Statedef 715]
type    = A
movetype= A
physics = N
poweradd= 70
velset = Vel X / 2, Vel Y / 2
ctrl = 0
anim = ifelse(palno > 6, 961, 711)

[State 700, Hadoken!]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 2
value = S13,1

[State 700, Metsu!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 1
value = S16,6

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = AnimElem = 6
value = S16,9

[State 790, Evil Red Stuff]
type = Explod
triggerall = Palno > 6
trigger1 = Time = 3
anim = 954
postype = P1
ID = 952
pos = 0,0
removetime = 16
bindtime = 999
removeongethit = 1
sprpriority = -1
ownpal = 1

[State 712, 1]
type = VelMul
trigger1 = Time = 0
x = .2 ;.05
y = .2  ;.02

[State 700, 1]
type = Projectile
triggerall = Var(9) = 0
trigger1 = Palno <= 6 && AnimElem = 4
projanim = 722
projhitanim = 723
removeanim = 723
projID = 725
offset = 25,-47
velocity = 7, 0
; HitDef part of projectile info
attr = S, SP
damage    = 62,6
animtype = Hard
guardflag = MA
getpower = 30,15                  
givepower = 15,8
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -7.5,-5
air.juggle = 3
air.fall = 1
fall.recovertime = 45
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 32,0,0
palfx.mul = 400,192,192
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 700, Evil]
type = Projectile
triggerall = Var(9) = 0
trigger1 = Palno > 6 && AnimElem = 6
projanim = 980
projhitanim = 721
removeanim = 721
projID = 725
offset = 25,-34
velocity = 7, 0
projhits = 3
projmisstime = 0 
; HitDef part of projectile info
attr = S, SP
damage    = 21,2
animtype = Hard
guardflag = MA
getpower = 30,15
givepower = 15,8
pausetime = 4,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -7.5,-5
air.juggle = 3
air.fall = 1
fall.recovertime = 45
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 700, 1]
type = Projectile
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
projanim = 861
projhitanim = 862
removeanim = 862
projID = 725
offset = 50,-40
velocity = 7, 0
; HitDef part of projectile info
attr = S, SP
damage    = 62,6
animtype = Hard
guardflag = MA
getpower = 30,15
givepower = 15,8
pausetime = 0,9
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -4,-6.5
air.animtype = Back
air.velocity = -7.5,-5
air.juggle = 3
air.fall = 1
fall.recovertime = 45
fall.animtype = Hard
forcestand = 1
palfx.time = 50
palfx.add = 32,0,0
palfx.mul = 400,192,192
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 712, Fall!]
type = ChangeState
trigger1 = AnimTime = 0
value = 51
ctrl = 1

[State 712, Whoops!]
type = PosSet
trigger1 = Pos Y >= 25
y = 25

[State 620, Aerial RAVE!]
type = Varset
trigger1 = projhit725 = 1 && prevstateno = [600,641]
var(12) = 1

[State 701, WHOOSH!]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = palno <= 6 && AnimElem = 4
trigger2 = palno > 6 && AnimElem = 6
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 0
trigger1 = palno <= 6 && AnimElem = 4
trigger2 = palno > 6 && AnimElem = 6
value = S12,4

[State 700, Small Fireball Noise :P]
type = PlaySnd
triggerall = Var(9) = 1
trigger1 = AnimElem = 4
value = S14,2

;---------------------------------------------------------------------------
; Dragon Punch_X 
[Statedef 720]
type = S
movetype = A
physics = N
anim = 750
poweradd = 70
velset = 0
ctrl = 0
juggle = 5

[State 720, Dust] 
type = Explod
trigger1 = (Time = 0) && (Pos Y >= 0)
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 720, VelSTOP]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 720, Sho-ryuken!]
type = PlaySnd
trigger1 = Time = 1
value = S2,0

[State 720, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = C, SA
damage    = 122,4
animtype  = Back
getpower  = 10
givepower = 8
hitflag = MAF
guardflag = MA
pausetime = 11,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
air.juggle = 2
ground.type = Low
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -15,-12
air.velocity = -15,-12
ground.cornerpush.veloff = -14
yaccel = Const(movement.yaccel)
p2facing = 1
p2stateno = 725
fall.recovertime = 38
fall = 1
fall.yvelocity = -.2

[State 720, Rise!]
type = ChangeState
trigger1 = AnimTime = 0 && movecontact
value = 721

[State 720, No movecontact?]
type = ChangeState
trigger1 = AnimTime = 0 && !movecontact
value = 724

;---------------------------------------------------------------------------
; Dragon Punch_X (Rising) [movehit]
[Statedef 721]
type = A
movetype = A
physics = A
ctrl = 0
anim = 751
velset = 4,-6
juggle = 5

[State 721, 0]
type = VelAdd
trigger1 = Time != 1
x = -.2

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 722

;---------------------------------------------------------------------------
; All Dragon Punches (Falling)
[Statedef 722]
type = A
movetype = I
physics = N
anim = 752
ctrl = 0
velset = 0

[State 722, Gravity]
type = VelAdd
trigger1 = 1
y = .39

[State 722, Land now!]
type = ChangeState
trigger1 = pos y >= 0
value = 723

;---------------------------------------------------------------------------
; ALL Dragon Punches (Landing)
[Statedef 723]
type = S
movetype = I
physics = S
anim = 753
ctrl = 0
velset = 0,0

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S12,0

[State 723, Landing Dust]
type = Explod
trigger1 = Time = 1
persistent = 0
anim = 733
ID = 733
pos = -65,-3
postype = p1
sprpriority = -1
bindtime = 1

[State 723, Don't Sink!]
type = PosSet
trigger1 = Time = 0
y = 0

[State 723, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dragon Punch_X (Rising) [No Movehit]
[Statedef 724]
type = A
movetype = A
physics = A
ctrl = 0
anim = 751
velset = 4,-6
juggle = 5

[State 721, 0]
type = VelAdd
trigger1 = Time != 1
x = -.2

[State 721, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = A, SA
damage = 122,4
animtype  = Back
getpower  = 10
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 7,7
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
air.juggle = 4
ground.type = High
air.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -14,-9
air.velocity = -14,-9
yaccel = Const(movement.yaccel)
ground.cornerpush.veloff = 0
p2facing = 1
p2stateno = 725
fall.recovertime = 32
fall = 1
fall.yvelocity = -.2

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 722

;---------------------------------------------------------------------------
; Dragon Punch HITA_SHAKE
[Statedef 725]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 726

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; Dragon Punch HITA_UP (initial going up)
[Statedef 726]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5035, 1]
type = ChangeAnim
triggerall = (Vel X = 0) && (PrevStateno != 5080)
trigger1 = Time = 7
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = SelfState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = Hitfall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 728 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 727 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; Dragon Punch HITA_UP_T (transition)
[Statedef 727]
type    = A
movetype= H
physics = N

[State 1231, Wall hit spark!]
type = Explod
trigger1 = BackEdgeDist <= 18 && !Time
anim = F72
ontop = 1
postype = p1
pos = (BackEdgeDist - 10),-60
pausemovetime = 9999999999999999999999
supermovetime = 9999999999999999999999

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0 && (Var(5) = 0)
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = SelfState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 728 ;HITA_FALL

;---------------------------------------------------------------------------
; Dragon Punch HITA_FALL (knocked up, falling)
[Statedef 728]
type    = A
movetype= H
physics = N

[State 1231, Wall hit spark!]
type = Explod
trigger1 = !Time && BackEdgeDist <= 18
anim = F72
ontop = 1
postype = p1
pos = (BackEdgeDist - 10),-60
pausemovetime = 9999999999999999999999
supermovetime = 9999999999999999999999

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -4.5)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, Sunboy's Auto Recover...]
type = SelfState
triggerall = alive
triggerall = Pos Y < 0
trigger1 = CanRecover
value = 5040

[State 5050, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; Dragon Punch_Y 
[Statedef 730]
type = S
movetype = A
physics = N
anim = 750
poweradd = 70
velset = 0
ctrl = 0
juggle = 5

[State 720, Dust] 
type = Explod
trigger1 = (Time = 0) && (Pos Y >= 0)
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 720, VelSTOP]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 720, Sho-ryuken!]
type = PlaySnd
trigger1 = Time = 1
value = S2,0

[State 720, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = C, SA
damage    = 122,4
animtype  = Back
getpower  = 10
givepower = 8
hitflag = MAF
guardflag = MA
pausetime = 11,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
air.juggle = 2
ground.type = Low
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -15,-17.5
air.velocity = -15,-17.5
ground.cornerpush.veloff = -14
yaccel = Const(movement.yaccel)
p2facing = 1
p2stateno = 725
fall.recovertime = 32
fall = 1
fall.yvelocity = -.2

[State 720, Rise!]
type = ChangeState
trigger1 = AnimTime = 0 && movecontact
value = 731

[State 720, No movecontact?]
type = ChangeState
trigger1 = AnimTime = 0 && !movecontact
value = 732

;---------------------------------------------------------------------------
; Dragon Punch_Y (Rising) [movehit]
[Statedef 731]
type = A
movetype = A
physics = A
ctrl = 0
anim = 751
velset = 5,-8.5
juggle = 5

[State 721, 0]
type = VelAdd
trigger1 = Time != 1
x = -.2

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 722

;---------------------------------------------------------------------------
; Dragon Punch_Y (Rising) [No Movehit]
[Statedef 732]
type = A
movetype = A
physics = A
ctrl = 0
anim = 751
velset = 5,-8.5
juggle = 5

[State 721, 0]
type = VelAdd
trigger1 = Time != 1
x = -.2

[State 721, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = A, SA
damage    = 122,4
animtype  = Back
getpower  = 10
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 7,7
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
air.juggle = 4
ground.type = High
air.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -14,-11
air.velocity = -14,-11
ground.cornerpush.veloff = 0
yaccel = Const(movement.yaccel)
p2facing = 1
p2stateno = 725
fall.recovertime = 32
fall = 1
fall.yvelocity = -.2

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 722

;---------------------------------------------------------------------------
; Dragon Punch_Z 
[Statedef 740]
type = S
movetype = A
physics = N
anim = 750
poweradd = 70
velset = 0
ctrl = 0
juggle = 5

[State 720, Dust] 
type = Explod
trigger1 = (Time = 0) && (Pos Y >= 0)
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 720, VelSTOP]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 720, Sho-ryuken!]
type = PlaySnd
trigger1 = Time = 1
value = S2,0

[State 720, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = C, SA
damage    = 122,4
animtype  = Back
getpower  = 10
givepower = 8
hitflag = MAF
guardflag = MA
pausetime = 11,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
air.juggle = 2
ground.type = Low
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -15,-19.5
air.velocity = -15,-19.5
ground.cornerpush.veloff = -14
yaccel = Const(movement.yaccel)
p2facing = 1
p2stateno = 725
fall.recovertime = 32
fall = 1
fall.yvelocity = -.2

[State 720, Rise!]
type = ChangeState
trigger1 = AnimTime = 0 && movecontact
value = 741

[State 720, No movecontact?]
type = ChangeState
trigger1 = AnimTime = 0 && !movecontact
value = 742

;---------------------------------------------------------------------------
; Dragon Punch_Z (Rising) [movehit]
[Statedef 741]
type = A
movetype = A
physics = A
ctrl = 0
anim = 751
velset = 6,-11
juggle = 5

[State 721, 0]
type = VelAdd
trigger1 = Time != 1
x = -.2

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 722

;---------------------------------------------------------------------------
; Dragon Punch_Z (Rising) [No Movehit]
[Statedef 742]
type = A
movetype = A
physics = A
ctrl = 0
anim = 751
velset = 6,-11
juggle = 5

[State 721, 0]
type = VelAdd
trigger1 = Time != 1
x = -.2

[State 721, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = A, SA
damage    = 122,4
animtype  = Back
getpower  = 10
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 7,7
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
air.juggle = 4
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -14,-11.5
air.velocity = -14,-11.5
ground.cornerpush.veloff = 0
yaccel = Const(movement.yaccel)
p2facing = 1
p2stateno = 725
fall.recovertime = 32
fall = 1
fall.yvelocity = -.2

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 722

;---------------------------------------------------------------------------
; Hurricane Kick A
[Statedef 750]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 781
juggle = 5

[State 750, Up we go.]
type = VelSet
trigger1 = time = 0
x = 4
y = -3.3  

[State 750, Straight]
type = VelSet
trigger1 = time = 9
x = 4
y = 0

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 751, 1]
type = HitDef
triggerall = P2Dist X >= 0
trigger1 = animelem = 4
attr = A, SA
animtype  = High
damage    = 80, 9
guardflag = MA
pausetime = 9,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7,-4.5
air.velocity = -7,-4.5
fall = 1
fall.xvelocity = 0
fall.yvelocity = -.2
fall.recovertime = 45

[State 751, 1]
type = HitDef
triggerall = P2Dist X < 0
trigger1 = animelem = 6
attr = A, SA
animtype  = High
damage    = 80, 9
guardflag = MA
pausetime = 9,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 7,-4.5
air.velocity = 7,-4.5
fall = 1
fall.xvelocity = 0
fall.yvelocity = -.2
fall.recovertime = 45

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 4
value = S6,3

[State 750, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
value = S3,0

[State 1041, 6]
type = Velset
trigger1 = AnimElem = 8
y = 4
x = 2

[State 750, Land!]
type = ChangeState
trigger1 = Time > 9 && Pos Y >= 0
value = 751

;---------------------------------------------------------------------------
; Hurricane Kick (Landing in general)
[Statedef 751]
type = S
movetype = I
physics = S
anim = 670
ctrl = 0
velset = 0,0

[State 723, Landing Dust]
type = Explod
trigger1 = Time = 1
persistent = 0
anim = 733
ID = 733
pos = -65,-3
postype = p1
sprpriority = -1
bindtime = 1

[State 723, Don't Sink!]
type = PosSet
trigger1 = Time = 0
y = 0

[State 723, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Hurricane Kick B
[Statedef 760]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 782
juggle = 5

[State 750, Up we go.]
type = VelSet
trigger1 = time = 0
x = 4
y = -3.3  

[State 750, Straight]
type = VelSet
trigger1 = time = 9
x = 4
y = 0

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 751, 1]
type = HitDef
triggerall = P2Dist X >= 0
trigger1 = animelem = 4
trigger2 = animelem = 8
attr = A, SA
animtype  = High
damage    = 40, 6
guardflag = MA
pausetime = 9,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7,-5.5
air.velocity = -7,-4.5
fall = 1
fall.xvelocity = 0
fall.yvelocity = -.2
fall.recovertime = 45

[State 751, 1]
type = HitDef
triggerall = P2Dist X < 0
trigger1 = animelem = 6
trigger2 = animelem = 10
attr = A, SA
animtype  = High
damage    = 40, 6
guardflag = MA
pausetime = 9,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 7,-5.5
air.velocity = 7,-4.5
fall = 1
fall.xvelocity = 0
fall.yvelocity = -.2
fall.recovertime = 45

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 8
value = S6,3

[State 750, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
value = S3,0

[State 1041, 6]
type = Velset
trigger1 = AnimElem = 12
y = 4
x = 2

[State 750, Land!]
type = ChangeState
trigger1 = Time > 9 && Pos Y >= 0
value = 751

;---------------------------------------------------------------------------
; Hurricane Kick C
[Statedef 770]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 783
juggle = 5

[State 750, Up we go.]
type = VelSet
trigger1 = time = 0
x = 4
y = -3.3  

[State 750, Straight]
type = VelSet
trigger1 = time = 9
x = 4
y = 0

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 751, 1]
type = HitDef
triggerall = P2Dist X >= 0
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
attr = A, SA
animtype  = High
damage    = 27, 3
guardflag = MA
pausetime = 9,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7,-6.5
air.velocity = -7,-6.5
fall = 1
fall.xvelocity = 0
fall.yvelocity = -.2
fall.recovertime = 45

[State 751, 1]
type = HitDef
triggerall = P2Dist X < 0
trigger1 = animelem = 6
trigger2 = animelem = 10
trigger3 = animelem = 14
attr = A, SA
animtype  = High
damage    = 27, 3
guardflag = MA
pausetime = 9,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 7,-6.5
air.velocity = 7,-6.5
fall = 1
fall.xvelocity = 0
fall.yvelocity = -.2
fall.recovertime = 45

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
value = S6,3

[State 750, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
value = S3,0

[State 1041, 6]
type = Velset
trigger1 = AnimElem = 16
y = 4
x = 2

[State 750, Land!]
type = ChangeState
trigger1 = Time > 9 && Pos Y >= 0
value = 751

;---------------------------------------------------------------------------
; Air Hurricane Kick A, B, and C
[Statedef 771]
type = A
movetype = A
physics = A
poweradd = 70
ctrl = 0
anim = 780
juggle = 2

[State 751, Go!]
type = VelAdd
trigger1 = Time = 0
x = IfElse(Vel X >= 0, .75, -.75)
y = -2.5

[State 751, Up if hit!]
type = VelAdd
trigger1 = HitPauseTime = 1
y = -3

[State 751, 1]
type = HitDef
triggerall = P2Dist X >= 0 && !movecontact
trigger1 = animelem = 2
trigger2 = animelem = 6
trigger3 = animelem = 10
attr = A, SA
animtype  = Low
damage    = 80, 9
guardflag = MA
pausetime = 9,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5,1
air.velocity = -5,2
ground.cornerpush.veloff = -11
air.cornerpush.veloff = -13
fall = 1
fall.xvelocity = 0
fall.yvelocity = -.2
fall.recovertime = 45

[State 751, 1]
type = HitDef
triggerall = P2Dist X < 0 && !movecontact
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
attr = S, SA
animtype  = High
damage    = 80, 9
guardflag = MA
pausetime = 9,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 5,1
air.velocity = 5,2
ground.cornerpush.veloff = -11
air.cornerpush.veloff = -13
fall = 1
fall.xvelocity = 0
fall.yvelocity = -.2
fall.recovertime = 45

[State 751, Whoosh!]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 6
trigger3 = animelem = 10
value = S6,3

[State 751, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
value = S3,0

[State 751, Done!]
type = ChangeState
trigger1 = Animtime = 0
value = 51
ctrl = 1

;---------------------------------------------------------------------------
; Shinkuu Hadoken!
[Statedef 780]
type = S
movetype = A
Physics = S
anim = 800
velset = 0,0
ctrl = 0
juggle = 0

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 0

[State 740, Shinkuu...]
type = PlaySnd
trigger1 = Time = 1
value = S8,3

[State 790, Hado-Ken!]
type = PlaySnd
trigger1 = Time = 20
value = S12,7

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 19)
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = Back
scale = 1.08,1.08
pos = 0,0
sprpriority = -5

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 19
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 19
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 19
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 19
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 19
pos = -5,0
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 740, Feedback!] 
type = Explod
trigger1 = AnimElem = 14 
anim = 803
ID = 803
pos = 0,0
postype = p1
sprpriority = 1
bindtime = 1
removetime = -1
shadow = -1,0,0

[State 740, 2]
type = Projectile
triggerall = P2movetype = H && P2statetype != A
trigger1 = Time = 20
projanim = 805
projremoveanim = 805
projpriority = 5
projhits = 1
projmisstime = 0
attr = S, HA
damage    = 0,0
animtype  = Light
hitflag = MAf
guardflag = MA
pausetime = 10,10
sparkno = -1
numhits = 0
ground.type = High
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = 0,0
air.velocity = 0,0
fall = 0

[State 780, Let's spawning!]
type = Helper
trigger1 = AnimElem = 13
helpertype = normal
name = "Shinkuu Hadoken"
ID = 781
pos = 22,0
postype = p1
stateno = 781
sprpriority = 3

[State 740, 2]
type = Projectile
triggerall = Time > 60 && Time < 80
trigger1 = command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c"
projanim = 805
projremoveanim = 805
projpriority = 5
projremovetime = 2
projhits = 1
projmisstime = 0
attr = S, HA
damage    = 5,1
animtype  = Hard
hitflag = MAFP
guardflag = MA
pausetime = 0,0
sparkno = -1
hitsound   = S12,14
guardsound = S1,0
ground.type = Low
air.type = Low
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -1,-2
air.velocity = -1,-2
fall = 1
fall.recover = 0
fall.yvelocity = -.2

[State 780, End]
type = Changestate
trigger1 = Time = 96
value = 782

;---------------------------------------------------------------------------
; Shinkuu Hadohelper!
[Statedef 781]
type = S
movetype = A
Physics = N
anim = 802
velset = 0,0
ctrl = 0
juggle = 0

[State 780, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 781, Bind I tell you (Ground)!]
type = BindToParent
triggerall = parent, stateno = 780 || parent, stateno = 1120
trigger1 = Time = 0
time = -1
pos = 22,0

[State 781, Bind I tell you (Air)!]
type = BindToParent
triggerall = parent, stateno = 783
trigger1 = Time = 0
time = -1
pos = 6,-45

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 3

[State 740, Beam Sound :D]
type = PlaySnd
trigger1 = Time = 0
value = S12,19

[State 751, 1]
type = HitDef
trigger1 = Time = [8,9]
trigger2 = Time = [13,14]
trigger3 = Time = [21,22]
trigger4 = Time = [32,34]
trigger5 = Time = [40,43]
trigger6 = Time = [50,51]
trigger7 = Time = [61,62]
attr = S, HP
animtype  = Hard
damage    = 18,2
getpower = 0,0
hitflag = MAFP
guardflag = MA
pausetime = 0,5
sparkno = S804
sparkxy = 0,ifelse(moveguarded, -60, 0)
hitsound   = S12,14
guardsound = S1,0
ground.type = Low
air.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -8,ifElse(P2BodyDist Y >= 0, -4, 1)
air.velocity = -7,ifElse(P2BodyDist Y >= 0, -4, 1)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
fall.yvelocity = -.2

[State 740, 2]
type = HitDef
triggerall = Time > 20 && Time < 50
trigger1 = command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c"
attr = S, HP
damage    = 5,1
animtype  = Hard
hitflag = MAFP
guardflag = MA
pausetime = 0,0
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = Low
air.type = Low
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -1,ifElse(P2BodyDist Y >= 0, -2, 1)
air.velocity = -1,ifElse(P2BodyDist Y >= 0, -2, 1)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
fall.yvelocity = -.2

[State 751, Bye!]
type = DestroySelf
trigger1 = Animtime = 0
trigger2 = parent, stateno != [780,784] 
trigger2 = parent, stateno != [1120,1121]

;---------------------------------------------------------------------------
; Shinkuu Hadoken (End)!
[Statedef 782]
type = S
movetype = I
Physics = S
anim = 801
velset = 0,0
ctrl = 0

[State 870, Super BG gone!]
type = RemoveExplod
trigger1 = NumprojID(880) = 0
ID = 792

[State 782, To Standing]
type = Changestate
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Air Shinkuu Hadoken!
[Statedef 783]
type = A
movetype = A
Physics = S
anim = 806
ctrl = 0
juggle = 0

[State 780, Pos]
type = PosAdd
trigger1 = Time = 0 && Prevstateno = [750,771]
trigger2 = Time = 0 && Prevstateno = 790
y = 20

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 780, Vel X Tracker]
type = VarSet
trigger1 = Time = 0
var(11) = IfElse(Vel X > 0, 1, 0)

[State 780, VelSet]
type = VelSet
trigger1 = Time = 1
x = 0
y = 0

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 0

[State 740, Shinkuu...]
type = PlaySnd
trigger1 = Time = 1
value = S8,3

[State 790, Hado-Ken!]
type = PlaySnd
trigger1 = Time = 20
value = S12,7

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 13)
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = Back
scale = 1.08,1.08
pos = 0, 0
sprpriority = -5

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 13
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 13
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 13
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 13
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 13
pos = -5,-25
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 740, Feedback!] 
type = Explod
trigger1 = AnimElem = 11 
anim = 808
ID = 803
pos = 0,0
postype = p1
sprpriority = 1
bindtime = 1
removetime = -1
shadow = -1,0,0

[State 780, Let's spawning!]
type = Helper
trigger1 = AnimElem = 9
helpertype = normal
name = "Shinkuu Hadoken"
ID = 781
pos = 6,-45
postype = p1
stateno = 781
sprpriority = 3

[State 740, 2]
type = Projectile
triggerall = Time > 60 && Time < 80
trigger1 = command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c"
projanim = 805
projremoveanim = 805
projremovetime = 2
projpriority = 5
projhits = 1
offset = 6,-45
projmisstime = 0
attr = S, HA
damage    = 5,1
animtype  = Hard
hitflag = MAf
guardflag = MA
pausetime = 0,0
sparkno = -1
hitsound   = S12,14
guardsound = S1,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -1,-2
air.velocity = -1,-2
fall = 1
fall.yvelocity = -.2

[State 780, End]
type = Changestate
trigger1 = Time = 84
value = 784

;---------------------------------------------------------------------------
; Air Shinkuu Hadoken (End)!
[Statedef 784]
type = A
movetype = I
Physics = N
anim = 807
velset = IfElse(Var(11) = 1, .06, -.06),.08
ctrl = 0

[State 782, FALL!]
type = Changestate
trigger1 = Animtime = 0
value = 51
ctrl = 1

;---------------------------------------------------------------------------
; Shinkuu Tatsu Maki Senpuu Kyaku!
[Statedef 790]
type = A
movetype = A
Physics = S
anim = 810
velset = 0,0
ctrl = 0
juggle = 0

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 0

[State 780, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 740, Shinkuu...]
type = PlaySnd
trigger1 = Time = 1
value = S8,3

[State 790, Tatsu Ma..etc]
type = PlaySnd
trigger1 = Time = 27
value = S3,0

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 16)
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
sprpriority = -5
scale = 1.08,1.08

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 16
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 16
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 16
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 16
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 16
pos = -5,0
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 750, Up we go.]
type = VelSet
trigger1 = time = 21
x = 0
y = -4 

[State 750, Straight]
type = VelSet
trigger1 = time = 30
x = 0
y = .05

[State 751, Left Leg Hit]
type = HitDef
trigger1 = animelem = 13
trigger2 = animelem = 17
trigger3 = animelem = 21
trigger4 = animelem = 25
trigger5 = animelem = 29
trigger6 = animelem = 33
trigger7 = animelem = 37
trigger8 = animelem = 41
trigger9 = animelem = 45
attr = S, HA
animtype  = Hard
damage    = 17, 3
guardflag = MA
pausetime = 2,2
getpower = 0,0
p2facing = ifelse(P2Dist X > 0, 1, -1)
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 28
ground.velocity = IfElse(P2Dist X > 0, 5,-5),0
air.velocity = IfElse(P2Dist X > 0,5,-5),0
air.fall = 1
fall.yvelocity = -.2
fall.recovertime = 45
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 751, Right Leg Hit]
type = HitDef
trigger1 = animelem = 15
trigger2 = animelem = 19
trigger3 = animelem = 23
trigger4 = animelem = 27
trigger5 = animelem = 31
trigger6 = animelem = 35
trigger7 = animelem = 39
trigger8 = animelem = 43
attr = S, HA
animtype  = Hard
damage    = 17, 3
getpower = 0,0
guardflag = MA
pausetime = 2,2
sparkno = 3
p2facing = ifelse(P2Dist X > 0, 1, -1)
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 28
ground.velocity = IfElse(P2Dist X > 0, 13, -13),0
air.velocity = IfElse(P2Dist X > 0, 13, -13),-1.5
air.fall = 1
fall.yvelocity = -.2
fall.recovertime = 45
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 751, Ending Hit]
type = HitDef
trigger1 = animelem = 47
attr = S, HA
animtype  = Hard
damage    = 17, 4
getpower = 0,0
guardflag = MA
pausetime = 5,3
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -8,-8
air.velocity = -8,-8
fall = 1
fall.yvelocity = -.2
fall.recovertime = 45
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 13
trigger2 = animelem = 15
trigger3 = animelem = 17
trigger4 = animelem = 19
trigger5 = animelem = 21
trigger6 = animelem = 23
trigger7 = animelem = 25
trigger8 = animelem = 27
trigger9 = animelem = 29
trigger10 = animelem = 31
trigger11 = animelem = 33
trigger12 = animelem = 35
trigger13 = animelem = 37
trigger14 = animelem = 39
trigger15 = animelem = 41
trigger16 = animelem = 43
trigger17 = animelem = 45
trigger18 = animelem = 47
value = S6,3

[State 850, Slashes!]
type = Explod
trigger1 = Time = 30
persistent = 0
anim = 811
ID = 811
pos = 0,29
removetime = -1
postype = p1
sprpriority = 0
bindtime = 2

[State 741, Lizard Snake-like noise]
type = Playsnd
trigger1 = Time = 30
value = S9,5

[State 741, Fall!]
type = VelAdd
trigger1 = Time >= 134 ;After 9 swings
y = .39

[State 741, Bye Slashes!]
type = RemoveExplod
trigger1 = Time = 134 ;After 9 swings
ID = 811

[State 741, Bye Super BG!]
type = RemoveExplod
trigger1 = Time = 134 ;After 9 swings
ID = 792

[State 741, Landing]
type = ChangeState
trigger1 = Time > 120 && Pos Y >= 0
value = 751

;---------------------------------------------------------------------------
; Shin Shoryuken!
[Statedef 800]
type = S
movetype = A
Physics = S
anim = 820
velset = 0,0
ctrl = 0
juggle = 0

[State 740, Imo-da!]
type = PlaySnd
trigger1 = Time = 0
value = S12,13

[State 790, Shin!]
type = PlaySnd
trigger1 = Time = 2
value = S12,10

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 1
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && Time = 1
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = left
pos = 0, 0
sprpriority = -5
scale = 1.08,1.08
ignorehitpause = 1

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 1
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 1
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 1
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 1
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 1
pos = 20,0
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 1500, 5]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage    = 146,4
animtype  = Medium
getpower  = 0
givepower = 100
priority = 8
hitflag = MAf
guardflag = M
pausetime = 30,40
sparkxy = -20,-60
sparkno = 3
hitsound   = S1,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = 0  
air.velocity = 0,0
mindist = 45,-20,0
maxdist = 45,0,0
kill = 0
;PalFX
palfx.time = 60
palfx.add = 10,30,130

[State 1500, 6]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
damage    = 131,4
animtype  = Medium
getpower  = 0
givepower = 100
hitflag = MAF
guardflag = M
pausetime = 25,40
sparkxy = -15,-80
sparkno = 3
snap = 30,0
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 40
air.hittime = 40
ground.velocity = -0.5
air.velocity = -0.5
mindist = 40,-20,0
;maxdist = 40,0,0
kill = 0
;PalFX
palfx.time = 70
palfx.add = 10,30,130

[State 803, 1]
type = HitDef
trigger1 = AnimElem = 7
attr = A, HA
damage    = 32,4
animtype  = Back
getpower  = 0
givepower = 100
guardflag = MF
pausetime = 6,10
sparkxy = 0,-80
sparkno = 3
snap = 30,-30
hitsound   = S1,3
guardsound = S1,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1,-3
air.velocity = -1,-3
yaccel = .5
guard.velocity = -7
fall = 1
fall.recover = 0
fall.yvelocity = -.2
palfx.time = 70
palfx.add = 10,30,130
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 800, Electric Sparks!]
type = Explod
trigger1 = Movehit && NumExplod(824) = 0
anim = 824
ID = 824
bindtime = 600
removetime = 150
postype = p2
pos = 0,-30
sprpriority = 5
ignorehitpause = 1

[State 720, Rise! (Movehit)]
type = ChangeState
trigger1 = AnimTime = 0 
value = 803

[State 720, Rise! (Miss)]
type = ChangeState
trigger1 = !Movehit && Time > 6
value = 801

;---------------------------------------------------------------------------
; Shin Shoryuken (You Missed!)
[Statedef 801]
type = S
movetype = A
Physics = S
anim = 825
velset = 0,0
ctrl = 0
juggle = 0

[State 720, Rise!]
type = ChangeState
trigger1 = AnimTime = 0 
value = 802

;---------------------------------------------------------------------------
; Shin Shoryuken (Miss) (Rising)
[Statedef 802]
type = A
movetype = A
physics = A
ctrl = 0
anim = 751
velset = 1,-12.5

[State 1505, 4]
type = PosAdd
trigger1 = Time = 0
x = 15

[State 1505, 5]
type = VelMul
trigger1 = Time >= 0
x = .93

[State 720, Sho-ryuken!]
type = PlaySnd
trigger1 = Time = 0
value = S2,0

[State 1505, 1]
type = PlayerPush
trigger1 = Time >= 0
trigger1 = Vel Y < 1
value = 0

[State 721, 1]
type = HitDef
trigger1 = Time = 0
trigger2 = Movehit && HitCount < 8
attr = A, HA
damage    = 20,7
animtype  = Back
getpower  = 0
givepower = 10
hitflag = MAf
priority  = 6, Hit
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
air.juggle = 4
ground.type = HitG_UP
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1.4     
air.velocity = -1.4,-8.5
guard.velocity = -7
fall = 0 
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 722

;---------------------------------------------------------------------------
; Shin Shoryuken (Movehit) (Rising)
[Statedef 803]
type = A
movetype = A
physics = A
ctrl = 0
anim = 821
velset = 1,-14.5

[State 803, Forward a Bit]
type = PosAdd
trigger1 = Time = 0
x = 5

[State 803, VelMul]
type = VelMul
trigger1 = Time >= 0
x = .93

[State 720, Sho-ryuken!]
type = PlaySnd
trigger1 = Time = 0
value = S2,0

[State 803, 1]
type = HitDef
trigger1 = AnimElem = 1,2
attr = A, HA
damage    = 32,4
animtype  = Back
getpower  = 0
givepower = 100
guardflag = MF
pausetime = 25,25
sparkxy = -15,-59
sparkno = 3
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -15,-17
air.velocity = -15,-17
yaccel = Const(movement.yaccel)
guard.velocity = -7
fall = 1
fall.recover = 0
fall.yvelocity = -.2
palfx.time = 70
palfx.add = 10,30,130
envshake.time = 30
envshake.freq = 110
envshake.ampl = -5
envshake.phase = -2
fall.yvelocity = -.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 804

;---------------------------------------------------------------------------
; Shin Shoryuken (Movehit) (Falling)
[Statedef 804]
type = A
movetype = I
physics = N
anim = 822
ctrl = 0
velset = 0

[State 722, Gravity]
type = VelAdd
trigger1 = Time != 1000
y = .39

[State 722, Land now!]
type = ChangeState
trigger1 = pos y >= 0
value = 805

;---------------------------------------------------------------------------
; Shin Shoryuken (Movehit) (Landing)
[Statedef 805]
type = S
movetype = I
physics = S
anim = 823
ctrl = 0
velset = 0,0

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S12,0

[State 723, Landing Dust]
type = Explod
trigger1 = Time = 1
persistent = 0
anim = 733
ID = 733
pos = -65,-3
postype = p1
sprpriority = -1
bindtime = 1

[State 723, Don't Sink!]
type = PosSet
trigger1 = Time = 0
y = 0

[State 723, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Universal Off-screen bounce on-screen code!
[Statedef 810] 
type = S
movetype = I
physics = S
anim = 0
ctrl = 0
velset = 0,0

[State 3003, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 731, Screen Bound OFF]
type = Screenbound
trigger1 = 1
value = 0

[State 3003, 2]
type = PosAdd
triggerall = Time < 20
trigger1 = BackEdgeDist < -50
x = -80 - BackEdgeDist

[State 742, Dash Onscreen!]
type = ChangeAnim
trigger1 = Time = 20
value = IfElse(Palno <= 6, 100, 1001)

[state 101, SprPriority]
type = sprpriority
trigger1 = 1
value = 1

[State 105, Dashy Lines!]
type = explod
triggerall = palno <= 6
trigger1 = time = 20
anim = 734
postype = p1
pos = 0,0
bindtime = 1
sprpriority = 2
ownpal = 1

[State 101, VelSet]
type = Velset
triggerall = palno <= 6
trigger1 = Time = [28,45] 
x = 8.5

[State 100, Friction]
type = VelMul
triggerall = palno <= 6
trigger1 = Time > 33
x = .80

[State 100, Ending Friction]
type = VelSet
triggerall = palno <= 6
trigger1 = Time = 50
x = 1

[State 100, 2]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 20
value = 0,4

[State 700, Eeeeeeevil!]
type = PlaySnd
triggerall = palno > 6
trigger1 = Time = 20
value = S16,9

[State 100, To Standing?!]
type = ChangeState
triggerall = palno <= 6
trigger1 = Anim = 100 && AnimTime = 0
value = 0
ctrl = 1

[State 100, Dust!]
type = MakeDust
triggerall = palno <= 6
trigger1 = Time = [20,21]
pos = 0,0
pos2 = 0,0

[State 100, Dust! 2]
type = MakeDust
triggerall = palno <= 6
trigger1 = Time = [53,56]
pos = 0,0
pos2 = 0,0

[State 100, Dashy Lines!]
type = explod
triggerall = palno <= 6
trigger1 = time = 33
anim = 734
postype = p1
pos = 0,0
bindtime = 1
sprpriority = 2
ownpal = 1

[State 100, Skirting Across the Ground]
type = PlaySnd
triggerall = palno <= 6
trigger1 = Time = 43
value = S12,3

[State 1041, That Warping Noise]
type = PlaySnd
triggerall = Palno > 6
trigger1 = Time = 20
value = S16,1

[State 1040, Afterimages]
type = AfterImage
triggerall = Palno > 6
trigger1 = time = 20
time = 999
TimeGap = 1
FrameGap = 4
length = 15
PalBright = 0,0,0
PalContrast = 120,120,220
PalMul = 1,1,1
trans = add1

[State 192, Gogogo!]
type = VelSet
triggerall = Palno > 6
trigger1 = Time = 20
x = 10
y = 0

[State 192, Teleport Friction]
type = VelAdd
triggerall = Palno > 6
trigger1 = Time >= 20 && Anim != 970
x = .93

[State 191, Teleport End 2]
type = VelSet
triggerall = Palno > 6
trigger1 = Time = 40
x = 0
y = 0

[State 191, Landing and Taunt Animation]
type = ChangeAnim
triggerall = Palno > 6
trigger1 = Time = 40
value = 970
persistent = 0

[State 1042, Afterimages...GO AWAY!]
type = AfterImageTime
triggerall = Palno > 6
trigger1 = Time = 40
time = 0

[State 990, Hm!]
type = Playsnd
triggerall = Palno > 6
triggerall = Anim = 970
trigger1 = AnimElem = 4
persistent = 0
value = 16,9

[State 990, Smash!]
type = Playsnd
triggerall = Palno > 6
triggerall = Anim = 970
trigger1 = AnimElem = 5
persistent = 0
value = 16,2

[State 990, Shake!]
type = EnvShake
triggerall = Palno > 6
triggerall = Anim = 970
Trigger1 = AnimElem = 5,-1
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 10

[State 191, To Standing]
type = ChangeState
triggerall = Palno > 6
trigger1 = Time = 40;(Anim = 970) && (AnimTime = 0)
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Denjin Hadoken!
[Statedef 820]
type = S
movetype = I
Physics = S
anim = 832
velset = 0,0
ctrl = 0
juggle = 0

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 0

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
length = 15
PalBright = 0,0,20
PalContrast = 30,30,110
PalMul = 1,1,1
trans = add1

[State 740, Ryu's mad now!]
type = PlaySnd
trigger1 = Time = 6
value = S8,4

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 7
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 7
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 7
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 7
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 7
pos = -5,0
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 821, Empty]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 821, Nowhere near full]
type = VarSet
trigger1 = Time = 32
var(14) = 1

[State 821, Kinda Half]
type = VarSet
trigger1 = Time = 64
var(14) = 2

[State 821, Almost Full]
type = VarSet
trigger1 = Time = 96
var(14) = 3

[State 821, Full Charge]
type = VarSet
trigger1 = Time = 128
var(14) = 4

[State 820, Ding!]
type = PlaySnd
trigger1 = Time = 128
value = 14,1

[State 820, Yellow Flash (For Level Signal)]
type = PalFX
trigger1 = Time = 41
trigger2 = Time = 84
trigger3 = Time = 126
time = 2
add = 232,72,0
mul = 300,192,192
sinadd = 32,5,5,8

[State 820, Yellow Flash!]
type = PalFX
trigger1 = time = 128
time = 20
add = 232,72,0
mul = 300,192,192
sinadd = 32,5,5,8

[State 820, Go!]
type = ChangeState
trigger1 = (command != "hold_x") && (command != "hold_y") && (command != "hold_z")
trigger1 = Time > 32
trigger2 = Time > 160
value = IfElse(Var(9) = 1, 880, 821)
ctrl = 0

;---------------------------------------------------------------------------
; Denjin Hadoken (Go!)
[Statedef 821]
type = S
movetype = A
Physics = S
anim = 833
velset = 0,0
ctrl = 0
juggle = 0

[State 820, Denjin!]
type = PlaySnd
trigger1 = Time = 0
value = 12,16

[State 820, Hadooooken!]
type = PlaySnd
trigger1 = AnimElem = 6
value = 12,17

[State 820, Fireball Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 6
value = 12,4

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 0)
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
sprpriority = -5
scale = 1.08,1.08

[State 700, The Dust Trail!]
type = Helper
trigger1 = AnimElem = 6, 1
helpertype = Normal
name = "DustTrail"
postype = p1
pos = 60,10
stateno = 706
ownpal = 1
persistent = 0

[State 184, 2]
type = Projectile
trigger1 = AnimElem = 6 && Var(14) = 1
projanim = 830
projid = 830
projhits = 4
projmisstime = 0
projshadow = -1
projpriority = 30
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 6
offset = 60,8
attr = S, HP
damage   = 25,50
animtype = heavy
getpower = 0,0
guardflag = MA
hitflag = MAFP
pausetime = 2,18
hitsound = S12,14
guardsound = S1,0
sparkno = 3
sparkxy = 0,-60
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10
fall = 0
air.animtype = Back
air.velocity = -10,-6
air.juggle = 3
air.fall = 1
down.velocity = -10
down.hittime = 30
down.bounce = 0
palfx.time = 23
palfx.add = 10,30,130

[State 184, 2]
type = Projectile
trigger1 = AnimElem = 6 && Var(14) = 2
projanim = 830
projid = 830
projhits = 6
projmisstime = 0
projshadow = -1
projpriority = 30
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 6
offset = 60,8
attr = S, HP
damage   = 26,45
animtype = heavy
getpower = 0,0
guardflag = MA
hitflag = MAFP
pausetime = 2,18
hitsound = S12,14
guardsound = S1,0
sparkno = 3
sparkxy = 0,-60
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10
fall = 0
air.animtype = Back
air.velocity = -10,-6
air.juggle = 3
air.fall = 1
down.velocity = -10
down.hittime = 30
down.bounce = 0
palfx.time = 23
palfx.add = 10,30,130

[State 184, 2]
type = Projectile
trigger1 = AnimElem = 6 && Var(14) = 3
projanim = 830
projid = 830
projhits = 8
projmisstime = 0
projshadow = -1
projpriority = 30
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 6
offset = 60,8
attr = S, HP
damage   = 23,40
animtype = heavy
getpower = 0,0
guardflag = MA
hitflag = MAFP
pausetime = 2,18
hitsound = S12,14
guardsound = S1,0
sparkno = 3
sparkxy = 0,-60
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10
fall = 0
air.animtype = Back
air.velocity = -10,-6
air.juggle = 3
air.fall = 1
down.velocity = -10
down.hittime = 30
down.bounce = 0
palfx.time = 23
palfx.add = 10,30,130

[State 184, 2]
type = Projectile
trigger1 = AnimElem = 6 && Var(14) = 4
projanim = 830
projid = 830
projhits = 10
projmisstime = 0
projshadow = -1
projpriority = 30
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 6
offset = 60,8
attr = S, HP
damage   = 21,40
animtype = heavy
getpower = 0,0
guardflag = MA
hitflag = MAFP
pausetime = 2,18
hitsound = S12,14
guardsound = S1,0
sparkno = 3
sparkxy = 0,-60
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10
fall = 0
air.animtype = Back
air.velocity = -10,-6
air.juggle = 3
air.fall = 1
down.velocity = -10
down.hittime = 30
down.bounce = 0
palfx.time = 23
palfx.add = 10,30,130

[State 800, Electric Sparks!]
type = Explod
trigger1 = ProjContact(830) = 1 && NumExplod(824) = 0
anim = 824
ID = 824
bindtime = 40
removetime = 40
postype = p2
pos = 0,-30
sprpriority = 5
ignorehitpause = 1

[State 820, The End]
type = ChangeState
trigger1 = Time = 60
value = 782
ctrl = 0

;---------------------------------------------------------------------------
; Burst Mode Change!
[Statedef 830]
type = S
movetype = I
Physics = S
anim = 840
velset = 0,0
ctrl = 0
juggle = 0

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 0

[State 740, Ryu's mad now!]
type = PlaySnd
trigger1 = Time = 0
value = S8,4

[State 790, Super Pause BG]
type = Explod
trigger1 = AnimElem = 6
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = AnimElem = 6
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = AnimElem = 6
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = AnimElem = 6
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = AnimElem = 6
pos = 10,-120
anim = S735
sprpriority = -5
time = 34
sound = S9,0

[State 820, Var Change]
type = VarSet
trigger1 = Time = 0
var(9) = IfElse(Var(9) = 0, 1, 0)

[State 820, The End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Burst Mode Hurricane Kick A (Right Leg)
[Statedef 840]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 870
juggle = 2

[State 701, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 750, Up we go.]
type = VelSet
trigger1 = time = 0
x = 4
y = -3

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 5
value = S6,3

[State 750, Yah!]
type = Playsnd
trigger1 = time = 1
value = S0,5

[State 750, Pause]
type = VelSet
trigger1 = AnimElem = 6
x = 0
y = 0

[State 751, 1]
type = HitDef
trigger1 = animelem = 6
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-6.5
air.velocity = -3,-6.5
fall = 1
fall.recovertime = 45
fall.xvelocity = 0
fall.yvelocity = -.2

[State 750, Down we go.]
type = VelSet
trigger1 = AnimElem = 7
x = 4
y = 0

[State 750, Move On]
type = StatetypeSet
trigger1 = Time = 21
physics = A

[State 750, Next Attack]
type = ChangeState
trigger1 = Time > 17 && command = "hkick_a"
value = 841
ignorehitpause = 1

;---------------------------------------------------------------------------
; Burst Mode Hurricane Kick A (Left Leg)
[Statedef 841]
type = A
movetype = A
physics = N
poweradd = 0
ctrl = 0
anim = 871
velset = 3,-4
juggle = 2

[State 750, Pause]
type = VelSet
trigger1 = AnimElem = 3
x = 0
y = 0

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 2
value = S6,3

[State 750, Yah!]
type = Playsnd
trigger1 = time = 1
value = S0,5

[State 750, Down we go.]
type = VelSet
trigger1 = AnimElem = 4
x = 4
y = 0

[State 751, 1]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-6.5
air.velocity = -3,-6.5
fall = 1
fall.recovertime = 45
fall.xvelocity = 0
fall.yvelocity = -.2

[State 750, Move On]
type = StatetypeSet
trigger1 = Time = 16
physics = A

[State 750, Next Attack]
type = ChangeState
trigger1 = Time > 10 && command = "hkick_a"
value = 842
ignorehitpause = 1

;---------------------------------------------------------------------------
; Burst Mode Hurricane Kick A (Sweep)
[Statedef 842]
type = A
movetype = A
physics = N
poweradd = 0
ctrl = 0
anim = 872
velset = 4,-6
juggle = 2

[State 750, Pause]
type = VelSet
trigger1 = AnimElem = 4
x = 0
y = 0

[State 750, Down we go.]
type = VelSet
trigger1 = Time = 11
x = 4
y = 0

[State 751, 1]
type = HitDef
trigger1 = animelem = 4
attr = S, SA
animtype  = High
damage    = 40, 3
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 25
ground.velocity = -3,-4.5
air.velocity = -3,-4.5
fall = 1
fall.recovertime = 45
fall.xvelocity = 0
fall.yvelocity = -.2

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 4
value = S6,3

[State 750, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
value = S3,0

[State 750, Move On]
type = StatetypeSet
trigger1 = Time = 11
physics = A

;---------------------------------------------------------------------------
; Burst Mode Hurricane Kick B (Right Leg)
[Statedef 850]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 870
juggle = 2

[State 701, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 750, Up we go.]
type = VelSet
trigger1 = time = 0
x = 4
y = -3

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 5
value = S6,3

[State 750, Yah!]
type = Playsnd
trigger1 = time = 1
value = S0,5

[State 750, Pause]
type = VelSet
trigger1 = AnimElem = 6
x = 0
y = 0

[State 751, 1]
type = HitDef
trigger1 = animelem = 6
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 25
ground.velocity = -5
air.velocity = -3,-6.5
fall.yvelocity = -.2

[State 750, Down we go.]
type = VelSet
trigger1 = AnimElem = 7
x = 4
y = 0

[State 750, Move On]
type = StatetypeSet
trigger1 = Time = 21
physics = A

[State 750, Next Attack]
type = ChangeState
trigger1 = Time > 17 && command = "hkick_b"
value = 851
ignorehitpause = 1

;---------------------------------------------------------------------------
; Burst Mode Hurricane Kick B (Left Leg)
[Statedef 851]
type = A
movetype = A
physics = N
poweradd = 0
ctrl = 0
anim = 871
velset = 3,-2.5
juggle = 2

[State 750, Pause]
type = VelSet
trigger1 = AnimElem = 3
x = 0
y = 0

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 2
value = S6,3

[State 750, Yah!]
type = Playsnd
trigger1 = time = 1
value = S0,5

[State 750, Down we go.]
type = VelSet
trigger1 = AnimElem = 4
x = 4
y = 0

[State 751, 1]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -5
air.velocity = -3,-6.5
fall.yvelocity = -.2

[State 750, Move On]
type = StatetypeSet
trigger1 = Time = 16
physics = A

[State 750, Next Attack]
type = ChangeState
trigger1 = Time > 10 && command = "hkick_b"
value = 852
ignorehitpause = 1

;---------------------------------------------------------------------------
; Burst Mode Hurricane Kick B (Sweep)
[Statedef 852]
type = A
movetype = A
physics = N
poweradd = 0
ctrl = 0
anim = 872
velset = 4,-3.5
juggle = 2

[State 750, Pause]
type = VelSet
trigger1 = AnimElem = 4
x = 0
y = 0

[State 750, Down we go.]
type = VelSet
trigger1 = Time = 11
x = 4
y = 0

[State 751, 1]
type = HitDef
trigger1 = animelem = 4
attr = S, SA
animtype  = High
damage    = 40, 3
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-4.5
air.velocity = -3,-4.5
fall = 1
fall.recovertime = 45
fall.xvelocity = 0
fall.yvelocity = -.2

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 4
value = S6,3

[State 750, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
value = S3,0

[State 750, Move On]
type = StatetypeSet
trigger1 = Time = 11
physics = A

;---------------------------------------------------------------------------
; Burst Mode Hurricane Kick C (Right Leg)
[Statedef 860]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 870
juggle = 2

[State 750, Up we go.]
type = VelSet
trigger1 = time = 0
x = 4
y = -3

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 5
value = S6,3

[State 701, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 750, Yah!]
type = Playsnd
trigger1 = time = 1
value = S0,5

[State 750, Pause]
type = VelSet
trigger1 = AnimElem = 6
x = 0
y = 0

[State 751, 1]
type = HitDef
trigger1 = animelem = 6
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 25
ground.velocity = -4
air.velocity = -3,-6.5
fall.yvelocity = -.2

[State 750, Down we go.]
type = VelSet
trigger1 = AnimElem = 7
x = 4
y = 0

[State 750, Move On]
type = StatetypeSet
trigger1 = Time = 21
physics = A

[State 750, Next Attack]
type = ChangeState
trigger1 = Time > 17 && command = "hkick_c"
value = 861
ignorehitpause = 1

;---------------------------------------------------------------------------
; Burst Mode Hurricane Kick C (Left Leg)
[Statedef 861]
type = A
movetype = A
physics = N
poweradd = 0
ctrl = 0
anim = 871
velset = 4,-.5
juggle = 2

[State 750, Pause]
type = VelSet
trigger1 = AnimElem = 3
x = 0
y = 0

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 2
value = S6,3

[State 750, Yah!]
type = Playsnd
trigger1 = time = 1
value = S0,5

[State 750, Down we go.]
type = VelSet
trigger1 = AnimElem = 4
x = 4
y = 0

[State 751, 1]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -5
air.velocity = -3,-6.5
fall.yvelocity = -.2

[State 750, Move On]
type = StatetypeSet
trigger1 = Time = 16
physics = A

[State 750, Next Attack]
type = ChangeState
trigger1 = Time > 10 && command = "hkick_c"
value = 862
ignorehitpause = 1

;---------------------------------------------------------------------------
; Burst Mode Hurricane Kick C (Sweep)
[Statedef 862]
type = A
movetype = A
physics = N
poweradd = 0
ctrl = 0
anim = 872
velset = 4,-.5
juggle = 2

[State 750, Pause]
type = VelSet
trigger1 = AnimElem = 4
x = 0
y = 0

[State 750, Down we go.]
type = VelSet
trigger1 = Time = 11
x = 4
y = 0

[State 751, 1]
type = HitDef
trigger1 = animelem = 4
attr = S, SA
animtype  = High
damage    = 40, 3
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-4.5
air.velocity = -3,-4.5
fall = 1
fall.recovertime = 45
fall.xvelocity = 0
fall.yvelocity = -.2

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 4
value = S6,3

[State 750, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
value = S3,0

[State 750, Move On]
type = StatetypeSet
trigger1 = Time = 11
physics = A

;---------------------------------------------------------------------------
; Burst Mode Shinkuu Hadoken!
[Statedef 870]
type = S
movetype = A
Physics = S
anim = 881
velset = 0,0
ctrl = 0
juggle = 0

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 0

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 740, Shinkuu...]
type = PlaySnd
trigger1 = Time = 1
value = S8,3

[State 790, Hado-Ken!]
type = PlaySnd
trigger1 = Time = 15
value = S12,7

[State 701, WHOOSH!]
type = PlaySnd
trigger1 = AnimElem = 7
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
trigger1 = AnimElem = 7
value = S12,4

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 7)
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
scale = 1.08,1.08
sprpriority = -5

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 7
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 7
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 7
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 7
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 7
pos = -5,0
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 184, 2]
type = Projectile
trigger1 = AnimElem = 7
projanim = 880
projid = 880
projhits = 5
projmisstime = 0
projshadow = -1
projpriority = 30
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 6
offset = 60,8
attr = S, HP
damage   = 60,10
animtype = heavy
getpower = 0,0
guardflag = MA
hitflag = MAFP
pausetime = 2,18
hitsound = S12,14
guardsound = S1,0
sparkno = 3
sparkxy = 0,-60
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10
fall = IfElse(P2BodyDist X < 75, 1, 0)
fall.recovertime = 35
fall.yvelocity = -.2
air.animtype = Back
air.velocity = -10,-6
air.juggle = 3
air.fall = 1
down.velocity = -10
down.hittime = 30
down.bounce = 0
palfx.time = 23
palfx.add = 10,30,130

[State 700, The Dust Trail!]
type = Helper
trigger1 = AnimElem = 7, 1
helpertype = Normal
name = "DustTrail"
postype = p1
pos = 50,10
stateno = 706
ownpal = 1
persistent = 0

[State 740, Feedback!] 
type = Explod
trigger1 = AnimElem = 7
anim = 803
ID = 803
pos = 0,0
postype = p1
sprpriority = 1
bindtime = 1
removetime = -2
shadow = -1,0,0

[State 870, Super BG gone!]
type = RemoveExplod
triggerall = Time > 25
trigger1 = NumprojID(880) = 0
ID = 792

[State 820, The End]
type = ChangeState
trigger1 = Time = 45
value = 782
ctrl = 0

;---------------------------------------------------------------------------
; Burst Mode Air Shinkuu Hadoken!
[Statedef 871]
type = A
movetype = A
Physics = S
anim = 882
ctrl = 0
juggle = 0

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 780, Pos]
type = PosAdd
trigger1 = Time = 0 && Prevstateno = [840,862]
trigger2 = Time = 0 && Prevstateno = 790
trigger3 = Time = 0 && Prevstateno = [910,911]
y = 20

[State 780, Vel X Tracker]
type = VarSet
trigger1 = Time = 0
var(11) = IfElse(Vel X > 0, 1, 0)

[State 780, VelSet]
type = VelSet
trigger1 = Time = 1
x = 0
y = 0

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 0

[State 740, Shinkuu...]
type = PlaySnd
trigger1 = Time = 1
value = S8,3

[State 790, Hado-Ken!]
type = PlaySnd
trigger1 = Time = 15
value = S12,7

[State 701, WHOOSH!]
type = PlaySnd
trigger1 = AnimElem = 7
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
trigger1 = AnimElem = 7
value = S12,4

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 7)
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
sprpriority = -5
scale = 1.08,1.08

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 7
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 7
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 7
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 7
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 7
pos = -5,-25
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 740, Feedback!] 
type = Explod
trigger1 = AnimElem = 7 
anim = 808
ID = 803
pos = 0,0
postype = p1
sprpriority = 1
bindtime = 1
removetime = -2
shadow = -1,0,0

[State 184, 2]
type = Projectile
trigger1 = AnimElem = 7
projanim = 880
projid = 880
projhits = 5
projmisstime = 0
projshadow = -1
projpriority = 30
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 6
offset = 50,-40
attr = S, HP
damage   = 60,10
animtype = heavy
getpower = 0,0
guardflag = MA
hitflag = MAFP
pausetime = 2,18
hitsound = S12,14
guardsound = S1,0
sparkno = 3
sparkxy = 0,-60
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10
fall = IfElse(P2BodyDist X < 75, 1, 0)
fall.recover = 0
fall.yvelocity = -.2
air.animtype = Back
air.velocity = -10,-6
air.juggle = 3
air.fall = 1
down.velocity = -10
down.hittime = 30
down.bounce = 0
palfx.time = 23
palfx.add = 10,30,130

[State 870, Super BG gone!]
type = RemoveExplod
triggerall = Time > 25
trigger1 = NumprojID(880) = 0
ID = 792

[State 870, Aerial Rave!]
type = VarSet
trigger1 = projhit880 = 1 && prevstateno = [600,641]
trigger2 = projhit880 = 1 && prevstateno = 910
var(12) = 1

[State 820, The End]
type = ChangeState
trigger1 = Time = 45
value = 872
ctrl = 0

;---------------------------------------------------------------------------
; Burst Mode Air Shinkuu Hadoken (End)!
[Statedef 872]
type = A
movetype = I
Physics = N
anim = 807
velset = IfElse(Var(11) = 1, .06, -.06),.08
ctrl = 0

[State 870, Super BG gone!]
type = RemoveExplod
trigger1 = NumprojID(880) = 0
ID = 792

[State 782, FALL!]
type = Changestate
trigger1 = Animtime = 0
value = 51
ctrl = 1

;---------------------------------------------------------------------------
; Burst Mode Denjin Hadoken (Go!)
[Statedef 880]
type = S
movetype = A
Physics = S
anim = 833
velset = 0,0
ctrl = 0
juggle = 0

[State 820, Denjin!]
type = PlaySnd
trigger1 = Time = 0
value = 12,16

[State 820, Hadooooken!]
type = PlaySnd
trigger1 = AnimElem = 6
value = 12,17

[State 820, No blocking for you!]
type = Assertspecial
trigger1 = 1
flag = unguardable

[State 820, Fireball Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 6
value = 12,4

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 0)
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
sprpriority = -5
scale = 1.08,1.08

[State 700, The Dust Trail!]
type = Helper
trigger1 = AnimElem = 6, 1
helpertype = Normal
name = "DustTrail"
postype = p1
pos = 60,10
stateno = 706
ownpal = 1
persistent = 0

[State 184, 2]
type = Projectile
trigger1 = AnimElem = 6 && Var(14) = 1
projanim = 830
projid = 830
projhits = 4
projmisstime = 0
projshadow = -1
projpriority = 30
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 6
offset = 60,8
attr = S, HP
damage   = 25
animtype = heavy
getpower = 0,0
guardflag = MA
hitflag = MAFP
pausetime = 2,18
hitsound = S12,14
guardsound = S1,0
sparkno = 3
sparkxy = 0,-60
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10
fall = 0
air.animtype = Back
air.velocity = -10,-6
air.juggle = 3
air.fall = 1
down.velocity = -10
down.hittime = 30
down.bounce = 0
palfx.time = 23
palfx.add = 10,30,130

[State 184, 2]
type = Projectile
trigger1 = AnimElem = 6 && Var(14) = 2
projanim = 830
projid = 830
projhits = 6
projmisstime = 0
projshadow = -1
projpriority = 30
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 6
offset = 60,8
attr = S, HP
damage   = 26
animtype = heavy
getpower = 0,0
guardflag = MA
hitflag = MAFP
pausetime = 2,18
hitsound = S12,14
guardsound = S1,0
sparkno = 3
sparkxy = 0,-60
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10
fall = 0
air.animtype = Back
air.velocity = -10,-6
air.juggle = 3
air.fall = 1
fall.yvelocity = -.2
down.velocity = -10
down.hittime = 30
down.bounce = 0
palfx.time = 23
palfx.add = 10,30,130

[State 184, 2]
type = Projectile
trigger1 = AnimElem = 6 && Var(14) = 3
projanim = 830
projid = 830
projhits = 8
projmisstime = 0
projshadow = -1
projpriority = 30
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 6
offset = 60,8
attr = S, HP
damage   = 23
animtype = heavy
getpower = 0,0
guardflag = MA
hitflag = MAFP
pausetime = 2,18
hitsound = S12,14
guardsound = S1,0
sparkno = 3
sparkxy = 0,-60
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10
fall = 0
air.animtype = Back
air.velocity = -10,-6
air.juggle = 3
air.fall = 1
fall.yvelocity = -.2
down.velocity = -10
down.hittime = 30
down.bounce = 0
palfx.time = 23
palfx.add = 10,30,130

[State 184, 2]
type = Projectile
trigger1 = AnimElem = 6 && Var(14) = 4
projanim = 830
projid = 830
projhits = 10
projmisstime = 0
projshadow = -1
projpriority = 30
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 6
offset = 60,8
attr = S, HP
damage   = 21
animtype = heavy
getpower = 0,0
guardflag = MA
hitflag = MAFP
pausetime = 2,18
hitsound = S12,14
guardsound = S1,0
sparkno = 3
sparkxy = 0,-60
p2stateno = 881
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -10
fall = 0
air.animtype = Back
air.velocity = -10,-6
air.juggle = 3
air.fall = 1
down.velocity = -10
down.hittime = 30
down.bounce = 0
palfx.time = 23
palfx.add = 10,30,130

[State 800, Electric Sparks!]
type = Explod
trigger1 = ProjContact(830) = 1 && NumExplod(824) = 0
anim = 824
ID = 824
bindtime = 40
removetime = 40
postype = p2
pos = 0,-30
sprpriority = 5
ignorehitpause = 1

[State 820, The End]
type = ChangeState
trigger1 = Time = 60
value = 782
ctrl = 0

;---------------------------------------------------------------------------
; Denjin Hadoken P2 HITA_SHAKE
[Statedef 881]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 882

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; P2 is falling!
[Statedef 882]
type = A
movetype = H
physics = N
velset = -4,-4
sprpriority = 1

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
triggerall = P1name != "Ken-X" && P1Name != "Ryu-X"
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 2] ;Coming down anim for Ken-X
type = ChangeAnim
triggerall = (P1Name = "Ken-X") || (P1Name = "Ryu-X")
trigger1 = Vel Y > .5
value = 5061 
persistent = 0

[State 5050, Gravity]
type = VelAdd
trigger1 = 1
y = .39

[State 663, Hitting the Ground]
type = ChangeState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 883 

;---------------------------------------------------------------------------
; Denjin Hadoken HIT_BOUNCE (hit ground)
[Statedef 883]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
value = 884 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
;value = 61
;pos = 0, 0
;under = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; Denjin HIT_LIEDOWN
[Statedef 884]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 884, Get up now!]
type = Changestate
trigger1 = Time = 20
value = 885

;---------------------------------------------------------------------------
; Denjin HIT_GETUP
[Statedef 885]
type    = L
movetype= I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 900

;---------------------------------------------------------------------------
; Denjin Dizzy!
[Statedef 900]
type = S
physics = S
movetype = I
ctrl = 0
anim = ifelse(SelfAnimexist(5300), 5300, 0)

[State 900, Custom Dizzy for those without Dizzy]
type = Changeanim2
trigger1 = Time = 0 && Anim = 0
value = 5301

[State 9000, Button Jam]
type = ChangeState
triggerall = Random <= 500
trigger1 = (command = "a") || (command = "b") || (command = "c") 
trigger2 = (command = "x") || (command = "y") || (command = "z")
value = 901

[State 9000, Next]
type = ChangeState
trigger1 = Time = 30
value = 901

;-------------- Next Part
[Statedef 901]
type = S
physics = S
movetype = I
ctrl = 0

[State 9001, Flash]
type = PalFX
trigger1 = Time = 0
time = 2
add = 50,50,50
mul = 300,300,300

[State 9001, Button Jam]
type = ChangeState
triggerall = Random <= 500
trigger1 = (command = "a") || (command = "b") || (command = "c") 
trigger2 = (command = "x") || (command = "y") || (command = "z")
value = 902

[State 9001, Next]
type = ChangeState
trigger1 = Time = 30
value = 902

;-------------- Next Part
[Statedef 902]
type = S
physics = S
movetype = I
ctrl = 0

[State 9002, Flash]
type = PalFX
trigger1 = Time = 0
time = 2
add = 50,50,50
mul = 300,300,300

[State 9002, Button Jam]
type = ChangeState
triggerall = Random <= 500
trigger1 = (command = "a") || (command = "b") || (command = "c") 
trigger2 = (command = "x") || (command = "y") || (command = "z")
value = 903

[State 9002, Next]
type = ChangeState
trigger1 = Time = 30
value = 903

;-------------- Next Part
[Statedef 903]
type = S
physics = S
movetype = I
ctrl = 0

[State 9003, Flash]
type = PalFX
trigger1 = Time = 0
time = 2
add = 50,50,50
mul = 300,300,300

[State 9003, Button Jam]
type = ChangeState
triggerall = Random <= 500
trigger1 = (command = "a") || (command = "b") || (command = "c") 
trigger2 = (command = "x") || (command = "y") || (command = "z")
value = 904

[State 9003, Next]
type = ChangeState
trigger1 = Time = 30
value = 904

;-------------- Next Part
[Statedef 904]
type = S
physics = S
movetype = I
ctrl = 0

[State 9004, Flash]
type = PalFX
trigger1 = Time = 0
time = 2
add = 50,50,50
mul = 300,300,300

[State 9004, Button Jam]
type = ChangeState
triggerall = Random <= 500
trigger1 = (command = "a") || (command = "b") || (command = "c") 
trigger2 = (command = "x") || (command = "y") || (command = "z")
value = 905

[State 9004, Next]
type = ChangeState
trigger1 = Time = 30
value = 905

;-------------- Next Part
[Statedef 905]
type = S
physics = S
movetype = I
ctrl = 0

[State 9005, Flash]
type = PalFX
trigger1 = Time = 0
time = 2
add = 50,50,50
mul = 300,300,300

[State 9005, Button Jam]
type = ChangeState
triggerall = Random <= 500
trigger1 = (command = "a") || (command = "b") || (command = "c") 
trigger2 = (command = "x") || (command = "y") || (command = "z")
value = 906

[State 9005, Next]
type = ChangeState
trigger1 = Time = 30
value = 906

;-------------- Next Part
[Statedef 906]
type = S
physics = S
movetype = I
ctrl = 0

[State 9006, Flash]
type = PalFX
trigger1 = Time = 0
time = 2
add = 50,50,50
mul = 300,300,300

[State 9006, Button Jam]
type = ChangeState
triggerall = Random <= 500
trigger1 = (command = "a") || (command = "b") || (command = "c") 
trigger2 = (command = "x") || (command = "y") || (command = "z")
value = 907

[State 9006, Next]
type = ChangeState
trigger1 = Time = 30
value = 907

;-------------- Last Part
[Statedef 907]
type = S
physics = S
movetype = I
ctrl = 0

[State 9007, Flash]
type = PalFX
trigger1 = Time = 0
time = 2
add = 50,50,50
mul = 300,300,300

[State 9007, Button Jam]
type = SelfState
triggerall = Random <= 500
trigger1 = (command = "a") || (command = "b") || (command = "c") 
trigger2 = (command = "x") || (command = "y") || (command = "z")
value = 11
ctrl = 1

[State 9007, Undizzy]
type = SelfState
trigger1 = Time = 30
ctrl = 1
value = 11

;---------------------------------------------------------------------------
; Burst Mode Air Shinkuu Tatsu Maki Senpuu Kyaku!
[Statedef 910]
type = A
movetype = A
Physics = N
anim = 812
velset = Vel X / 2,Vel Y / 2
ctrl = 0
juggle = 4

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 0

[State 780, No Pushing!]
type = Playerpush
trigger1 = 1
value = 0

[State 740, Shinkuu...]
type = PlaySnd
trigger1 = Time = 1
value = S8,3

[State 790, Tatsu Ma..etc]
type = PlaySnd
trigger1 = Time = 8
value = S3,0

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 7)
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
sprpriority = -5
scale = 1.08,1.08

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 7
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 7
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 7
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 7
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 7
pos = 15,0
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 750, Straight]
type = VelSet
trigger1 = time = 8
x = IfElse(Vel X >= 0, .05, -.05)
y = .05

[State 751, Left Leg Hit]
type = HitDef
trigger1 = animelem = 6
trigger2 = animelem = 10
trigger3 = animelem = 14
trigger4 = animelem = 18
trigger5 = animelem = 22
trigger6 = animelem = 26
trigger7 = animelem = 30
trigger8 = animelem = 34
trigger9 = animelem = 38
attr = A, HA
animtype  = Hard
priority = 7, Hit
damage    = 17, 3
guardflag = MA
pausetime = 2,2
getpower = 0,0
snap = 35,-10
p2facing = ifelse(P2Dist X > 0, 1, -1)
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 28
ground.velocity = 15,-2;ifelse(P2Dist X > 0,9,-9),-2
air.velocity = 15,-1;ifelse(P2Dist X > 0,9,-9),-1
air.fall = 1
fall.recover = 0
fall.yvelocity = -.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 751, Right Leg Hit]
type = HitDef
trigger1 = animelem = 8
trigger2 = animelem = 12
trigger3 = animelem = 16
trigger4 = animelem = 20
trigger5 = animelem = 24
trigger6 = animelem = 28
trigger7 = animelem = 32
trigger8 = animelem = 36
attr = A, HA
animtype  = Hard
priority = 7, Hit
damage    = 17, 3
getpower = 0,0
guardflag = MA
pausetime = 2,2
sparkno = 3
p2facing = ifelse(P2Dist X > 0, 1, -1)
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 28
ground.velocity = -15,-2;ifelse(P2Dist X > 0,9,-9),-2
air.velocity = -15,-1;ifelse(P2Dist X > 0,9,-9),-1
air.fall = 1
fall.recover = 0
fall.yvelocity = -.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 751, Ending Hit]
type = HitDef
trigger1 = animelem = 40
attr = A, HA
animtype  = Hard
damage    = 17, 4
getpower = 0,0
guardflag = MA
priority = 7, Hit
pausetime = 5,3
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -8,-8
air.velocity = -8,-8
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 870, Aerial Rave!]
type = VarSet
triggerall = Animelem = 40
trigger1 = movehit && prevstateno = [600,641]
var(12) = 1

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 6
trigger2 = animelem = 10
trigger3 = animelem = 14
trigger4 = animelem = 18
trigger5 = animelem = 22
trigger6 = animelem = 26
trigger7 = animelem = 30
trigger8 = animelem = 34
trigger9 = animelem = 38
trigger10 = animelem = 8
trigger11 = animelem = 12
trigger12 = animelem = 16
trigger13 = animelem = 20
trigger14 = animelem = 24
trigger15 = animelem = 28
trigger16 = animelem = 32
trigger17 = animelem = 36
trigger18 = animelem = 40
value = S6,3

[State 741, Whoops!]
type = PosSet
trigger1 = Time < 116 && Pos Y >= -15
y = -15

[State 741, Fall!]
type = VelAdd
trigger1 = Time >= 116 ;After 9 swings
y = .39

[State 741, Bye Super BG!]
type = RemoveExplod
trigger1 = Time = 116 ;After 9 swings
ID = 792

[State 741, Landing]
type = ChangeState
trigger1 = Time > 116 && Pos Y >= 0
value = 751

;---------------------------------------------------------------------------
; Burst Mode Ground Shinkuu Tatsu Maki Senpuu Kyaku!
[Statedef 911]
type = A
movetype = A
Physics = N
anim = ifelse(Palno > 6, 1060, 813)
velset = 0,0
ctrl = 0
juggle = 4

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 0

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 780, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 740, Shinkuu...]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = Time = 1
value = S8,3

[State 790, Tatsu Ma..etc]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = Time = 27
value = S3,0

[State 740, Messatsu!]
type = PlaySnd
triggerall = Palno > 6
trigger1 = Time = 1
value = S16,3

[State 790, Dark Evil Grunt!]
type = PlaySnd
triggerall = Palno > 6
trigger1 = Time = 6
value = S12,2

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 16) && Palno <= 6
trigger2 = (NumExplod(792) = 0) && (Time = 3) && Palno > 6 
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
sprpriority = -5
scale = 1.08,1.08

[State 790, Super Pause BG]
type = Explod
trigger1 = (Time = 16) && Palno <= 6
trigger2 = (Time = 3) && Palno > 6 
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = (Time = 16) && Palno <= 6
trigger2 = (Time = 3) && Palno > 6 
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = (Time = 16) && Palno <= 6
trigger2 = (Time = 3) && Palno > 6 
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = (Time = 16) && Palno <= 6
trigger2 = (Time = 3) && Palno > 6 
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = (Time = 16) && Palno <= 6
trigger2 = (Time = 3) && Palno > 6 
pos = -5,0
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 790, Evil Red Stuff]
type = Explod
triggerall = Palno > 6
trigger1 = Time = 3
anim = 956
postype = P1
ID = 952
pos = 0,0
removetime = 34
bindtime = 999
supermove = 1
removeongethit = 1
sprpriority = 5
ownpal = 1

[State 750, Up we go.]
type = VelSet
trigger1 = time = 21 && Palno <= 6
trigger2 = Time = 16 && Palno > 6
x = 0
y = -4

[State 750, Friction]
type = VelMul
triggerall = Palno <= 6
trigger1 = time > 27 && Time < 134 
x = 0
y = .9

[State 750, Friction]
type = VelMul
triggerall = Palno > 6
trigger1 = time > 22 && Time < 94 
x = 0
y = .9

[State 751, Left Leg Hit]
type = HitDef
trigger1 = animelem = 13
trigger2 = animelem = 17
trigger3 = animelem = 21
trigger4 = animelem = 25
trigger5 = animelem = 29
trigger6 = animelem = 33
trigger7 = animelem = 37
trigger8 = animelem = 41
trigger9 = animelem = 45
attr = S, HA
animtype  = Hard
damage    = 17, 3
guardflag = MA
pausetime = 2,2
getpower = 0,0
p2facing = ifelse(P2Dist X > 0, 1, -1)
sparkno = 3
snap = 35,0
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 28
ground.velocity = 15,-2
air.velocity = 15,-1
air.fall = 1
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2
fall.recovertime = 45
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 751, Right Leg Hit]
type = HitDef
trigger1 = animelem = 15
trigger2 = animelem = 19
trigger3 = animelem = 23
trigger4 = animelem = 27
trigger5 = animelem = 31
trigger6 = animelem = 35
trigger7 = animelem = 39
trigger8 = animelem = 43
attr = S, HA
animtype  = Hard
damage    = 17, 3
getpower = 0,0
guardflag = MA
pausetime = 2,2
sparkno = 3
p2facing = ifelse(P2Dist X > 0, 1, -1)
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 28
ground.velocity = -15,-2
air.velocity = -15,-1
fall.recovertime = 45
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 751, Ending Hit]
type = HitDef
trigger1 = animelem = 47
attr = S, HA
animtype  = Hard
damage    = 17, 4
getpower = 0,0
guardflag = MA
pausetime = 5,3
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -8,-8
air.velocity = -8,ifelse(Palno > 6, -6, -8)
fall = 1
fall.recovertime = 45
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 13
trigger2 = animelem = 15
trigger3 = animelem = 17
trigger4 = animelem = 19
trigger5 = animelem = 21
trigger6 = animelem = 23
trigger7 = animelem = 25
trigger8 = animelem = 27
trigger9 = animelem = 29
trigger10 = animelem = 31
trigger11 = animelem = 33
trigger12 = animelem = 35
trigger13 = animelem = 37
trigger14 = animelem = 39
trigger15 = animelem = 41
trigger16 = animelem = 43
trigger17 = animelem = 45
trigger18 = animelem = 47
value = S6,3

[State 850, Slashes!]
type = Explod
trigger1 = Time = 30 && Palno <= 6
trigger2 = Time = 25 && Palno > 6
persistent = 0
anim = 940
ID = 811
pos = 0,29
removetime = -1
postype = p1
sprpriority = 0
bindtime = 2

[State 741, Fall!]
type = VelAdd
trigger1 = Time >= 134 && Palno <= 6 ;After 9 swings
trigger2 = Time >= 94 && Palno > 6 ;After 9 swings
y = .39
persistent = 1

[State 741, Bye Slashes!]
type = RemoveExplod
trigger1 = Time >= 134 && Palno <= 6 ;After 9 swings
trigger2 = Time >= 94 && Palno > 6 ;After 9 swings
ID = 811

[State 741, Bye Super BG!]
type = RemoveExplod
trigger1 = Time >= 134 && Palno <= 6 ;After 9 swings
trigger2 = Time >= 94 && Palno > 6 ;After 9 swings
ID = 792

[State 741, Landing]
type = ChangeState
trigger1 = Time > 90 && Pos Y >= 0
value = 751

;---------------------------------------------------------------------------
; You are not fit to surVIVE!  Ryu's Rave, RUSH!
[Statedef 920]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 890
       
[State 1040, Afterimages]
type = AfterImage
trigger1 = AnimElem = 10
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 790, Super Pause BG]
type = Explod
trigger1 = AnimElem = 10
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = AnimElem = 10
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = AnimElem = 10
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = AnimElem = 10
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = AnimElem = 10
pos = 35,-5
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 200, Rush!]
type = Velset            
trigger1 = AnimElem = 11
x = 11

[State 250, Rave Hit]
type = HitDef
trigger1 = AnimElem = 12
attr = S, NA
damage = 35
animtype = Medium
guardflag = MA    
hitflag = M
getpower = 0
givepower = 15,8
pausetime = 13,13
sparkno = 2
sparkxy = 0,-70
snap = 45,0
hitsound = S1,3
guardsound = S1,0
ground.type = High
forcestand = 1
ground.slidetime = 0
ground.hittime  = 150
ground.velocity = 0,0
p1stateno = 921
fall = 0
hitonce = 1
kill = 0

[State 250, Rave Miss]
type = HitDef
trigger1 = AnimElem = 13
attr = S, NA                     
damage = 65                   
animtype = Hard             
guardflag = MA    
hitflag = MAf      
getpower = 30,15                  
givepower = 15,8
pausetime = 9,9               
sparkno = 2                     
sparkxy = 0,-70
hitsound = S1,3
guardsound = S1,0                             
ground.type = High               
ground.slidetime = 20        
ground.hittime  = 20       
ground.velocity = -10       
airguard.velocity = -1.8,-.8     
air.type = High                  
air.velocity = -2,-5
air.slidetime = 20               
air.hittime = 20 
fall = 0

[State -2, Can't be hit if movecontact]
type = Nothitby
triggerall = Movehit
trigger1 = 1
value = SCA, AA, AT, AP, HA, HT, HP, SA, ST, SP
time = 1
ignorehitpause = 1

[State 250, Ikuzu.]
type = PlaySnd
trigger1 = AnimElem = 1
value = S12,18

[State 250, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 13
value = S6,3

[State 250, Yeah!]
type = PlaySnd
trigger1 = AnimElem = 13
value = S0,5

[State 250, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Ryu's Rave (Combo Counter Appears-transfer to Rave 'standing' state)
[Statedef 921]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0

[State 922, Timer Go!]
type = VarSet
trigger1 = Time = 0
var(16) = 2550

[State 922, Add a hit]
type = VarSet
trigger1 = Time = 0
var(17) = 1

[State 921, AnimFreeze for Ryu]
type = ChangeAnim
trigger1 = 1
value = anim
elem = 12

[State 921, Counter FWD]
type = Helper
trigger1 = (Time = 0) && (facing = 1)
facing = 1
stateno = 922
postype = Back
pos = 75,-150
helpertype = normal
Name = "Rave Combo Counter"
shadow = -1
keyctrl = 0
ownpal = 1
sprpriority = 1

[State 921, Counter Back]
type = Helper
trigger1 = (Time = 0) && (facing = -1)
facing = -1
stateno = 924
postype = Back
pos = 85,-150
helpertype = normal
Name = "Rave Combo Counter"
shadow = -1
keyctrl = 0
ownpal = 1
sprpriority = 1

[State 921, To Standing now- The fun's about to BEGIN!]
type = ChangeState
trigger1 = Time = 50
value = 923

;---------------------------------------------------------------------------
; Ryu's Rave - (The Combo Counter Itself)
[Statedef 922]
type = S
movetype = A
physics = S
anim = 891
velset = 0,0
sprpriority = 5

[State 922, Good!]
type = ChangeAnim
trigger1 = parent, var(17) >= 25
value = 892
persistent = 0

[State 922, Very Good!]
type = ChangeAnim
trigger1 = parent, var(17) >= 55
value = 893
persistent = 0

[State 922, Ultra Combo!]
type = ChangeAnim
trigger1 = parent, var(17) >= 90
value = 894
persistent = 0

[State 922, Dream Super Combo!]
type = ChangeAnim
trigger1 = parent, var(17) >= 140
value = 895
persistent = 0

[State 922, Ok, ok!]
type = ChangeAnim
trigger1 = parent, var(17) >= 180
value = 896
persistent = 0

[State 922, Give up.]
type = ChangeAnim
trigger1 = parent, var(17) >= 220
value = 897
persistent = 0

[State 922, Outta Here]
type = ChangeState
trigger1 = Time >= 100 && parent, winko
trigger2 = parent, Var(16) <= 0
trigger3 = parent, stateno != [921,959]
value = 925
persistent = 0

;---------------------------------------------------------------------------
; Ryu's Rave (Neutral Standing State)
[Statedef 923]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 0
velset = 0,0

[State 923, Opponent has been KOed]
type = Changestate
trigger1 = winko || Roundstate != 2
value = 0
ctrl = 1

[State 923, Guard Crushed!]
type = Changestate
trigger1 = NumTarget = 0
value = 980
ctrl = 0

[State 923, Finish Him!]
type = Changestate
trigger1 = Var(16) <= 0
value = 957

;---------------------------------------------------------------------------
; Ryu's Rave - ([Backwards] The Combo Counter Itself)
[Statedef 924]
type = S
movetype = A
physics = S
anim = 898
velset = 0,0
sprpriority = 5

[State 922, Good!]
type = ChangeAnim
trigger1 = parent, var(17) >= 25
value = 892
persistent = 0

[State 922, Very Good!]
type = ChangeAnim
trigger1 = parent, var(17) >= 55
value = 893
persistent = 0

[State 922, Ultra Combo!]
type = ChangeAnim
trigger1 = parent, var(17) >= 90
value = 894
persistent = 0

[State 922, Dream Super Combo!]
type = ChangeAnim
trigger1 = parent, var(17) >= 140
value = 895
persistent = 0

[State 922, Ok, ok!]
type = ChangeAnim
trigger1 = parent, var(17) >= 180
value = 896
persistent = 0

[State 922, Give up.]
type = ChangeAnim
trigger1 = parent, var(17) >= 220
value = 897
persistent = 0

[State 922, Outta Here]
type = ChangeState
trigger1 = Time >= 100 && parent, winko
trigger2 = parent, Var(16) <= 0
trigger3 = parent, stateno != [921,959]
value = 925
persistent = 0

;---------------------------------------------------------------------------
; Ryu's Rave - (Combo Counter Goes Bye Bye)
[Statedef 925]
type = S
movetype = A
physics = S
anim = IfElse(PrevStateno = 924, 909, 899)
velset = 0,0
sprpriority = 5

[State 922, Bye Bye!]
type = DestroySelf
trigger1 = Animtime = 0

;---------------------------------------------------------------------------
; (Rave) STAND_X
[Statedef 930]
type    = S                      
movetype= A                      
physics = S
ctrl = 0                         
anim = 200                       
poweradd = 0    

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA                     
damage    = 1                 
animtype = Light                 
getpower = 0
givepower = 50                 
guardflag = M                   
hitflag = M                   
priority = 3, Hit                
pausetime = 9,9    
sparkno = 0       
sparkxy = 0,-80              
hitsound = S1,1                   
guardsound = S1,0                 
ground.type = High                 
ground.slidetime = 0            
ground.hittime = 100
ground.velocity = 0
airguard.velocity = 0
air.velocity = 0
ground.cornerpush.veloff = 0
kill = 0

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

[State 200, Whoosh!]
type = PlaySnd
trigger1 = time = 1
value = S6,1

;---------------------------------------------------------------------------
; (Rave) STAND_Y
[Statedef 931]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim = 210

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 1

[State 210, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA    
animtype  = Medium
damage    = 2
getpower = 0
givepower = 50
priority = 3, Hit
guardflag = MA
pausetime = 9,9
sparkxy = 0,-80
hitsound   = S1,2
sparkno = 1
guardsound = S1,0
ground.type = Low
ground.hittime  = 100
ground.velocity = 0
air.velocity = 0
ground.cornerpush.veloff = 0
kill = 0

[State 210, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

[State 210, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
; (Rave) STAND_Z
[Statedef 932]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 220

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 1

[State 220, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Hard
damage    = 3
getpower = 0
givepower = 50
guardflag = MA
pausetime = 9,9
sparkno = 2
sparkxy = 0,-80
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
air.velocity = 0
kill = 0

[State 220, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

[State 220, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

;---------------------------------------------------------------------------
; (Rave) STAND_A
[Statedef 933]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 230

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 1

[State 250, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Light
damage    = 1
getpower = 0
givepower = 50
priority = 3,Hit
guardflag = MA
pausetime = 9,9
sparkxy = 0,-40
hitsound   = S1,4
guardsound = S1,0
sparkno = 0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
air.velocity = 0
ground.cornerpush.veloff = 0
kill = 0

[State 250, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

[State 250, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,1

;---------------------------------------------------------------------------
; (Rave) STAND_B
[Statedef 934]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 240

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 1

[State 260, 1]
type = HitDef
trigger1 = AnimElem = 5
attr = S, NA
animtype  = Medium
damage    = 2
getpower = 0
givepower = 50
guardflag = MA
pausetime = 9,9
sparkxy = -10,-80
hitsound   = S1,5
guardsound = S1,0
sparkno = 1
ground.type = Low
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
air.velocity = 0
kill = 0

[State 260, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

[State 260, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

[State 241, Huh!]
type = PlaySnd
trigger1 = AnimElem = 4
value = S12,5

;---------------------------------------------------------------------------
; (Rave) STAND_C
[Statedef 935]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 250

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 1

[State 250, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage   = 3
animtype = Hard
guardflag = MA
pausetime = 9,9
sparkno = 2 
sparkxy = -10,-85
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
air.velocity = 0
airguard.velocity = 0
kill = 0

[State 270, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

[State 270, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

[State 241, Yah!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,5

;---------------------------------------------------------------------------
; (Rave) FWD_X
[Statedef 940]
type    = S                      
movetype= A                      
physics = S
ctrl = 0                         
anim = 901                       
poweradd = 0    

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 1

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     
damage    = 1                 
animtype = Light                 
getpower = 0
givepower = 50                 
guardflag = M                   
hitflag = M                   
priority = 3, Hit                
pausetime = 9,9    
sparkno = 0       
sparkxy = 0,-60              
hitsound = S1,1                   
guardsound = S1,0                 
ground.type = High                 
ground.slidetime = 0            
ground.hittime  = 100        
ground.velocity = 0
airguard.velocity = 0
air.velocity = 0
ground.cornerpush.veloff = 0
kill = 0

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

[State 200, Whoosh!]
type = PlaySnd
trigger1 = time = 1
value = S6,1

;---------------------------------------------------------------------------
; (Rave) FWD_Y
[Statedef 941]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim = 903

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 1

[State 210, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NA    
animtype  = Medium
damage    = 2
getpower = 0
givepower = 50
priority = 3, Hit
guardflag = MA
pausetime = 9,9
sparkxy = 0,-80
hitsound   = S1,2
sparkno = 1
guardsound = S1,0
ground.type = Low
ground.hittime  = 100
ground.velocity = 0
air.velocity = 0
ground.cornerpush.veloff = 0
kill = 0

[State 210, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

[State 210, 3]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

;---------------------------------------------------------------------------
; (Rave) FWD_Z
[Statedef 942]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 905

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 1

[State 220, 1]
type = HitDef
trigger1 = AnimElem = 4
attr = S, NA
animtype  = Hard
damage    = 3
getpower = 0
givepower = 50
guardflag = MA
pausetime = 9,9
sparkno = 2
sparkxy = 0,-80
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
air.velocity = 0
kill = 0

[State 220, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

[State 220, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

;---------------------------------------------------------------------------
; (Rave) FWD_A
[Statedef 943]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 900

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 1

[State 250, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Light
damage    = 1
getpower = 0
givepower = 50
priority = 3,Hit
guardflag = MA
pausetime = 9,9
sparkxy = -10,-30
hitsound   = S1,4
guardsound = S1,0
sparkno = 0
ground.type = Low
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
air.velocity = 0
ground.cornerpush.veloff = 0
kill = 0

[State 250, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

[State 250, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,1

;---------------------------------------------------------------------------
; (Rave) FWD_B
[Statedef 944]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 902

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 1

[State 260, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Medium
damage    = 2
getpower = 0
givepower = 50
guardflag = MA
pausetime = 9,9
sparkxy = -10,-80
hitsound   = S1,5
guardsound = S1,0
sparkno = 1
ground.type = Low
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
air.velocity = 0
kill = 0

[State 260, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

[State 260, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,2

[State 241, Huh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S12,5

;---------------------------------------------------------------------------
; (Rave) FWD_C
[Statedef 945]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 904

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 1

[State 250, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
damage   = 3
animtype = Hard
guardflag = MA
pausetime = 9,9
sparkno = 2 
sparkxy = -10,-25
hitsound   = S1,6
guardsound = S1,0
ground.type = High
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
air.velocity = 0
airguard.velocity = 0
kill = 0

[State 270, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

[State 270, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

[State 241, Yah!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,5

;---------------------------------------------------------------------------
; Rave_Hadoken
[Statedef 946]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 0
anim = 710

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 5

[State 700, Hadoken!]
type = PlaySnd
trigger1 = Time = 2
value = S13,1

[State 700, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 700, 1]
type = Projectile
trigger1 = AnimElem = 4
projanim = 720
projhitanim = 721
removeanim = 721
offset = 45, -3
projID = 722
velocity = 3.5, 0
projhits = 5
projmisstime = 0
; HitDef part of projectile info
attr = S, SP
damage    = 1
animtype = Hard
guardflag = MA
getpower = 0                
givepower = 50
pausetime = 0,4
sparkno = 3
sparkxy = 60,-57
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
kill = 0

[State 700, The Dust Trail!]
type = Helper
trigger1 = AnimElem = 4, 1
helpertype = Normal
name = "DustTrail"
postype = p1
pos = IfElse(Var(9) = 0, 70, 50),10
stateno = 706
ownpal = 1
persistent = 0

[State 700, Done!]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

[State 701, WHOOSH!]
type = PlaySnd
trigger1 = AnimElem = 4
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
trigger1 = AnimElem = 4
value = S12,4

;---------------------------------------------------------------------------
; Rave Hurricane Kick
[Statedef 947]
type = A
movetype = A
physics = N
poweradd = 0
ctrl = 0
anim = 906
juggle = 0

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 5

[State 750, Up we go.]
type = VelSet
trigger1 = time = 0
x = 0
y = -2.3  

[State 750, Straight]
type = VelSet
trigger1 = time = 6
x = 0
y = -1

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 751, 1]
type = HitDef
trigger1 = animelem = 4 
trigger2 = Hitcount < 6
attr = S, SA
animtype  = High
getpower = 0
givepower = 50
damage    = 1
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
ground.cornerpush.veloff = 0
fall = 0
kill = 0

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 6
value = S6,3

[State 750, Tatsu Ma..etc]
type = Playsnd
trigger1 = time = 1
value = S3,0

[State 750, Begin Falling]
type = ChangeAnim
trigger1 = Time = 25
value = 784

[State 750, Begin Falling]
type = VelAdd
trigger1 = Time >= 25
y = .39

[State 750, Land!]
type = ChangeState
trigger1 = Time > 25 && Pos Y >= 0
value = 923
ctrl = 0

;---------------------------------------------------------------------------
; Rave Dragon Punch
[Statedef 950]
type = S
movetype = A
physics = N
anim = 750
poweradd = 0
velset = 0
ctrl = 0
juggle = 0

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 1

[State 720, Dust] 
type = Explod
trigger1 = (Time = 0) && (Pos Y >= 0)
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 720, Sho-ryuken!]
type = PlaySnd
trigger1 = Time = 1
value = S2,0

[State 720, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
damage    = 1
animtype  = Hard
getpower  = 0
givepower = 50
hitflag = MAF
guardflag = MA
pausetime = 11,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
air.velocity = 0
ground.cornerpush.veloff = 0
kill = 0

[State 720, Rise!]
type = ChangeState
trigger1 = AnimTime = 0 
value = 951

;---------------------------------------------------------------------------
; Rave Dragon Punch (Rising)
[Statedef 951]
type = A
movetype = A
physics = A
ctrl = 0
anim = 907
velset = 0,-7.5
juggle = 0

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 4

[State 721, 1]
type = HitDef
trigger1 = HitCount < 4
attr = S, SA
damage    = 1
animtype  = Light
getpower  = 0
givepower = 50
hitflag = MA
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
air.velocity = 0
kill = 0

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 952

;---------------------------------------------------------------------------
; Rave Dragon Punch (Falling)
[Statedef 952]
type = A
movetype = I
physics = N
anim = 752
ctrl = 0
velset = 0

[State 722, Gravity]
type = VelAdd
trigger1 = 1
y = .39

[State 722, Land now!]
type = ChangeState
trigger1 = pos y >= 0
value = 953

;---------------------------------------------------------------------------
; Rave Dragon Punch (Landing)
[Statedef 953]
type = S
movetype = I
physics = S
anim = 753
ctrl = 0
velset = 0,0

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S12,0

[State 723, Landing Dust]
type = Explod
trigger1 = Time = 1
persistent = 0
anim = 733
ID = 733
pos = -65,-3
postype = p1
sprpriority = -1
bindtime = 1

[State 723, Don't Sink!]
type = PosSet
trigger1 = Time = 0
y = 0

[State 723, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 923
ctrl = 0

;---------------------------------------------------------------------------
; Rave Shinkuu Hadoken!
[Statedef 954]
type = S
movetype = A
Physics = S
anim = 881
velset = 0,0
ctrl = 0
poweradd = -1000
juggle = 0

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 20

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 0

[State 780, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 740, Shinkuu...]
type = PlaySnd
trigger1 = Time = 0
value = S8,3

[State 790, Hado-Ken!]
type = PlaySnd
trigger1 = AnimElem = 7
value = S12,7

[State 701, WHOOSH!]
type = PlaySnd
trigger1 = AnimElem = 7
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
trigger1 = AnimElem = 7
value = S12,4

[State 790, Super Pause Sound]
type = PlaySnd
trigger1 = time = 7
value = F20,0

[State 790, Super Pause Simulation]
type = gamemakeanim  
trigger1 = time = 7
value = 102
pos = -20,-50

[State 820, Yellow Flash!]
type = PalFX
trigger1 = time = 7
time = 5
add = 232,72,0
mul = 300,192,192
sinadd = 32,5,5,8

[State 750, Afterimages 1]
type = Afterimage
trigger1 = Time = 7
time = 1
PalBright   =   0,  0,  0
PalContrast =  75, 75,255
PalAdd      =   0,  0,  0
PalMul      = .75,.75,.75

[State 750, Afterimages 2]
type = AfterImageTime
trigger1 = Time >= 7
time = 5
PalBright   =   0,  0,  0
PalContrast =  75, 75,255
PalAdd      =   0,  0,  0
PalMul      = .75,.75,.75

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 184, 2]
type = Projectile
trigger1 = AnimElem = 7
projanim = 880
projid = 880
projhits = 20
projmisstime = 0
projshadow = -1
projpriority = 30
projhitanim = 831
projremovetime = -1
projhitvelocity = 0,0
velocity = 6
offset = 60,8
attr = S, HP
damage   = 10
animtype = heavy
getpower = 0
givepower = 100
guardflag = MA
hitflag = MAFP
pausetime = 2,18
hitsound = S12,14
guardsound = S1,0
sparkno = 3
sparkxy = 0,-60
ground.type = Low
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
fall = 0
palfx.time = 23
palfx.add = 10,30,130
kill = 0

[State 700, The Dust Trail!]
type = Helper
trigger1 = AnimElem = 7, 1
helpertype = Normal
name = "DustTrail"
postype = p1
pos = 50,10
stateno = 706
ownpal = 1
persistent = 0

[State 740, Feedback!] 
type = Explod
trigger1 = AnimElem = 7
anim = 803
ID = 803
pos = 0,0
postype = p1
sprpriority = 1
bindtime = 1
removetime = -2
shadow = -1,0,0

[State 820, The End]
type = ChangeState
trigger1 = Time = 25
value = 955
ctrl = 0

;---------------------------------------------------------------------------
; Rave Shinkuu Hadoken (End)!
[Statedef 955]
type = S
movetype = I
Physics = S
anim = 801
velset = 0,0
ctrl = 0

[State 782, To Standing]
type = Changestate
trigger1 = Animtime = 0
value = 923
ctrl = 0

;---------------------------------------------------------------------------
; Rave Shinkuu Tatumaki!
[Statedef 956]
type = S
movetype = A
Physics = S
anim = 908
velset = 0,0
ctrl = 0
poweradd = -1000
juggle = 0

[State 922, Add a hit]
type = Varadd
trigger1 = Time = 0
var(17) = 20

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 0

[State 780, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 740, Shinkuu...]
type = PlaySnd
trigger1 = Time = 0
value = S8,3

[State 790, Tatsu Ma..!]
type = PlaySnd
trigger1 = AnimElem = 9
value = S3,0

[State 750, Up we go.]
type = VelSet
trigger1 = time = 21
x = 0
y = -2.3  

[State 750, Straight]
type = VelSet
trigger1 = time = 26
x = 0
y = -.05

[State 820, Yellow Flash!]
type = PalFX
trigger1 = time = 5
time = 5
add = 232,72,0
mul = 300,192,192
sinadd = 32,5,5,8

[State 790, Super Pause Sound]
type = PlaySnd
trigger1 = time = 5
value = F20,0

[State 790, Super Pause Simulation]
type = gamemakeanim  
trigger1 = time = 5
value = 102
pos = -20,-50

[State 750, Afterimages 1]
type = Afterimage
trigger1 = Time = 5
time = 1
PalBright   =   0,  0,  0
PalContrast =  75, 75,255
PalAdd      =   0,  0,  0
PalMul      = .75,.75,.75

[State 750, Afterimages 2]
type = AfterImageTime
trigger1 = Time >= 5
time = 5
PalBright   =   0,  0,  0
PalContrast =  75, 75,255
PalAdd      =   0,  0,  0
PalMul      = .75,.75,.75

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 751, Hit]
type = HitDef
trigger1 = HitCount < 20
attr = S, HA
animtype  = Hard
damage    = 10
guardflag = MA
pausetime = 2,2
getpower = 0,0
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 0
ground.hittime  = 100
ground.velocity = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
kill = 0

[State 750, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 13
trigger2 = AnimElem = 15
trigger3 = AnimElem = 1
trigger4 = Animelem = 3
value = S6,3

[State 750, Begin Falling]
type = ChangeAnim
trigger1 = Time = 106
value = 784

[State 750, Begin Falling]
type = VelAdd
trigger1 = Time >= 106
y = .39

[State 750, Land!]
type = ChangeState
trigger1 = Time > 106 && Pos Y >= 0
value = 923
ctrl = 0

;---------------------------------------------------------------------------
; The End of the Rave
[Statedef 957]
type = S
movetype = A
Physics = S
anim = 910
velset = 0,0
ctrl = 0
poweradd = 0
juggle = 0

[State 1500, 5]
type = HitDef
trigger1 = AnimElem = 3
attr = S, HA
damage    = 1
animtype  = Medium
getpower  = 0
givepower = 100
priority = 8
hitflag = MAf
guardflag = M
pausetime = 5,5
sparkxy = -20,-60
sparkno = 3
hitsound   = S1,2
guardsound = S1,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 50
ground.velocity = 0  
air.velocity = 0,0
kill = 0

[State 1500, 5]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
damage    = 1
animtype  = Medium
getpower  = 0
givepower = 100
priority = 8
hitflag = MAf
guardflag = M
pausetime = 5,5
sparkxy = -20,-60
sparkno = 3
hitsound   = S1,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 50
ground.velocity = 0  
air.velocity = 0,0
kill = 0

[State 1500, 6]
type = HitDef
trigger1 = AnimElem = 11
attr = S, HA
damage    = 1
animtype  = Medium
getpower  = 0
givepower = 100
hitflag = MAF
guardflag = M
pausetime = 9,15
sparkxy = -15,-80
sparkno = 3
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 50
air.hittime = 40
ground.velocity = -0.5
air.velocity = -0.5
kill = 0

[State 957, Finished!]
type = Changestate
trigger1 = Animtime = 0
value = 958

;---------------------------------------------------------------------------
; Finisher
[Statedef 958]
type = A
movetype = A
physics = A
ctrl = 0
anim = 821
velset = 1,-12.5

[State 803, Forward a Bit]
type = PosAdd
trigger1 = Time = 0
x = 5

[State 803, VelMul]
type = VelMul
trigger1 = Time >= 0
x = .93

[State 803, 1]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = Movehit && Hitcount < 2
attr = A, HA
damage    = 1
animtype  = Back
getpower  = 0
givepower = 100
guardflag = MF
pausetime = 15,15
sparkxy = -15,-59
sparkno = 3
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -10,-12   
air.velocity = -10,-12
guard.velocity = -7
yaccel = Const(movement.yaccel)
fall = 1
fall.yvelocity = -.2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 804

[State 921, Combo Ranker FWD]
type = Helper
trigger1 = (Time = 10) && (facing = 1)
facing = 1
stateno = 959
postype = Back
pos = 75,-150
helpertype = normal
Name = "Rave Combo Rank"
shadow = -1
keyctrl = 0
ownpal = 1
sprpriority = 1

[State 921, Combo Ranker Back]
type = Helper
trigger1 = (Time = 10) && (facing = -1)
facing = -1
stateno = 959
postype = Back
pos = 85,-150
helpertype = normal
Name = "Rave Combo Rank"
shadow = -1
keyctrl = 0
ownpal = 1
sprpriority = 1

;---------------------------------------------------------------------------
; Combo Ranker
[Statedef 959]
type = A
movetype = A
physics = A
ctrl = 0
anim = 160
velset = 0,0

[State 790, Super Pause Noise]
type = PlaySnd
trigger1 = Time = 0 
value = S1,8

[State 790, Rank D]
type = Explod
trigger1 = Time = 0 && parent, Var(17) < 40
postype = Back
pos = 120,110
anim = 911
bindtime = 13
supermove = 1
removetime = 100
sprpriority = 5
ownpal = 1
ontop = 1

[State 790, Rank C]
type = Explod
trigger1 = Time = 0 && parent, Var(17) >= 40 && parent, Var(17) < 90
postype = Back
pos = 120,110
anim = 912
bindtime = 13
supermove = 1
removetime = 100
sprpriority = 5
ownpal = 1
ontop = 1

[State 790, Rank B]
type = Explod
trigger1 = Time = 0 && parent, Var(17) >= 90 && parent, Var(17) < 150
postype = Back
pos = 120,110
anim = 913
bindtime = 13
supermove = 1
removetime = 100
sprpriority = 5
ownpal = 1
ontop = 1

[State 790, Rank A]
type = Explod
trigger1 = Time = 0 && parent, Var(17) >= 150 && parent, Var(17) < 220
postype = Back
pos = 120,110
anim = 914
bindtime = 13
supermove = 1
removetime = 100
sprpriority = 5
ownpal = 1
ontop = 1

[State 790, Rank S]
type = Explod
trigger1 = Time = 0 && parent, Var(17) >= 220
postype = Back
pos = 160,120
anim = 915
bindtime = 13
supermove = 1
removetime = 100
sprpriority = 5
ownpal = 1
ontop = 1

[State 790, Rank D Super Pause!]
type = SuperPause
trigger1 = Time = 0 && parent, Var(17) < 40
pos = 0,-50
anim = -1
time = 100
sound = S15,1

[State 790, Rank C Super Pause!]
type = SuperPause
trigger1 = Time = 0 && parent, Var(17) >= 40 && parent, Var(17) < 90
pos = 0,-50
anim = -1
time = 100
sound = S15,3

[State 790, Rank B Super Pause!]
type = SuperPause
trigger1 = Time = 0 && parent, Var(17) >= 90 && parent, Var(17) < 150
pos = 0,-50
anim = -1
time = 100
sound = S15,3

[State 790, Rank A Super Pause!]
type = SuperPause
trigger1 = Time = 0 && parent, Var(17) >= 150 && parent, Var(17) < 220
pos = 0,-50
anim = -1
time = 100
sound = S15,2

[State 790, Rank S Super Pause!]
type = SuperPause
trigger1 = Time = 0 && parent, Var(17) >= 220
pos = 0,-50
anim = -1
time = 100
sound = S15,4

[State 959, Destroyed]
type = DestroySelf
trigger1 = Time = 1

;---------------------------------------------------------------------------
; Alpha Counter 1 - Counter Shoryuken
[Statedef 960]
type = S
movetype = A
Physics = N
anim = ifelse(Palno > 6, 921, 920)
velset = 0,0
ctrl = 0
juggle = 0
sprpriority = 4

[State 740, Ikuzo!]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = Time = 1
value = S8,4

[State 740, Hoo!]
type = PlaySnd
triggerall = Palno > 6
trigger1 = Time = 1
value = S16,4

[State 740, Counter!]
type = PlaySnd
trigger1 = Time = 1
value = S9,2

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 4
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 10
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 4
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 4
pos = 35,-60
anim = F3
time = 10
poweradd = -1000
sound = S1,3

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 740, Sho-Ryuken!]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = Time = 6
value = S2,0

[State 740, Sho!!]
type = PlaySnd
triggerall = Palno > 6
trigger1 = Time = 6
value = S16,8

[State 740, 1]
type = VelSet
trigger1 = Time = 6
x = 0
y = 0
z = 0

[State 720, Normal Version]
type = HitDef
triggerall = Palno <= 6
trigger1 = AnimElem = 2
attr = C, SA
damage    = 207,20
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAF
priority = 6,Hit
guardflag = MA
pausetime = 11,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
air.juggle = 2
ground.type = High
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -14,-19.5
air.velocity = -14,-19.5
ground.cornerpush.veloff = -14
yaccel = .5
p2facing = 1
p2stateno = 725
fall.recovertime = 32
fall = 1
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 740, Evil Version]
type = HitDef
triggerall = Palno > 6
trigger1 = HitCount < 2 && moveguarded = 0
attr = S, SA
damage    = 85,10
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 11,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -2,-8
air.velocity = -2,-8
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
ground.cornerpush.veloff = -11

[State 1110, 6]
type = NotHitBy
trigger1 = Time = 4
value = , N, S
time = 7

[State 740, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = ifelse(Palno <= 6, 741, 1031)

;---------------------------------------------------------------------------
; Alpha Counter 2 - Counter Trip!
[Statedef 970]
type = A
movetype = A
Physics = N
anim = 930
velset = 0,0
ctrl = 0
juggle = 0
sprpriority = 4

[State 740, Ikuzo!]
type = PlaySnd
triggerall = Palno <= 6
trigger1 = Time = 1
value = S8,4

[State 740, Hoo!]
type = PlaySnd
triggerall = Palno > 6
trigger1 = Time = 1
value = S16,4

[State 740, Counter!]
type = PlaySnd
trigger1 = Time = 1
value = S9,2

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 4
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 10
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 4
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 4
pos = 35,-60
anim = F3
time = 10
poweradd = -1000
sound = S1,3

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 450, 1]
type = HitDef
trigger1 = Time = 0
attr = S, HA
damage    = 207,20
animtype  = High
getpower = 0
priority = 6,Hit
givepower = 15,8
hitflag = MAFD
guardflag = L
pausetime = 9,9
sparkxy = 0,-20
hitsound   = S1,6
guardsound = S1,0
ground.type = Trip
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -.1,-4
air.velocity = -1.3,-3
guard.velocity = -6
sparkno = 2
fall = 1
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 450, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 450, Whoosh!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S6,3

;---------------------------------------------------------------------------
; Rave Guard Crush
[Statedef 980]
type = S
movetype = I
Physics = N
anim = 916
velset = 0,0
poweradd = -3000
ctrl = 0
juggle = 0
sprpriority = 5

[State 740, Gwaaa!]
type = PlaySnd
trigger1 = Time = 0
value = S0,2

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 0
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 10
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 0
value = 0,0,0
under = 1
;supermovetime = 9999
time = 10

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 0
pos = 0,-60
anim = F3
time = 10
sound = S1,3

[State 740, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 740, Crush End!]
type = ChangeState
trigger1 = Time = 300
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Evil Ryu Intro 1 - Consumed by Darkness, all is lost!
[Statedef 990]
type = S
ctrl = 0
anim = 950
velset = 0,0

[State 191, 1] ;Freeze animation until PreIntro is over
type = NULL;ChangeAnim
trigger1 = RoundState = 0
value = 950

[State 990, HOO!]
type = Playsnd
trigger1 = AnimElem = 10
persistent = 0
value = 16,5

[State 990, Smash!]
type = Playsnd
trigger1 = AnimElem = 10
persistent = 0
value = 16,2

[State 790, Evil Red Stuff]
type = Explod
trigger1 = AnimElem = 15
anim = 951
postype = P1
ID = 951
pos = 0,0
removetime = 109
bindtime = 999
sprpriority = 5
ownpal = 1

[State 790, Pillar of Light]
type = Explod
trigger1 = AnimElem = 10
anim = 952
postype = P1
ID = 952
pos = 0,0
removetime = 69
bindtime = 999
sprpriority = -1
ownpal = 1

[State 790, Pillar of Light...GO AWAY!]
type = Explod
trigger1 = Time = 160
anim = 953
postype = P1
ID = 953
pos = 0,0
removetime = -2
bindtime = 999
sprpriority = -1
ownpal = 1

[State 990, Shake!]
type = EnvShake
Trigger1 = AnimElem = 10,-1
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 10

[State 990, Whitish]
type = PalFx
trigger1 = Time = 101
time = 50
add = 20,20,20
mul = 256,256,256
color = 256

[State 990, Whiterish]
type = PalFx
trigger1 = Time = 106
time = 50
add = 30,30,30
mul = 256,256,256
color = 256

[State 990, Even More Whiterish]
type = PalFx
trigger1 = Time = 112
time = 50
add = 50,50,50
mul = 256,256,256
color = 256

[State 990, Grand Love Love Whiterish]
type = PalFx
trigger1 = Time = 117
time = 50
add = 70,70,70
mul = 256,256,256
color = 256

[State 990, Ultra Love Love Whiterish]
type = PalFx
trigger1 = Time = 121
time = 50
add = 80,80,80
mul = 256,256,256
color = 256

[State 990, Oh god, not more White]
type = PalFx
trigger1 = Time = 126
time = 50
add = 100,100,100
mul = 256,256,256
color = 256

[State 990, Sigh...]
type = PalFx
trigger1 = Time = 132
time = 50
add = 130,130,130
mul = 256,256,256
color = 256

[State 990, Eeee!]
type = PalFx
trigger1 = Time = 137
time = 50
add = 150,150,150
mul = 256,256,256
color = 256

[State 990, Running Out of Things to Say]
type = PalFx
trigger1 = Time = 141
time = 50
add = 180,180,180
mul = 256,256,256
color = 256

[State 990, Yes, Whiter]
type = PalFx
trigger1 = Time = 147
time = 50
add = 200,200,200
mul = 256,256,256
color = 256

[State 990, Yes, Whitest]
type = PalFx
trigger1 = Time = 151
time = 50
add = 255,255,255
mul = 256,256,256
color = 256

[State 990, Dark]
type = PalFx
trigger1 = Time = 156
time = 50
add = 200,200,200
mul = 256,256,256
color = 256

[State 990, Darkerish]
type = PalFx
trigger1 = Time = 162
time = 10
add = 150,150,150
mul = 256,256,256
color = 256

[State 990, More Darkerish]
type = PalFx
trigger1 = Time = 167
time = 10
add = 100,100,100
mul = 256,256,256
color = 256

[State 990, Even More Darkerish]
type = PalFx
trigger1 = Time = 171
time = 10
add = 50,50,50
mul = 256,256,256
color = 256

[State 990, More More Darkerish]
type = PalFx
trigger1 = Time = 176
time = 10
add = -1,-1,-1
mul = 256,256,256
color = 256

[State 990, You know...]
type = PalFx
trigger1 = Time = 182
time = 10
add = -50,-50,-50
mul = 256,256,256
color = 256

[State 990, By now you know...]
type = PalFx
trigger1 = Time = 187
time = 10
add = -100,-100,-100
mul = 256,256,256
color = 256

[State 990, Oh the tedium...]
type = PalFx
trigger1 = Time = 192
time = 10
add = -150,-150,-150
mul = 256,256,256
color = 256

[State 990, Oh the tedium 2...]
type = PalFx
trigger1 = Time = 197
time = 10
add = -200,-200,-200
mul = 256,256,256
color = 256

[State 990, Admittedly Dark as hell]
type = PalFx
trigger1 = Time = 200
time = 10
add = -255,-255,-255
mul = 256,256,256
color = 256

[State 191, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 990, Admittedly Dark as hell 2]
type = PalFx
trigger1 = Time = 350
time = 10
add = -255,-255,-255
mul = 256,256,256
color = 256

[State 990, Oh the tedium 3...]
type = PalFx
trigger1 = Time = 360
time = 10
add = -200,-200,-200
mul = 256,256,256
color = 256

[State 990, Oh the tedium 4...]
type = PalFx
trigger1 = Time = 370
time = 10
add = -150,-150,-150
mul = 256,256,256
color = 256

[State 990, By now you know 2...]
type = PalFx
trigger1 = Time = 380
time = 10
add = -100,-100,-100
mul = 256,256,256
color = 256

[State 990, You know 2...]
type = PalFx
trigger1 = Time = 390
time = 10
add = -50,-50,-50
mul = 256,256,256
color = 256

[State 990, The End]
type = ChangeState
trigger1 = Animtime = 0
value = 0

;---------------------------------------------------------------------------
; Evil Hurricane Kick A
[Statedef 1000]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 990
juggle = 5

[State 750, Up we go.]
type = VelSet
trigger1 = time = 0
x = 5
y = -3.3  

[State 750, Straight]
type = VelSet
trigger1 = time = 9
x = 5
y = 0

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 751, 1]
type = HitDef
triggerall = P2Dist X >= 0
trigger1 = AnimElemTime(1) = 2
trigger2 = animelem = 4
attr = S, SA
animtype  = High
damage    = 40, 9
guardflag = MA
pausetime = 9,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -4,-3

[State 751, 1]
type = HitDef
triggerall = P2Dist X < 0
trigger1 = animelem = 6
attr = S, SA
animtype  = High
damage    = 40, 9
guardflag = MA
pausetime = 9,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 4
air.velocity = 4,-3

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 6
value = S6,3

[State 750, Evil Tatsu Maki Grunt]
type = Playsnd
trigger1 = time = 1
value = S16,7

[State 1041, 6]
type = Velset
trigger1 = AnimElem = 8
y = 5
x = 2

[State 750, Land!]
type = ChangeState
trigger1 = Time > 9 && Pos Y >= 0
value = 751

;---------------------------------------------------------------------------
; Evil Hurricane Kick B
[Statedef 1001]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 991
juggle = 5

[State 750, Up we go.]
type = VelSet
trigger1 = time = 0
x = 5
y = -3.3  

[State 750, Straight]
type = VelSet
trigger1 = time = 9
x = 5
y = 0

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 1100, 1]
type = HitDef
triggerall = P2Dist X >= 0
trigger1 = AnimElemTime(1) = 2
trigger2 = animelem = 4
trigger3 = animelem = 8
attr = S, SA
animtype  = High
damage    = 30, 3
guardflag = MA
pausetime = 8,8
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -4,-3

[State 1100, 1]
type = HitDef
triggerall = P2Dist X < 0
trigger1 = animelem = 6
trigger2 = animelem = 10
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 8,8
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 4
air.velocity = 4,-3

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 8
trigger4 = animelem = 10
value = S6,3

[State 750, Evil Tatsu Maki Grunt]
type = Playsnd
trigger1 = time = 1
value = S16,7

[State 1041, 6]
type = Velset
trigger1 = AnimElem = 12
y = 5
x = 2

[State 750, Land!]
type = ChangeState
trigger1 = Time > 9 && Pos Y >= 0
value = 751

;---------------------------------------------------------------------------
; Evil Hurricane Kick C
[Statedef 1002]
type = A
movetype = A
physics = N
poweradd = 70
ctrl = 0
anim = 992
juggle = 5

[State 750, Up we go.]
type = VelSet
trigger1 = time = 0
x = 5
y = -3.3  

[State 750, Straight]
type = VelSet
trigger1 = time = 9
x = 5
y = 0

[State 750, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 1100, 1]
type = HitDef
triggerall = P2Dist X >= 0
trigger1 = AnimElemTime(1) = 2
trigger2 = animelem = 4
trigger3 = animelem = 8
trigger4 = animelem = 12
attr = S, SA
animtype  = High
damage    = 25, 3
guardflag = MA
pausetime = 8,8
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -4,-3

[State 1100, 1]
type = HitDef
triggerall = P2Dist X < 0
trigger1 = animelem = 6
trigger2 = animelem = 10
trigger3 = animelem = 14
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 8,8
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
air.hittime = 25
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 5
air.velocity = 4,-3

[State 750, Whoosh!]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 8
trigger4 = animelem = 10
trigger5 = animelem = 12
trigger6 = animelem = 14
value = S6,3

[State 750, Evil Tatsu Maki Grunt]
type = Playsnd
trigger1 = time = 1
value = S16,7

[State 1041, 6]
type = Velset
trigger1 = AnimElem = 16
y = 5
x = 2

[State 750, Land!]
type = ChangeState
trigger1 = Time > 9 && Pos Y >= 0
value = 751

;---------------------------------------------------------------------------
; Evil Air Hurricane Kick A, B, and C
[Statedef 1003]
type = A
movetype = A
physics = A
poweradd = 70
ctrl = 0
anim = 993
juggle = 5

[State 751, Go!]
type = VelAdd
trigger1 = Time = 0
x = ifelse(Vel X < 0, -.75, .75)
y = -.5

[State 751, 1]
type = HitDef
triggerall = P2Dist X >= 0
trigger1 = animelem = 2
trigger2 = animelem = 6
trigger3 = animelem = 10
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -4,-2

[State 751, 1]
type = HitDef
triggerall = P2Dist X < 0
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
attr = S, SA
animtype  = High
damage    = 20, 3
guardflag = MA
pausetime = 11,11
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,5
guardsound = S1,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 4
air.velocity = 4,-2

[State 751, Whoosh!]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 8
trigger4 = animelem = 10
trigger5 = animelem = 12
value = S6,3

[State 750, Evil Tatsu Maki Grunt]
type = Playsnd
trigger1 = time = 1
value = S16,7

[State 751, Done!]
type = ChangeState
trigger1 = Animtime = 0
value = 51
ctrl = 1

;---------------------------------------------------------------------------
; Evil Dragon Punch_X
[Statedef 1010]
type = S
movetype = A
physics = N
anim = 770
poweradd = 70
velset = 0
ctrl = 0
juggle = 5

[State 720, Dust] 
type = Explod
trigger1 = (Time = 0) && (Pos Y >= 0)
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 720, VelSTOP]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 720, Sho!!]
type = PlaySnd
trigger1 = Time = 1
value = S16,8

[State 720, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = C, SA
damage    = 122,4
animtype  = Hard
getpower  = 10
givepower = 8
hitflag = MAF
guardflag = MA
pausetime = 11,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
air.juggle = 2
ground.type = High
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -15, -12
air.velocity = -15,-12
ground.cornerpush.veloff = -14
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 730, FLAME!]
type = Explod
trigger1 = (movehit = 1) && (numexplod(735) = 0)
anim = 735
id = 735
pos = 0,-120
postype = p2
bindtime = 100
bind = p2

[State 720, Rise!]
type = ChangeState
trigger1 = AnimTime = 0 && movecontact
value = 1011

[State 720, No movecontact?]
type = ChangeState
trigger1 = AnimTime = 0 && !movecontact
value = 1013

;---------------------------------------------------------------------------
; Evil Dragon Punch_X (Rising) [movehit]
[Statedef 1011]
type = A
movetype = A
physics = A
ctrl = 0
anim = 771
velset = 4,-6
juggle = 5

[State 741, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

[State 721, 0]
type = VelAdd
trigger1 = Time != 1
x = -.2

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 1012

;---------------------------------------------------------------------------
; All Evil Dragon Punches (Falling)
[Statedef 1012]
type = A
movetype = I
physics = N
anim = 772
ctrl = 0
velset = 0

[State 722, Gravity]
type = VelAdd
trigger1 = Time != 1000
y = .39

[State 722, Land now!]
type = ChangeState
trigger1 = pos y >= 0
value = 723

;---------------------------------------------------------------------------
; Evil Dragon Punch_X (Rising) [No Movehit]
[Statedef 1013]
type = A
movetype = A
physics = A
ctrl = 0
anim = 771
velset = 4,-6
juggle = 5

[State 741, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

[State 721, 0]
type = VelAdd
trigger1 = Time != 1
x = -.2

[State 721, 1]
type = HitDef
trigger1 = Time = 0
attr = A, SA
damage    = 122,4
animtype  = Light
getpower  = 10
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 9,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
air.juggle = 4
ground.type = High
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -15, -12
air.velocity = -15,-12
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 730, FLAME!]
type = Explod
trigger1 = (movehit = 1) && (numexplod(735) = 0)
anim = 735
id = 735
pos = 0,-120
postype = p2
bindtime = 100
bind = p2

[State 721, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 1012

;---------------------------------------------------------------------------
; Evil Dragon Punch_Y
[Statedef 1020]
type = S
physics = N
movetype = A
anim = 770
poweradd = 70
velset = 0
ctrl = 0
juggle = 5

[State 730, Dust] 
type = Explod
trigger1 = (Time = 0) && (Pos Y >= 0)
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 730, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 720, Sho!!]
type = PlaySnd
trigger1 = Time = 1
value = S16,8

[State 730, FLAME!]
type = Explod
trigger1 = (movehit = 1) && (numexplod(735) = 0)
anim = 735
id = 735
pos = 0,-120
postype = p2
bindtime = 100
bind = p2

[State 730, 3]
type = HitDef
trigger1 = Time = 0
attr = A, SA
damage    = 65,5
animtype  = Hard
getpower  = 10
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 11,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -2,-6
air.velocity = -2,-6
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
ground.cornerpush.veloff = -14
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 730, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 1021

;---------------------------------------------------------------------------
; Evil Dragon Punch_Y (Rising)
[Statedef 1021]
type = A
movetype = A
physics = A
anim = 771
ctrl = 0
velset = 6,-8.5
juggle = 5

[State 741, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

[State 731, 0]
type = VelAdd
trigger1 = Time != 1
x = -.2

[State 731, FLAME!]
type = EXPLOD
trigger1 = (movehit = 1) && (numexplod(735) = 0)
anim = 735
id = 735
pos = 0,-120
postype = p2
bindtime = 100
bind = p2

[State 731, 1]
type = HitDef
trigger1 = Time = 0
attr = A, SA
damage    = 65,5
animtype  = Light
getpower  = 10
givepower = 8
hitflag = MAF
guardflag = MA
pausetime = 9,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
air.juggle = 4
ground.type = High
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -15, -12.5
air.velocity = -15,-12.5
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400

[State 731, FALL!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 1012

;---------------------------------------------------------------------------
; Evil Dragon Punch_Z 
[Statedef 1030]
type = S
movetype = A
Physics = N
anim = 770
poweradd = 70
velset = 0
ctrl = 0
juggle = 5

[State 740, Sho!!]
type = PlaySnd
trigger1 = Time = 1
value = S16,8

[State 740, Dust] 
type = Explod
trigger1 = (Time = 0) && (Pos Y >= 0)
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 740, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0
z = 0

[State 740, 2]
type = HitDef
trigger1 = HitCount < 2 && moveguarded = 0
attr = S, SA
damage    = 45,6
animtype  = Hard
getpower  = 10
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 11,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -2,-8
air.velocity = -2,-8
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
ground.cornerpush.veloff = -11

[State 731, FLAME!]
type = EXPLOD
trigger1 = (movehit = 1) && (numexplod(736) = 0)
anim = 736
id = 736
pos = 20,-150
postype = p2
bindtime = 100
bind = p2

[State 740, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 1031

;---------------------------------------------------------------------------
; Evil Dragon Punch_Z (Rising)
[Statedef 1031]
type = A
movetype = A
physics = A
anim = 771
ctrl = 0
velset = 7,-11
juggle = 5

[State 741, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

[State 741, 0]
type = VelAdd
trigger1 = Time != 1 && Vel X > 0
x = -.2

[State 741, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
damage    = 58,6
animtype  = Hard
getpower  = IfElse(PrevStateno = 830, 0, 10)
givepower = IfElse(PrevStateno = 830, 10, 8)
hitflag = MAF
guardflag = MA
pausetime = 4,4
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 4
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -15, -12
air.velocity = -15,-12
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 741, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 1012

[State 731, FLAME!]
type = EXPLOD
trigger1 = (movehit = 1) && (numexplod(736) = 0)
anim = 736
id = 736
pos = 20,-150
postype = p2
bindtime = 100
bind = p2

;---------------------------------------------------------------------------
; Asura Senkuu Forward Punch Teleport (Begin)
[Statedef 1040]
type = S
movetype = I
physics = N
anim = 1000
ctrl = 0
velset = 1.5,0
poweradd = 70

[State 1040, Grunt!]
type = Playsnd
trigger1 = Time = 0
value = S16,9

[State 1040, Don't get hit now]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1040, No pushing for you!]
type = PlayerPush
trigger1 = 1
value = 0

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
length = 15
PalBright = 0,0,0
PalContrast = 120,120,220
PalMul = 1,1,1
trans = add1

[State 1040, Back!]
type = Velset
trigger1 = AnimElem = 5
x = -1.5

[State 1040, Stop briefly]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 1040, Let's Warping!]
type = ChangeState
trigger1 = AnimTime = 0
value = 1041

;---------------------------------------------------------------------------
; Asura Senkuu Forward Punch Teleport (Let's Warping!)
[Statedef 1041]
type = S
movetype = I
physics = N
anim = 1001
ctrl = 0
sprpriority = 2
poweradd = 0
velset = 12,0

[State 1041, That Warping Noise]
type = PlaySnd
trigger1 = Time = 0
value = S16,1

[State 1041, Some Friction]
type = VelMul
trigger1 = Vel X > 0 && Time > 14
trigger2 = Vel X < 0 && Time > 14
x = .93

[State 1040, Don't get hit now]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1040, No pushing for you!]
type = PlayerPush
trigger1 = 1
value = 0

[State 1041, Don't turn your back- it's rude!]
type = Turn
trigger1 = P2Dist X < 0

[State 1041, All Done]
type = ChangeState
trigger1 = Time = 35 || FrontEdgeBodyDist = 0
value = 1042

;---------------------------------------------------------------------------
; Asura Senkuu Forward Punch Teleport (The End)
[Statedef 1042]
type = S
movetype = I
physics = N
anim = 1002
ctrl = 0
sprpriority = 2
poweradd = 0
velset = 0,0

[State 1042, Afterimages...GO AWAY!]
type = AfterImageTime
trigger1 = 1
time = 0

[State 1042, Back to Standing with you!]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Asura Senkuu Forward Kick Teleport (Begin)
[Statedef 1050]
type = S
movetype = I
physics = N
anim = 1000
ctrl = 0
velset = 1.5,0
poweradd = 70

[State 1040, Grunt!]
type = Playsnd
trigger1 = Time = 0
value = S16,9

[State 1040, Don't get hit now]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1040, No pushing for you!]
type = PlayerPush
trigger1 = 1
value = 0

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
length = 15
PalBright = 0,0,0
PalContrast = 120,120,220
PalMul = 1,1,1
trans = add1

[State 1040, Back!]
type = Velset
trigger1 = AnimElem = 5
x = -1.5

[State 1040, Stop briefly]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 1040, Let's Warping!]
type = ChangeState
trigger1 = AnimTime = 0
value = 1051

;---------------------------------------------------------------------------
; Asura Senkuu Forward Kick Teleport (Let's Warping!)
[Statedef 1051]
type = S
movetype = I
physics = N
anim = 1001
ctrl = 0
sprpriority = 2
poweradd = 0
velset = 10,0

[State 1041, That Warping Noise]
type = PlaySnd
trigger1 = Time = 0
value = S16,1

[State 1041, Some Friction]
type = VelMul
trigger1 = Vel X > 0 && Time > 4
trigger2 = Vel X < 0 && Time > 4
x = .93

[State 1040, Don't get hit now]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1040, No pushing for you!]
type = PlayerPush
trigger1 = 1
value = 0

[State 1041, Don't turn your back- it's rude!]
type = Turn
trigger1 = P2Dist X < 0

[State 1041, All Done]
type = ChangeState
trigger1 = Time = 25 || FrontEdgeBodyDist = 0
value = 1042

;---------------------------------------------------------------------------
; Asura Senkuu Back Punch Teleport (Begin)
[Statedef 1060]
type = S
movetype = I
physics = N
anim = 1000
ctrl = 0
velset = -1.5,0
poweradd = 70

[State 1040, Grunt!]
type = Playsnd
trigger1 = Time = 0
value = S16,9

[State 1040, Don't get hit now]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1040, No pushing for you!]
type = PlayerPush
trigger1 = 1
value = 0

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
length = 15
PalBright = 0,0,0
PalContrast = 120,120,220
PalMul = 1,1,1
trans = add1

[State 1040, Forward!]
type = Velset
trigger1 = AnimElem = 5
x = 1.5

[State 1040, Stop briefly]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 1040, Let's Warping!]
type = ChangeState
trigger1 = AnimTime = 0
value = 1061

;---------------------------------------------------------------------------
; Asura Senkuu Back Punch Teleport (Let's Warping!)
[Statedef 1061]
type = S
movetype = I
physics = N
anim = 1001
ctrl = 0
sprpriority = 2
poweradd = 0
velset = -12,0

[State 1041, That Warping Noise]
type = PlaySnd
trigger1 = Time = 0
value = S16,1

[State 1041, Some Friction]
type = VelMul
trigger1 = Vel X < 0 && Time > 14
x = .93

[State 1040, Don't get hit now]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1040, No pushing for you!]
type = PlayerPush
trigger1 = 1
value = 0

[State 1041, All Done]
type = ChangeState
trigger1 = Time = 35 || FrontEdgeBodyDist = 0
value = 1042

;---------------------------------------------------------------------------
; Asura Senkuu Forward Kick Teleport (Begin)
[Statedef 1070]
type = S
movetype = I
physics = N
anim = 1000
ctrl = 0
velset = -1.5,0
poweradd = 70

[State 1040, Grunt!]
type = Playsnd
trigger1 = Time = 0
value = S16,9

[State 1040, Don't get hit now]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1040, No pushing for you!]
type = PlayerPush
trigger1 = 1
value = 0

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
length = 15
PalBright = 0,0,0
PalContrast = 120,120,220
PalMul = 1,1,1
trans = add1

[State 1040, Forward!]
type = Velset
trigger1 = AnimElem = 5
x = 1.5

[State 1040, Stop briefly]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 1040, Let's Warping!]
type = ChangeState
trigger1 = AnimTime = 0
value = 1071

;---------------------------------------------------------------------------
; Asura Senkuu Forward Kick Teleport (Let's Warping!)
[Statedef 1071]
type = S
movetype = I
physics = N
anim = 1001
ctrl = 0
sprpriority = 2
poweradd = 0
velset = -10,0

[State 1041, That Warping Noise]
type = PlaySnd
trigger1 = Time = 0
value = S16,1

[State 1041, Some Friction]
type = VelMul
trigger1 = Vel X < 0 && Time > 4
x = .93

[State 1040, Don't get hit now]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1040, No pushing for you!]
type = PlayerPush
trigger1 = 1
value = 0

[State 1041, All Done]
type = ChangeState
trigger1 = Time = 25 || FrontEdgeBodyDist = 0
value = 1042

;---------------------------------------------------------------------------
; Evil Ryu Turns Mode Introduction
[Statedef 1080]
type = S
physics = N
ctrl = 0
anim = 160
velset = 0,0

[State 192, Remember Pos X]
type = VarSet
trigger1 = Time = 0
var(10) = Floor(Pos X)

[State 192, 1]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 196, 3]
type = PosAdd
trigger1 = Time = 0
persistent = 0
x = -160
y = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 5
value = 1001

[State 1041, That Warping Noise]
type = PlaySnd
trigger1 = Time = 5
value = S16,1

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 5
time = 999
TimeGap = 1
FrameGap = 4
length = 15
PalBright = 0,0,0
PalContrast = 120,120,220
PalMul = 1,1,1
trans = add1

[State 192, Gogogo!]
type = VelSet
trigger1 = Time = 5
x = 10
y = 0

[State 192, Teleport Friction]
type = VelAdd
trigger1 = Time >= 2 && Anim != 970
x = .93

[State 191, Intro] 
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, Teleport End]
type = PosSet
trigger1 = Time = 15
x = Var(10)
y = 0

[State 191, Teleport End 2]
type = VelSet
trigger1 = Time = 15
x = 0
y = 0

[State 191, Landing and Taunt Animation]
type = ChangeAnim
trigger1 = Time = 15
value = 970
persistent = 0

[State 1042, Afterimages...GO AWAY!]
type = AfterImageTime
trigger1 = Time = 15
time = 0

[State 990, Hm!]
type = Playsnd
triggerall = Anim = 970
trigger1 = AnimElem = 4
persistent = 0
value = 16,9

[State 990, Smash!]
type = Playsnd
triggerall = Anim = 970
trigger1 = AnimElem = 5
persistent = 0
value = 16,2

[State 990, Shake!]
type = EnvShake
triggerall = Anim = 970
Trigger1 = AnimElem = 5,-1
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 10

[State 191, To Standing]
type = ChangeState
trigger1 = (Anim = 970) && (AnimTime = 0)
value = 0

;---------------------------------------------------------------------------
; Evil Ryu Intro 3 - Let's Stomping!
[Statedef 1090]
type = S
ctrl = 0
anim = 1010
velset = 0,0

[State 191, 1] ;Freeze animation until PreIntro is over
type = ChangeAnim
trigger1 = RoundState = 0
value = 1010

[State 990, Messatsu!]
type = Playsnd
trigger1 = AnimElem = 5
persistent = 0
value = 16,3

[State 990, Smash!]
type = Playsnd
trigger1 = AnimElem = 5
persistent = 0
value = 16,2

[State 990, Shake!]
type = EnvShake
Trigger1 = AnimElem = 5,-1
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 10

[State 191, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Evil Ryu Intro 4 - Classic SFA2 Intro!
[Statedef 1110]
type = S
ctrl = 0
anim = 1030
velset = 0,0

[State 191, To Standing]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Messatsu Gou Hadou!
[Statedef 1120]
type = S
movetype = A
Physics = S
anim = 1040
velset = 0,0
ctrl = 0
juggle = 0

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 0

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 740, Messatsu!]
type = PlaySnd
trigger1 = AnimElem = 4
value = S16,3

[State 700, Eeeeeeevil!]
type = PlaySnd
trigger1 = AnimElem = 20
value = S16,9

[State 990, Smash!]
type = Playsnd
trigger1 = Time = 17
persistent = 0
value = 16,2

[State 990, Shake!]
type = EnvShake
Trigger1 = Time = 16
persistent = 0
time = 20
ampl = -5
freq = 100
phase = 10

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 17)
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
sprpriority = -5
scale = 1.08,1.08

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 17
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 17
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 17
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 17
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 17
pos = -5,20
anim = S793
time = 34
sound = S9,0
movetime = 34
poweradd = -1000
p2defmul = 1.2

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 790, Evil Red Stuff]
type = Explod
trigger1 = Time = 17
anim = 951
postype = P1
ID = 952
pos = 0,0
removetime = 34
bindtime = 999
supermove = 1
removeongethit = 1
sprpriority = 5
ownpal = 1

[State 740, Feedback!] 
type = Explod
trigger1 = AnimElem = 20 
anim = 803
ID = 803
pos = 0,0
postype = p1
sprpriority = 1
bindtime = 1
removetime = -1
shadow = -1,0,0

[State 740, 2]
type = Projectile
triggerall = P2movetype = H && P2statetype != A
trigger1 = Time = 20
projanim = 805
projremoveanim = 805
projpriority = 5
projhits = 1
projmisstime = 0
attr = S, HA
damage    = 0,0
animtype  = Light
hitflag = MAf
guardflag = MA
pausetime = 0,20
sparkno = -1
numhits = 0
ground.type = High
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = 0,0
air.velocity = 0,0
fall = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 780, Let's spawning!]
type = Helper
trigger1 = AnimElem = 20
helpertype = normal
name = "Shinkuu Hadoken"
ID = 781
pos = 22,0
postype = p1
stateno = 781
sprpriority = 3

[State 740, 2]
type = Projectile
triggerall = Time > 60 && Time < 80
trigger1 = command = "x" || command = "y" || command = "z" || command = "a" || command = "b" || command = "c"
projanim = 805
projremoveanim = 805
projpriority = 5
projremovetime = 2
projhits = 1
projmisstime = 0
attr = S, HA
damage    = 5,1
animtype  = Hard
hitflag = MAf
guardflag = MA
pausetime = 0,0
sparkno = -1
hitsound   = S12,14
guardsound = S1,0
ground.type = Low
air.type = Low
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -1,-2
air.velocity = -1,-2
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 780, End]
type = Changestate
trigger1 = Time = 128
value = 1121

;---------------------------------------------------------------------------
; Messatsu Gou Hadou (End)!
[Statedef 1121]
type = S
movetype = I
Physics = S
anim = 801
velset = 0,0
ctrl = 0

[State 870, Super BG gone!]
type = RemoveExplod
trigger1 = NumprojID(880) = 0
ID = 792

[State 782, To Standing]
type = Changestate
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Messatsu Gou Shoryu (Begin)
[Statedef 1130]
type = S
movetype = A
Physics = N
anim = 1050
velset = 0,0
ctrl = 0
juggle = 0

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 740, Messatsu!]
type = PlaySnd
trigger1 = Time = 1
value = S16,3

[State 790, Eeeeevil!]
type = PlaySnd
trigger1 = Time = 4
value = S16,7

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 1)
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
sprpriority = -5
scale = 1.08,1.08

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 1
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 1
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 1
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 1
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 1
pos = 35,15
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 790, Evil Red Stuff]
type = Explod
trigger1 = Time = 1
anim = 955
postype = P1
ID = 952
pos = 0,0
removetime = 34
bindtime = 999
supermove = 1
removeongethit = 1
sprpriority = 5
ownpal = 1

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 2100, 1]
type = VelSet
trigger1 = 1
x = 7

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
attr = S, HA
damage    = 20,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -1.3,0
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 731, FLAME!]
type = EXPLOD
trigger1 = (movehit = 1) && (numexplod(736) = 0)
anim = 736
id = 736
pos = 20,-150
postype = p2
bindtime = 100
bind = p2

[State 740, Temporary Invincibility]
type = Nothitby
trigger1 = Time >= 1
value = SCA, AA, AT, AP, HA, HT, HP, SA, ST, SP
time = 1
ignorehitpause = 1

[State 740, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 1131

;---------------------------------------------------------------------------
; Messatsu Gou Shoryu (Part 1 - Rise)
[Statedef 1131]
type = S
movetype = A
physics = S
anim = 1051
ctrl = 0
velset = 7, 0
juggle = 5

[State 2100, 1]
type = VelSet
trigger1 = 1
x = 7

[State 740, Temporary Invincibility]
type = Nothitby
trigger1 = 1
value = SCA, AA, AT, AP, HA, HT, HP, SA, ST, SP
time = 1
ignorehitpause = 1

[State 741, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 1
attr = S, HA
damage    = 20,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 4,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -1.3,0
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 741, To Falling State]
type = ChangeState
trigger1 = AnimTime = 0
value = 1132

[State 731, FLAME!]
type = EXPLOD
trigger1 = (movehit = 1) && (numexplod(736) = 0)
anim = 736
id = 736
pos = 20,-150
postype = p2
bindtime = 100
bind = p2

;---------------------------------------------------------------------------
; Messatsu Gou Shoryu (Part 1 - Fall)
[Statedef 1132] 
type = A
movetype = I
physics = S
anim = 1052
ctrl = 0

[State 740, Temporary Invincibility]
type = Nothitby
trigger1 = AnimElem = 1
value = SCA, AA, AT, AP, HA, HT, HP, SA, ST, SP
time = 1
ignorehitpause = 1

[State 742, Land (part 2)]
type = ChangeState
trigger1 = Animtime = 0
value = 1133

;---------------------------------------------------------------------------
; Messatsu Gou Shoryu (Part 2)
[Statedef 1133]
type = S
movetype = A
Physics = N
anim = 1050
velset = 7,0
ctrl = 0
juggle = 0

[State 790, Eeeeevil!]
type = PlaySnd
trigger1 = Time = 4
value = S16,7

[State 2100, 1]
type = VelSet
trigger1 = 1
x = 7

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
attr = S, HA
damage    = 30,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -1.3,0
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 731, FLAME!]
type = EXPLOD
trigger1 = (movehit = 1) && (numexplod(736) = 0)
anim = 736
id = 736
pos = 20,-150
postype = p2
bindtime = 100
bind = p2

[State 740, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 1134

;---------------------------------------------------------------------------
; Messatsu Gou Shoryu (Part 2 - Rise)
[Statedef 1134]
type = S
movetype = A
physics = S
anim = 1051
ctrl = 0
velset = 7,0
juggle = 5

[State 2100, 1]
type = VelSet
trigger1 = 1
x = 7

[State 741, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

;[State 741, 0]
;type = VelAdd
;trigger1 = Time != 1
;x = -.4

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 4
attr = S, HA
damage    = 31,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 4,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -1.3,0
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 741, To Falling State]
type = ChangeState
trigger1 = AnimTime = 0
value = 1135

[State 731, FLAME!]
type = EXPLOD
trigger1 = (movehit = 1) && (numexplod(736) = 0)
anim = 736
id = 736
pos = 20,-150
postype = p2
bindtime = 100
bind = p2

;---------------------------------------------------------------------------
; Messatsu Gou Shoryu (Part 2 - Fall)
[Statedef 1135] 
type = A
movetype = I
physics = S
anim = 1052
ctrl = 0

[State 742, Land (part 3)]
type = ChangeState
trigger1 = AnimTime = 0
value = 1136

;---------------------------------------------------------------------------
; Messatsu Gou Shoryu (Part 3)
[Statedef 1136]
type = S
movetype = A
Physics = N
anim = 1050
velset = 0,0
ctrl = 0
juggle = 0

[State 720, Sho!!]
type = PlaySnd
trigger1 = Time = 4
value = S16,8

[State 2100, 1]
type = VelSet
trigger1 = animelem = 1
x = 7.5

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 4
attr = C, HA
damage    = 32,5
animtype  = Hard
getpower  = 0
givepower = 8
hitflag = MAf
guardflag = MA
pausetime = 6,6
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -4,0
air.velocity = -1.3,0
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 731, FLAME!]
type = EXPLOD
trigger1 = (movehit = 1) && (numexplod(736) = 0)
anim = 736
id = 736
pos = 20,-150
postype = p2
bindtime = 100
bind = p2

[State 740, Rise!]
type = ChangeState
trigger1 = AnimTime = 0
value = 1137

;---------------------------------------------------------------------------
; Messatsu Gou Shoryu (Part 3 - Actually Rising!)
[Statedef 1137]
type = A
movetype = A
physics = A
anim = 1053
ctrl = 0
velset = 8,-9
juggle = 5

[State 741, WHOOSH!]
type = Playsnd
trigger1 = Time = 0
trigger2 = AnimElem = 1
trigger3 = Time = 1
value = S100,0

[State 741, 0]
type = VelAdd
trigger1 = Time != 1
x = -.4

[State 741, 1]
type = HitDef
trigger1 = AnimElem = 1
attr = A, HA
damage    = 55, 4
animtype  = Light
getpower  = 0
givepower = 8
hitflag = MAF
guardflag = MA
pausetime = 4,9
sparkno = 3
sparkxy = -15,-59
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 4
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -3.8, -14.5
air.velocity = -3.8,-14.5
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 741, Fall!]
type = ChangeState
trigger1 = Vel Y >= 0
value = 1138

[State 731, FLAME!]
type = EXPLOD
trigger1 = (movehit = 1) && (numexplod(736) = 0)
anim = 736
id = 736
pos = 20,-150
postype = p2
bindtime = 100
bind = p2

;---------------------------------------------------------------------------
; Messatsu Gou Shoryu (Final part)
[Statedef 1138] 
type = A
movetype = I
physics = N
anim = 772
ctrl = 0
velset = 0

[State 742, Gravity]
type = VelAdd
trigger1 = time != 1000
y = .39

[State 742, Land (Normal DP Land state)]
type = ChangeState
trigger1 = pos Y >= 0
value = 723

;---------------------------------------------------------------------------
; Tenma Gou Shinkuu Ha!
[Statedef 1140]
type = A
movetype = A
Physics = N
anim = 1070
ctrl = 0
juggle = 2
velset = Vel X / 2, Vel Y / 2

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 0
time = 999
TimeGap = 1
FrameGap = 4
PalContrast = 75,75,255
PalBright = 0,0,0
PalAdd = 0,0,0
PalMul = .75,.75,.75
trans = add1

[State 780, Pos]
type = PosAdd
trigger1 = Time = 0 && Prevstateno = [1000,1003]
trigger2 = Time = 0 && Prevstateno = 911
y = 20

[State 780, Vel X Tracker]
type = VarSet
trigger1 = Time = 0
var(11) = IfElse(Vel X > 0, 1, 0)

[State 780, VelSet]
type = VelSet
trigger1 = Time = 4
x = .05
y = ifelse(Var(11) = 1, .05, -.05)

[State 780, SprPriority]
type = Sprpriority
trigger1 = 1
value = 0

[State 740, Tenma!]
type = PlaySnd
trigger1 = Time = 4
value = S16,10

[State 790, Huh!]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
value = S0,4

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 4)
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
sprpriority = -5
scale = 1.08,1.08

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 4
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 4
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 4
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 4
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 4
pos = 25,-25
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 790, Evil Red Stuff]
type = Explod
trigger1 = Time = 4
anim = 954
postype = P1
ID = 952
pos = 0,0
removetime = 34
bindtime = 999
supermove = 1
removeongethit = 1
sprpriority = 5
ownpal = 1

[State 701, 1]
type = Projectile
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
projanim = 980
projhitanim = 721
removeanim = 722
projID = 725
offset = 15,ifelse(Random < 255, -67, ifelse(Random < 255, -17, -47))
velocity = 5.5, 0
sparkno = 3
sparkxy = 60,-57
; HitDef part of projectile info
attr = S, SP
damage    = 20,2
animtype = Hard
guardflag = MA
pausetime = 0,5
getpower = 0
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2,-6
air.animtype = Back
air.velocity = 0,ifelse(P2Dist Y > 0,-4,-2);-2
air.fall = 1
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 701, 1]
type = Projectile
triggerall = AnimElemtime(3) > 0 && AnimElemtime(5) < 0
trigger1 = command = "x" || command = "y" || command = "z"
trigger2 = command = "a" || command = "b" || command = "c"
projanim = 980
projhitanim = 721
removeanim = 722
projID = 725
offset = 15,ifelse(Random < 255, -67, -17)
velocity = 5.5, 0
sparkno = 3
sparkxy = 60,-57
; HitDef part of projectile info
attr = S, SP
damage    = 2,1
animtype = Hard
guardflag = MA
pausetime = 0,10
getpower = 0
givepower = 15,8
hitsound   = S1,3
guardsound = S1,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2,-6
air.animtype = Back
air.velocity = 0,ifelse(P2Dist Y > 0,-4,-1);-2
air.fall = 1
palfx.time = 50
palfx.add = 0,32,32
palfx.mul = 192,192,400
fall = 1
fall.recover = 0
yaccel = Const(movement.yaccel)
fall.yvelocity = -.2

[State 712, Whoops!]
type = PosSet
trigger1 = Pos Y >= 25
y = 25

[State 701, WHOOSH!]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
value = S8,2

[State 700, Big Fireball Noise :P]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 5
value = S12,4

[State 700, Finished!]
type = Changestate
trigger1 = Time = 210
value = 1141

;---------------------------------------------------------------------------
; Tenma Gou Shinkuu Ha! (End)
[Statedef 1141]
type = A
movetype = A
Physics = N
anim = 1071
ctrl = 0

[State 700, Job's Done!]
type = Changestate
trigger1 = Time = 25
value = 51

;---------------------------------------------------------------------------
; A Demon tat is Raging.
[Statedef 1150]
type = S
movetype = I
Physics = N
anim = 1080
velset = 0,0
ctrl = 0
juggle = 0

[State 1041, That Warping Noise]
type = PlaySnd
trigger1 = Time = 7
value = S16,1

[State 1040, Afterimages]
type = AfterImage
trigger1 = time = 7
time = 999
TimeGap = 1
FrameGap = 4
length = 15
PalBright = 0,0,0
PalContrast = 120,120,220
PalMul = 1,1,1
trans = add1

[State 790, Super BG]
type = Explod
trigger1 = (NumExplod(792) = 0) && (Time = 6)
anim = 792
id = 792
bindtime = 9999
removetime = -1
removeongethit = 1
postype = Back
pos = 0, 0
sprpriority = -5
scale = 1.08,1.08

[State 790, Super Pause BG]
type = Explod
trigger1 = time = 6
anim = 790
postype = left
ID = 790
pos = 0,0
supermovetime = 9999
removetime = 34
bindtime = 9999
sprpriority = -4

[State 790, BG Black]
type = EnvColor
trigger1 = time = 6
value = 0,0,0
under = 1
;supermovetime = 9999
time = 34

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 6
anim = 791
vel = 20,0
pos = -140,-50
postype = back
sprpriority = -2
removetime = 6
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Ryu] 
type = Explod
trigger1 = Time = 6
anim = 794
vel = .5,0
pos = -20,-50
postype = back
sprpriority = -2
bindtime = 1
supermove = 1
shadow = -1, 0, 0

[State 790, Super Pause!]
type = SuperPause
trigger1 = Time = 6
pos = 0,-40
anim = S793
time = 34
sound = S9,0
poweradd = -1000
p2defmul = 1.2

[State 740, Dust] 
type = Explod
trigger1 = Time = 0
anim = 730
pos = -10,10
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
shadow = -1,0,0

[State 790, Evil Red Stuff]
type = Explod
trigger1 = Time = 6
anim = 957
postype = P1
ID = 952
pos = 0,0
removetime = 34
bindtime = 999
supermove = 1
removeongethit = 1
sprpriority = 5
ownpal = 1

[State 1150, Go!]
type = VelSet
trigger1 = Time = 7
x = 5

[State 1150, Change to Attacking]
type = StatetypeSet
trigger1 = P2BodyDist X < 5
movetype = A

[State 1150, Change to Non-Attacking]
type = StatetypeSet
trigger1 = P2BodyDist X > 5
movetype = I

[State 1150, Let's Hitting!]
type = HitDef
trigger1 = AnimElem = 3
getpower = 0
attr = S, HT
hitflag = M
guardflag = 
priority = 2, Miss
sparkno = -1
snap = 50,0
guard.sparkno = -1
sprpriority = 2
hitsound = S1,9
p1facing = 1
p2facing = 1
p1stateno = 1151
p2stateno = 1152
fall = 1
fall.recover = 0

[State 1150, Afterimages...go away!]
type = Afterimagetime
trigger1 = Time = 39 || FrontEdgeBodyDist = 0
time = 1

[State 1150, You missed you loser.]
type = ChangeState
trigger1 = Time = 40 || FrontEdgeBodyDist = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; A Demon tat is Raging (I hit, I hit!)
[Statedef 1151]
type = S
movetype = A
Physics = N
anim = 1081
velset = 0,0
ctrl = 0
juggle = 0

[State 1150, Afterimages...go away!]
type = Afterimagetime
trigger1 = Time = 0
time = 1

[State 1150, Super BG gone!]
type = RemoveExplod
trigger1 = Time = 20
ID = 792

[State 1150, Completely Dark!]
type = VarSet
trigger1 = Time = 0
var(18) = 0

[State 1150, Pose Randomizer]
type = VarRandom
trigger1 = Time = 0
v = 19
range = 1,2

[State 1150, Dark to Light!]
type = VarAdd
trigger1 = Time = [25,72]
var(18) = 4

[State 1150, Dark to Light Part 2!]
type = EnvColor
trigger1 = Time = [20,72]
value = var(18),var(18),var(18)
time = 1

[State 1150, Add Hits!]
type = HitAdd
triggerall = Time = [30,72]
trigger1 = (Time%3) = 0
value = 1

[State 1041, Hitting Noise]
type = PlaySnd
triggerall = Time = [30,72]
trigger1 = (Time%3) = 0
value = S1,3

[State 1150, HitSparks!]
type = Explod
anim = F3
triggerall = Time = [30,72]
trigger1 = (Time%3) = 0
postype = P1
pos = 30,-60
ownpal = 1
random = 100,100
ontop = 1

[State 1150, Done!  POSE!]
type = ChangeState
trigger1 = Time = 75
value = 1153

;---------------------------------------------------------------------------
; A Demon tat is Raging (I got hit!  I got hit!)
[Statedef 1152]
type = S
movetype = H
Physics = N
velset = 0,0
ctrl = 0

[State 1152, Sit here]
type = ChangeAnim2
trigger1 = Time = 0
value = 1088

[State 1152, OUCH!]
type = LifeAdd
trigger1 = Time = 75
value = -400

[State 1152, End]
type = SelfState
triggerall = alive
trigger1 = Time = 180
value = 5120

[State 1152, Dead]
type = SelfState
triggerall = !alive
trigger1 = Time = 180
value = 5150

;---------------------------------------------------------------------------
; A Demon tat is Raging (Pose!)
[Statedef 1153]
type = S
movetype = A
Physics = N
anim = ifelse(Var(19) = 1, 1082, 1084)
velset = 0,0
ctrl = 0
juggle = 0

[State 1041, That Evil Raging Demon Noise]
type = PlaySnd
trigger1 = Time = 0
value = S16,12

[State 790, Fade to Bright!]
type = Explod
trigger1 = time = 0
anim = 1087
postype = left
ID = 1087
pos = 0,0
removetime = -2
bindtime = 9999
sprpriority = -4

[State 790, Icon of DARKNESS!]
type = Explod
trigger1 = time = 0
anim = 1086
postype = left
ID = 1086
pos = 150,130
removetime = 82
bindtime = 9999
sprpriority = -3

[State 790, BG Black]
type = EnvColor
trigger1 = time = 0
value = 0,0,0
under = 1
time = 12

[State 1154, No Foreground]
type = Assertspecial
trigger1 = 1
flag = NoFG

[State 790, BG White]
type = EnvColor
trigger1 = time = 12
value = 255,255,255
under = 1
time = 70

[State 790, Evil Red Stuff]
type = Explod
trigger1 = Time = 0 && Anim = 1084
anim = 958
postype = P1
ID = 952
pos = 0,0
removetime = 82
bindtime = 999
supermove = 1
removeongethit = 1
sprpriority = 5
ownpal = 1

[State 1155, End]
type = ChangeState
trigger1 = Time = 90
value = 1155

;---------------------------------------------------------------------------
; A Demon tat is Raging (End Both Poses)
[Statedef 1155]
type = S
movetype = A
Physics = N
anim = ifelse(Var(19) = 1, 1083, 1085)
velset = 0,0
ctrl = 0

[State 1155, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Evil Akuma Dive Kick - Number 1 (Kick back! Edition)
[Statedef 1160]
type = A
movetype = A
Physics = N
anim = 1100
velset = 0,0
ctrl = 0

[State 1160, Go!]
type = VelSet
trigger1 = Time = 13
x = 6.5
y = 11

[State 1160, Ho!]
type = PlaySnd
trigger1 = Time = 13
value = S16,5

[State 1160, WHOOSH!]
type = PlaySnd
trigger1 = Time = 13
value = S6,3

[State 1060, Afterimages]
type = AfterImage
trigger1 = time = 13
time = 999
TimeGap = 1
FrameGap = 4
length = 15
PalBright = 0,0,0
PalContrast = 120,120,220
PalMul = 1,1,1
trans = add1

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = A, SA
damage    = 50,5
animtype  = Hard
getpower  = 20,10
givepower = 10,30
hitflag = MAfd
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -15,-39
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 25
ground.velocity = -2,0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 1155, End]
type = ChangeState
trigger1 = Pos Y >= 0
value = 1162

[State 630, 3]
type = Changestate
trigger1 = Movecontact = 1
value = 1161

;---------------------------------------------------------------------------
;Kick Back Knocked Back
[Statedef 1161]
type = A
physics = A
ctrl = 0
anim = 43
velset = -3,-6

[State 1060, Away with ye Afterimages]
type = AfterImageTime 
trigger1 = 1
time = 1

[State 630, 3]
type = Changestate
trigger1 = command = "evildive"
value = 1163

;---------------------------------------------------------------------------
; Dive Kick Land
[Statedef 1162]
type    = S
physics = S
ctrl = 0
anim = 47

[State 723, Landing Dust]
type = Explod
trigger1 = Time = 1
persistent = 0
anim = 733
ID = 733
pos = -65,-3
postype = p1
sprpriority = -1
bindtime = 1

[State 1060, Away with ye Afterimages]
type = AfterImageTime 
trigger1 = 1
time = 1

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S12,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = Turn
trigger1 = P2Dist X < 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Evil Akuma Dive Kick - Number 2 (Crossup Edition)
[Statedef 1163]
type = A
movetype = A
Physics = N
anim = 1100
velset = 0,0
ctrl = 0

[State 1160, Go!]
type = VelSet
trigger1 = Time = 13
x = 6.5
y = 11

[State 1160, Crossup!]
type = PlayerPush
trigger1 = 1
value = 0

[State 1160, HOO!]
type = PlaySnd
trigger1 = Time = 13
value = S16,4

[State 1160, WHOOSH!]
type = PlaySnd
trigger1 = Time = 13
value = S6,3

[State 1060, Afterimages]
type = AfterImage
trigger1 = time = 13
time = 999
TimeGap = 1
FrameGap = 2
length = 10
PalBright = 32,5,5
PalContrast = 232,0,0
PalMul = 1,1,1
trans = add1

[State 790, Special Sound]
type = PlaySnd
trigger1 = time = 7
value = S14,1

[State 820, red Flash!]
type = PalFX
trigger1 = time = 7
time = 5
add = 232,0,0
mul = 300,192,192
sinadd = 32,5,5,8

[State 740, 2]
type = HitDef
trigger1 = AnimElem = 3
attr = A, SA
damage    = 70,5
animtype  = Hard
getpower  = 10,5
givepower = 30,50
hitflag = MAfd
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -15,-39
hitsound   = S1,3
guardsound = S1,0
ground.type = High
air.juggle = 2
ground.slidetime = 4
ground.hittime  = 27
ground.velocity = -2,0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0

[State 1155, End]
type = ChangeState
trigger1 = Pos Y >= 0
value = 1162

;---------------------------------------------------------------------------
; My old, OLD Super Jump Start
[Statedef 55650]
physics = S
type = S
anim = 40
ctrl = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, Super Jump Mode Initialize]
type = VarSet
trigger1 = 1
var(21) = 1

[State 40, Aerial Rave Mode Initialize]
type = VarSet
trigger1 = 1
var(20) = 1

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -15

[State 40, 5]
type = VelSet
trigger1 = (AnimTime = 0) && (prevstateno = 100) && (sysvar(1) = 1)
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 55651
ctrl = 1

;---------------------------------------------------------------------------
; Actual JUMPING!
[Statedef 55651]
physics = A
type = A
anim = 41
ctrl = 1

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 52, Turn!]
type = Turn
trigger1 = P2Dist X < 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 5400, 2]
type = PlaySnd
trigger1 = Time = 0
value = S8,1

[State 5400, 5]
type = VelAdd
trigger1 = command = "holdback"
trigger1 = command != "holdfwd"
trigger1 = Time >= 0
trigger1 = Vel X <= 0
trigger1 = Vel X > -2
x = -.05

[State 5400, 5]
type = VelAdd
trigger1 = command = "holdfwd"
trigger1 = command !="holdback"
trigger1 = Vel X < 5
trigger1 = Time >= 0
x = .10

[State 5400, 5]
type = VelSet
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = Time >= 0
trigger1 = Vel X = 0
x = 0

[State 710,1] ; Super Jump "lines"
type = explod
trigger1 = time = 1
anim = 740
postype = p1
pos = 0,-20
bindtime = 4
sprpriority = 2
ownpal = 1

[State 710, 1]
type = explod
trigger1 = time = 1
anim = 741
postype = p1
pos = 0,-20
bindtime = 7
sprpriority = 2
ownpal = 1

[State 710, 1]
type = explod
trigger1 = time = 1
anim = 742
postype = p1
pos = 0,-20
bindtime = 10
sprpriority = 2
ownpal = 1

[State 710, 1]
type = explod
trigger1 = time = 1
anim = 743
postype = p1
pos = 0,-20
bindtime = 13
sprpriority = 2
ownpal = 1

[State 710, 1]
type = explod
trigger1 = time = 16
anim = 744
postype = p1
pos = 0,-20
bindtime = 1
sprpriority = 2
ownpal = 1

[State 710, 1]
type = explod
trigger1 = time = 19
anim = 745
postype = p1
pos = 0,-20
bindtime = 1
sprpriority = 2
ownpal = 1

[State 710, 1]
type = explod
trigger1 = time = 22
anim = 746
postype = p1
pos = 0,-20
bindtime = 1
sprpriority = 2
ownpal = 1

[State 850, Super Jump Dust]
type = Explod
trigger1 = Time = 0
persistent = 0
anim = 731
pos = 0,29
postype = p1
sprpriority = 4
bindtime = 2

[State 850, dust1]
type = Explod
trigger1 = Time = 3
persistent = 0
anim = 732
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 3

[State 850, dust2]
type = Explod
trigger1 = Time = 6
persistent = 0
anim = 732
pos = -40,-40
postype = p1
sprpriority = 4
bindtime = 1

[State 850, dust3]
type = Explod
trigger1 = Time = 9
persistent = 0
anim = 732
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 3

[State 850, dust4]
type = Explod
trigger1 = Time = 12
persistent = 0
anim = 732
pos = -40,-40
postype = p1
sprpriority = 4
bindtime = 1

[State 850, dust5]
type = Explod
trigger1 = Time = 15
persistent = 0
anim = 732
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 3

[State 850, dust6]
type = Explod
trigger1 = Time = 18
persistent = 0
anim = 732
pos = -40,-40
postype = p1
sprpriority = 4
bindtime = 1

;---------------------------------------------------------------------------
; Overwritten Common.cns States
;---------------------------------------------------------------------------
; Stand (Normal Ryu)
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, Evil!]
type = ChangeState
trigger1 = palno > 6
value = 1

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

;---------------------------------------------------------------------------
; Stand (Evil)
[Statedef 1]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 1 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 1

[State 0, Evil!]
type = ChangeState
trigger1 = P2Dist X < 0 
value = 2

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

;---------------------------------------------------------------------------
; Evil Ryu Turn
[Statedef 2]
type = S
movetype = I
physics = S
anim = 7
ctrl = 1

[State 7001, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 1
ctrl = 1

;---------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
[Statedef 51]
type    = A
physics = A
anim = IfElse(Vel X < 0, 48, 49)
ctrl = Var(21)

[State 52, Turn!]
type = Turn
trigger1 = P2Dist X < 0

[State 51, 1]
type = Null
trigger1 = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 723, Landing Dust]
type = Explod
trigger1 = Time = 1
persistent = 0
anim = 733
ID = 733
pos = -65,-3
postype = p1
sprpriority = -1
bindtime = 1

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, Landing Sound]
type = PlaySnd
trigger1 = Time = 0
value = S12,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = Turn
trigger1 = P2Dist X < 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
triggerall = (Var(3) = 0) && (Anim != 162)
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = (HitShakeOver)
value = 151

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

[State 150, VarSet]
type = VarSet
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
var(3) = 1

;Slightly moves the character forward. (Push effect)
[State 150, PosAdd]
type = PosAdd
triggerall = NumHelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
x = 5

[State 154, Guard Push Spark]
type = Explod
triggerall = NumExplod(161) = 0 && NumHelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
anim = 161
ID = 161
postype = p1
pos = 30,-20
bindtime = -1
sprpriority = 2
ownpal = 1

[State 150, PushSnd]
type = PlaySnd
triggerall = Numhelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
value = S1,7

;Creates a helper, to push the opponent. The helper will be 
invisible.
[State 150, Push]
type = Helper
triggerall = Numhelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
ID = 160
name = "Guard_Push"
pos = 0,0
postype = p1
stateno = 160
helpertype = normal
ignorehitpause = 1
pausemovetime = 999
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 150, Guard Push Anim]
type = ChangeAnim
triggerall = Anim != 162
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
value = 162

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
;anim = 150

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 0
trigger1 = Time = 0 
value = 150

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 1
trigger1 = Time < GethitVar(hittime)
value = 162
elem = 2

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = Time >= GetHitVar(hittime)
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, 4]
type = ChangeState
trigger1 = Time >= GetHitVar(hittime) && (Var(3) = 0)
trigger2 = Var(3) = 1 && Time >= GethitVar(hittime) && Animtime = 0
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, VarSet]
type = VarSet
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
v = 3
value = 1

;Slightly moves the character forward. (Push effect)
[State 152, PosAdd]
type = PosAdd
triggerall = NumHelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
x = 5

[State 154, Guard Push Spark]
type = Explod
triggerall = NumExplod(161) = 0 && NumHelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
anim = 161
ID = 161
postype = p1
pos = 30,10
bindtime = -1
sprpriority = 2
ownpal = 1

[State 152, PushSnd]
type = PlaySnd
triggerall = NumHelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
value = S1,7

[State 152, Push]
type = Helper
triggerall = NumHelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
ID = 160
name = "Guard_Push"
pos = 0,0
postype = p1
stateno = 160
helpertype = normal
pausemovetime = 999
size.height = 999
size.ground.back = 10
size.ground.front = 10
ignorehitpause = 1


[State 152, 1]
type = ChangeAnim
triggerall = (Var(3) = 0) && (Anim != 163)
trigger1 = 1
value = 151

[State 150, Guard Push Anim]
type = ChangeAnim
triggerall = Anim != 163
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
value = 163

[State 152, 3]
type = ChangeState
trigger1 = (HitShakeOver)
value = 153

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
;anim = 151

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 0
trigger1 = Time = 0
value = 151

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 1
trigger1 = Time < GethitVar(hittime)
value = 163
elem = 2

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = Time >= GetHitVar(hittime)
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, 4]
type = ChangeState
trigger1 = Time >= GetHitVar(hittime) && Var(3) = 0 
trigger2 = Var(3) = 1 && Time >= GethitVar(hittime) && Animtime = 0
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
triggerall = (Var(3) = 0) && (Anim != 164)
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = (HitShakeOver)
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

[State 154, PosFreeze]
type = PosFreeze
trigger1 = NumHelper(160) > 0

[State 150, Guard Push Anim]
type = ChangeAnim
triggerall = Anim != 164
trigger1 = command = "xy"
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
value = 164

[State 154, VarSet]
type = VarSet
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
v = 3
value = 1

[State 154, Guard Push Spark]
type = Explod
triggerall = NumExplod(161) = 0 && Numhelper(160) = 0
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
anim = 161
ID = 161
postype = p1
pos = 30,-40
bindtime = -1
sprpriority = 2
ownpal = 1

[State 154, PushSnd]
type = PlaySnd
triggerall = NumHelper(160) = 0 
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
value = S1,7

[State 154, Push]
type = Helper
triggerall = NumHelper(160) = 0 
trigger1 = command = "xy" 
trigger2 = command = "yz"
trigger3 = command = "xz"
trigger4 = command = "xyz"
ID = 160
name = "Guard_Push"
pos = 0,0
postype = p1
stateno = 160
helpertype = normal
ignorehitpause = 1
pausemovetime = 999
size.height = 200
size.ground.back = 30
size.ground.front = 30

[State 152, Width]
type = Width
trigger1 = NumHelper(41) = 1
value = Const(size.ground.back),(Const(size.ground.front) + 15)

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
;anim = 152

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 0
trigger1 = Time = 0
value = 152

[State 151, ChangeAnim]
type = ChangeAnim
triggerall = Var(3) = 1
trigger1 = 1
value = 164
elem = 2

[State 155, 1a]
type = HitVelSet
trigger1 = Var(3) = 0
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command != "holdback"
value = 52

[State 155, 8]
type = ChangeState
trigger1 = sysvar(0)
value = 130

[State 155, PosFreeze]
type = PosFreeze
trigger1 = Var(3) = 1
trigger1 = NumHelper(160) > 0

[State 155, 1b]
type = HitVelSet
trigger1 = Var(3) = 1
trigger1 = !NumHelper(160)
x = 0
y = 1

[State 155, Off with ye!]
type = ChangeState
trigger1 = Var(3) = 1
trigger1 = NumHelper(160) = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Guard + Push
[Statedef 160] 
type = A
anim = 160 ;Invisible with CLSN box!

[State 160, Go!]
type = VelSet
trigger1 = Time >= 0
x = ifelse(Time >= 0 && Time <= 10, 20, ifelse(Time >= 11 && Time <= 13, 12, 10))
ignorehitpause = 1

[State 160, Push Them!]
type = PlayerPush
trigger1 = Time >= 0
value = 1
ignorehitpause = 1

[State 160, NotHitBy ANYTHING]
type = NotHitBy
Trigger1 = Time >= 0
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
Time = 1
ignorehitpause = 1

[State 160, Blah...Die!]
type = DestroySelf
trigger1 = Time >= 20
ignorehitpause = 1

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 3] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 4] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
value = a

[State 5000, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5001 ;HITG_SLIDE

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5011 ;HITC_SLIDE

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5035, Let's VarSet! (State 5080 tracker)]
type = VarSet
trigger1 = Prevstateno = 5080
var(5) = 1

[State 5035, 1]
type = ChangeAnim
triggerall = (Vel X = 0) && (PrevStateno != 5080)
trigger1 = Time = 7
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0 && (Var(5) = 0)
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 3]
type = CtrlSet
trigger1 = HitOver
value = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, If Moving] ;Change anim when done with transition
type = ChangeAnim
triggerall = (Var(5) != 1) && (Vel X != 0)
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, If Not Moving] ;Change anim when done with transition
type = ChangeAnim
triggerall = (Var(5) != 1) && (Vel X = 0)
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5050, Down Anim if not moving]
type = ChangeAnim
trigger1 = anim = 5035
trigger1 = Vel Y >= -2
value = 5061
persistent = 0

[State 5050, Down Anim any other Time]
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(Anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, Enable me to go back to the new way]
type = NULL;ChangeState
triggerall = alive
triggerall = Pos Y < 0
trigger1 = CanRecover
value = 5040

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype= H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 14]
type = ChangeState
triggerall = Var(2) = 1
trigger1 = Time = 2
value = 5700 ;Recovery Roll.

[State 5100, 7]
type = ChangeState
triggerall = Var(2) = 0
trigger1 = Time = 0 && GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
;value = 61
;pos = 0, 0
;under = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5100, 14]
type = ChangeState
triggerall = Var(2) = 1
trigger1 = Time = 2
value = 5700 ;Recovery Roll.

[State 5035, Let's Clearing Vars! (State 5080 tracker)]
type = VarSet
trigger1 = Time = 0
var(5) = 0

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = !Time

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = !Time

[State 5110, 5]
type = PosSet
trigger1 = !Time
y = 0

[State 5110, 5]
type = PosSet
trigger1 = Pos Y > 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 5110, 8]
type = VelSet
trigger1 = !Time
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 5110, SelfState]
type = SelfState
trigger1 = Alive && Time = 10 ;Const(data.liedown.time)
value = 5120

;---------------------------------------------------------------------------
; Recovery Roll
[Statedef 5700]
type = L
movetype = I
physics = S
ctrl = 0
anim = 5700 
velset = 0,0

[State 5700, VelSet]
type = VelSet
trigger1 = 1
x = 7

[State 5700, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 5700, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5700, VarSet]
type = VarSet
trigger1 = Time = 0
var(2) = 0
 
[State 5700, End]
type = ChangeState
trigger1 = Time >= 22
trigger2 = FrontEdgeBodyDist <= 10
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S
anim = ifelse(palno > 6, 1, 0)

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundno = 1
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundno = 1
fvalue = 0

[state 191, Turns Mode Special Entrance]
type = changestate
trigger1 = RoundsExisted = 0 && TeamMode = Turns && Roundno > 1
value = ifelse(Palno > 6, 1080, 192)

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190

[State 5900, Standing]
type = ChangeState
trigger1 = roundno > 0 && TeamMode != Turns
value = 0

;---------------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------------
[Statedef -2]
;---------------------------------------------------------------------------
;Gethit Sounds!
[State -2, Gethit Sound 1]
type = PlaySnd
triggerall = Time = 1
trigger1 = random < 150 && stateno = 5000
value = S0,0

[state -2, Gethit Sound 2]
type = playsnd
triggerall = Time = 1
trigger1 = random < 150 && stateno = 5070
value = S0,1

[state -2, Gethit Sound 3]
type = playsnd
triggerall = Time = 1
trigger1 = random < 150 && stateno = 5010
value = S0,0

[state -2, Gethit Sound 4]
type = playsnd
triggerall = Time = 1
trigger1 = random < 150 && stateno = 5010
value = S0,1

[State -2, Dizzy Noise!]
type = PlaySnd
trigger1 = Anim = 5300 && AnimElem = 5
trigger2 = Anim = 5500 && Time = 1
value = S0,2

[State -2, Stop Music ^^]
type = StopSnd
trigger1 = Prevstateno = 197
channel = 1

;---------------------------------------------------------------------------
;Danger!
[State -2, Danger]
type = PlaySnd
triggerall = Var(6) = 1
trigger1 = Life <= 200
value = S9,3

[State -2, Danger VarAdd]
type = varadd
triggerall = Life <= 200
trigger1 = Var(6)<= 2 
v = 6
value = 1

;---------------------------------------------------------------------------
;Miscellaneous
[State -2, Variables Display]
type = DisplaytoClipboard
trigger1 = 1
text = "Guard Push = %d || Recovery Roll = %d || Aerial Rave = %d" 
params = Var(3), Var(2), Var(12)

[State -2, Ryu's Rave (Time Counts Down)]
type = VarAdd
triggerall = stateno = [921,956]
trigger1 = 1
var(16) = -1
ignorehitpause = 1

[State -2, Afterimages...GO AWAY!]
type = Afterimagetime
trigger1 = stateno != [1160,1163]  ;Shin Ten Kuujin Kyaku 
trigger1 = stateno != 780 && stateno != 783  ;Shinkuu Hadoken
trigger1 = stateno != 790 && stateno != [910,911] ;Shinkuu Tatsu Maki Senpuu Kyaku
trigger1 = stateno != 722 && stateno != [800,804]  ;Shin Shoryuken
trigger1 = stateno != 821 && stateno != 880  ;Denjin Hadoken
trigger1 = stateno != 782 && stateno != 872 && stateno != 870 && stateno !=871  ;Burst SHadoken
trigger1 = stateno != [1120,1121]  ;Messatsu Gou Hadou
trigger1 = stateno != [1130,1138]  ;Messatsu Gou Shoryu
trigger1 = stateno != [1140,1141]  ;Tenma Gou Shinkuu Ha
trigger1 = stateno != [1040,1071]  ;Teleport
trigger1 = stateno != 920 && stateno != 810  ;Ryu's Rave
trigger1 = stateno != [1150,1151]  ;Raging Demon
time = 1

[State -2, Ryu's Rave (Can't be hit)]
type = Nothitby
triggerall = stateno = [923,959]
trigger1 = 1
value = SCA, AA, AT, AP, HA, HT, HP, SA, ST, SP
time = 1
ignorehitpause = 1

[State -2, PushEnd]
type = VarSet
trigger1 = var(3) != 0 && stateno != [150,160];[130,160]
var(3) = 0
ignorehitpause = 1

[State -2, Dash Onscreen if Offscreen]
type = Changestate
triggerall = Roundstate = [2,3]
trigger1 = Pos Y >= 0 && stateno != 100 && stateno != 810 && movetype != H && BackEdgeDist < -35
value = 810

[State -2, Super BG gone!]
type = RemoveExplod
trigger1 = stateno != 780 && stateno != 783  ;Shinkuu Hadoken
trigger1 = stateno != 790 && stateno != [910,911] ;Shinkuu Tatsu Maki Senpuu Kyaku
trigger1 = stateno != 800 && stateno != 803 && stateno != 804  ;Shin Shoryuken
trigger1 = stateno != 801 && stateno != 802 && stateno != 722
trigger1 = stateno != 821 && stateno != 880  ;Denjin Hadoken
trigger1 = stateno != 782 && stateno != 872 && stateno != 870 && stateno !=871  ;Burst SHadoken
trigger1 = stateno != 1120  ;Messatsu Gou Hadou
trigger1 = stateno != [1130,1138]  ;Messatsu Gou Shoryu
trigger1 = stateno != [1140,1141]  ;Tenma Gou Shinkuu Ha
trigger1 = stateno != [1150,1151]  ;The Raging Demon
ID = 792

[State -2, Remove Shinkuu Hadoken Feedback]
type = RemoveExplod
trigger1 = stateno != 780 && stateno != 783 && stateno != 870 && stateno != 871 
trigger1 = stateno !=1120
ID = 803

[State -2, Remove Shinkuu Hurricane Kick Slashes!]
type = RemoveExplod
trigger1 = stateno != 790 && stateno != 911 && stateno != 1140
ID = 811

[State -2, FLAME!]
type = Explod
trigger1 = (projhit723 = 1 || projhit725 = 1) && (numexplod(735) = 0)
anim = 735
id = 735
pos = 0,-120
postype = p2
bindtime = 100
bind = p2

[State -2, Let's Screen Bounding!]
type = ScreenBound
trigger1 = Var(12) = 1 && FrontEdgeBodyDist > 30
value = 0

[State 620, Aerial Rave now Ends.  Bound.]
type = Varset
trigger1 = statetype != A && stateno != 52
trigger2 = movetype = H
var(12) = 0

[State -2, Aerial Rave now Ends. Rave Mode.]
type = Varset
trigger1 = statetype != A && stateno != 52
trigger2 = movetype = H
var(20) = 0

[State -2, End of Super Jump]
type = Varset
trigger1 = statetype != A && stateno != 52
trigger2 = movetype = H
var(21) = 0

;---------------------------------------------------------------------------
;Hyper Combo Finish Data

[State -2, Shinkuu Hadoken KO]
type = explod
triggerall = winko && Var(8) = 0
trigger1 = stateno = 780 || stateno = 783
trigger2 = (stateno = 782 && prevstateno = 870 || stateno = [870,872])
anim = 850
pos = 30,50
postype = left
removetime = 50
sprpriority = 5
ontop = 1
bindtime = -1

[State -2, Shinkuu Tatumaki KO]
type = explod
triggerall = winko && Var(8) = 0
trigger1 = stateno = 790 || stateno = [910,911]
anim = 851
pos = -40,50
postype = left
removetime = 50
sprpriority = 5
ontop = 1
bindtime = -1

[State -2, Shin Shoryuuken KO]
type = explod
triggerall = winko && Var(8) = 0
trigger1 = stateno = 800 || stateno = 802 || stateno = 803
anim = 852
pos = 0,50
postype = left
removetime = 50
sprpriority = 5
ontop = 1
bindtime = -1

[State -2, Denjin Hadoken KO]
type = explod
triggerall = winko && Var(8) = 0
trigger1 = stateno = 821 || stateno = 880
anim = 853
pos = 30,50
postype = left
removetime = 50
sprpriority = 5
ontop = 1
bindtime = -1

[State -2, Messatsu Gou Hadou KO]
type = explod
triggerall = winko && Var(8) = 0
trigger1 = stateno = 1120
anim = 854
pos = 0,60
postype = left
removetime = 50
sprpriority = 5
ontop = 1
bindtime = -1

[State -2, Messatsu Gou Shoryuu KO]
type = explod
triggerall = winko && Var(8) = 0
trigger1 = stateno = [1130,1138]  
anim = 855
pos = 13,60
postype = left
removetime = 50
sprpriority = 5
ontop = 1
bindtime = -1

[State -2, Tenma Gou Shinkuu Ha KO]
type = explod
triggerall = winko && Var(8) = 0
trigger1 = stateno = [1140,1141]   
anim = 856
pos = -43,60
postype = left
removetime = 50
sprpriority = 5
ontop = 1
bindtime = -1

[State -2, Shun Goku Satsu KO]
type = explod
triggerall = winko && Var(8) = 0
trigger1 = stateno = 1153  
anim = 857
pos = -43,60
postype = left
removetime = 50
sprpriority = 5
ontop = 1
bindtime = -1

[State -2, Hyper Combo Finish Superpause]
type = SuperPause
triggerall = winko && Var(8)= 1
trigger1 = stateno = 780 || stateno = 783  ;Shinkuu Hadoken
trigger2 = (stateno = 782 && prevstateno = 870 || stateno = [870,872])
trigger3 = stateno = 790 || stateno = [910,911]  ;Shinkuu Tatumaki
trigger4 = stateno = 800 || stateno = 802 || stateno = 803  ;Shin Shoryuuken
trigger5 = stateno = 821 || stateno = 880  ;Denjin Hadoken
trigger6 = stateno = 1120  ;Messatsu Gou Hadou
trigger7 = stateno = [1130,1138]  ;Messatsu Gou Shoryu
trigger8 = stateno = [1140,1141]  ;Tenma Gou Shinkuu Ha
trigger9 = stateno = 1153  ;The Raging Demon
time = 30
anim = -1

[State -2, Hyper Combo Finish Noise]
type = playsnd
triggerall = winko && (Var(8)= 0)
trigger1 = stateno = 780 || stateno = 783  ;Shinkuu Hadoken
trigger2 = (stateno = 782 && prevstateno = 870 || stateno = [870,872])
trigger3 = stateno = 790 || stateno = [910,911]  ;Shinkuu Tatumaki
trigger4 = stateno = 800 || stateno = 802 || stateno = 803  ;Shin Shoryuuken
trigger5 = stateno = 821 || stateno = 880  ;Denjin Hadoken
trigger6 = stateno = 1120  ;Messatsu Gou Hadou
trigger7 = stateno = [1130,1138]  ;Messatsu Gou Shoryu
trigger8 = stateno = [1140,1141]  ;Tenma Gou Shinkuu Ha
trigger9 = stateno = 1153  ;The Raging Demon
value = S1,8

[State -2, Hyper Combo Finish Noise 2]
type = playsnd
triggerall = winko && (Var(8)= 0)
trigger1 = stateno = 780 || stateno = 783  ;Shinkuu Hadoken
trigger2 = (stateno = 782 && prevstateno = 870 || stateno = [870,872])
trigger3 = stateno = 790 || stateno = [910,911]  ;Shinkuu Tatumaki
trigger4 = stateno = 800 || stateno = 802 || stateno = 803  ;Shin Shoryuuken
trigger5 = stateno = 821 || stateno = 880  ;Denjin Hadoken
trigger6 = stateno = 1120  ;Messatsu Gou Hadou
trigger7 = stateno = [1130,1138]  ;Messatsu Gou Shoryu
trigger8 = stateno = [1140,1141]  ;Tenma Gou Shinkuu Ha
trigger9 = stateno = 1153  ;The Raging Demon
value = S9,1

[State -2, Hyper Combo Finish VarAdd]
type = varadd
triggerall = winko
trigger1 = Var(8)<= 2 
v = 8
value = 1

;---------------------------------------------------------------------------
;Dust Trail Data

[State -2, Dust Trail VarSet 1]
type = Varset
trigger1 = NumProjID(722) = 0 || ProjContact(722) = 1
trigger2 = NumProjID(723) = 0 || ProjContact(723) = 1
trigger3 = NumProjID(830) = 0 || ProjContact(830) = 1
trigger4 = NumProjID(880) = 0 || ProjContact(880) = 1
var(13) = 1
ignorehitpause = 1

[State -2, Dust Trail VarSet 2]
type = Varset
trigger1 = NumProjID(722) = 1 && ProjContact(722) = 0
trigger2 = NumProjID(723) = 1 && ProjContact(723) = 0
trigger3 = NumProjID(830) = 1 && ProjContact(830) = 0
trigger4 = NumProjID(880) = 1 && ProjContact(880) = 0
var(13) = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;---------------------------------------------------------------------------

[Statedef -3]

[State -3, Just in case...]
type = ChangeState
trigger1 = Stateno = 0
trigger1 = Pos y != 0
value = 50
ctrl = 1
